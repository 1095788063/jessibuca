{"version":3,"file":"jessibuca.js","sources":["../../src/constant/index.js","../../src/utils/debug.js","../../src/utils/events.js","../../src/player/property.js","../../node_modules/screenfull/dist/screenfull.js","../../src/player/events.js","../../src/utils/index.js","../../src/utils/emitter.js","../../src/utils/webgl.js","../../src/video/canvasLoader.js","../../src/video/index.js","../../src/audio/audioContextLoader.js","../../src/audio/index.js","../../src/stream/fetchLoader.js","../../src/stream/websocketLoader.js","../../src/stream/index.js","../../src/recorder/recordRTCLoader.js","../../src/recorder/index.js","../../src/worker/index.js","../../src/demux/flvLoader.js","../../src/demux/m7sLoader.js","../../src/demux/index.js","../../src/decoder/webcodecs.js","../../src/control/icons.js","../../src/control/template.js","../../src/control/observer.js","../../src/control/property.js","../../src/control/events.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/control/index.js","../../src/player/index.js","../../src/jessibuca.js"],"sourcesContent":["// 播放协议\nexport const PLAYER_PLAY_PROTOCOL = {\n    websocket: 0,\n    fetch: 1\n}\n\nexport const DEMUX_TYPE = {\n    flv: 'flv',\n    m7s: 'm7s'\n}\n\n\n// default player options\nexport const DEFAULT_PLAYER_OPTIONS = {\n    videoBuffer: 0.5,\n    vod: false,\n    isResize: true,\n    isFullResize: false,\n    isFlv: false,\n    debug: false,\n    timeout: 30,\n    supportDblclickFullscreen: false,\n    showBandwidth: false, //\n    keepScreenOn: false,\n    isNotMute: false,\n    hasAudio: true,\n    hasVideo: true,\n    operateBtns: {\n        fullscreen: false,\n        screenshot: false,\n        play: false,\n        audio: false,\n        recorder: false\n    },\n    hasControl: false,\n    loadingText: '',\n    background: '',\n    decoder: 'decoder.js',\n    url: '',//\n    rotate: 0,\n    text: '',\n    forceNoOffscreen: true, // 默认是不采用\n    hiddenAutoPause: false,\n    protocol: PLAYER_PLAY_PROTOCOL.fetch,\n    demuxType: DEMUX_TYPE.flv, //\n    useWCS: false, //\n    useEMS: false, //\n    useOffscreen: false //\n}\n\n\nexport const WORKER_CMD_TYPE = {\n    init: 'init',\n    initVideo: 'initVideo',\n    render: 'render',\n    playAudio: 'playAudio',\n    print: 'print',\n    printErr: 'printErr',\n    initAudio: 'initAudio',\n    kBps: 'kBps',\n    decode: 'decode',\n    audioCode: 'audioCode',\n    videoCode: 'videoCode'\n}\n\nexport const MEDIA_TYPE = {\n    audio: 1,\n    video: 2\n}\n\nexport const FLV_MEDIA_TYPE = {\n    audio: 8,\n    video: 9\n}\n\nexport const WORKER_SEND_TYPE = {\n    init: 'init',\n    decode: 'decode',\n    audioDecode: 'audioDecode',\n    videoDecode: 'videoDecode',\n    close: 'close'\n}\n\n\n//\nexport const EVENTS = {\n    fullscreen: 'fullscreen',\n    webFullscreen: 'webFullscreen',\n    decoderWorkerInit: 'decoderWorkerInit',\n    play: 'play',\n    playing: 'playing',\n    pause: 'pause',\n    mute: 'mute',\n    load: 'load',\n    loading: 'loading',\n    videoInfo: 'videoInfo',\n    timeUpdate: 'timeUpdate',\n    audioInfo: \"audioInfo\",\n    log: 'log',\n    error: \"error\",\n    kBps: 'kBps',\n    timeout: 'timeout',\n    stats: 'stats',\n    performance: \"performance\",\n    record: 'record',\n    recording: 'recording',\n    recordingTimestamp: 'recordingTimestamp',\n    buffer: 'buffer',\n    videoFrame: 'videoFrame',\n    start: 'start',\n    metadata: 'metadata',\n    resize: 'resize',\n    streamRate: 'streamRate',\n    streamEnd: 'streamEnd',\n    streamSuccess:'streamSuccess',\n    streamMessage: 'streamMessage',\n    streamError: 'streamError',\n    volumechange: 'volumechange',\n    frameStart: 'frameStart'\n}\n\n\nexport const JESSIBUCA_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    videoInfo: EVENTS.videoInfo,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    log: EVENTS.log,\n    start: EVENTS.frameStart,\n    timeout: EVENTS.timeout,\n    fullscreen: EVENTS.fullscreen,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    performance: EVENTS.performance\n}\n\nexport const EVENTS_ERROR = {\n    fetchError: \"fetchError\",\n    websocketError: 'websocketError',\n    websocketCloseSuccess: 'websocketCloseSuccess',\n    websocketClosedByError: 'websocketClosedByError',\n}\n\n\nexport const WEBSOCKET_STATUS = {\n    notConnect: 'notConnect',\n    open: 'open',\n    close: 'close',\n    error: 'error'\n}\n\nexport const BUFFER_STATUS = {\n    empty: 'empty',\n    buffering: 'buffering',\n    full: 'full'\n}\n\n\nexport const SCREENSHOT_TYPE = {\n    download: 'download',\n    base64: 'base64',\n    blob: 'blob'\n}\n\n\nexport const VIDEO_ENC_TYPE = {\n    7: 'H264', //\n    12: 'H265' //\n}\n\nexport const AUDIO_ENC_TYPE = {\n    10: 'AAC',\n    7: 'ALAW',\n    8: 'MULAW'\n}\n\nexport const VIDEO_ENC_TYPE_OBJ = {\n    h264: 'H264',\n    H265: 'H265'\n}\n\nexport const CONTROL_HEIGHT = 38\n\nexport const SCALE_MODE_TYPE = {\n    full: 0, //  视频画面完全填充canvas区域,画面会被拉伸\n    auto: 1, // 视频画面做等比缩放后,高或宽对齐canvas区域,画面不被拉伸,但有黑边\n    fullAuto: 2 // 视频画面做等比缩放后,完全填充canvas区域,画面不被拉伸,没有黑边,但画面显示不全\n}\n","export default class Debug {\n    constructor(master) {\n        this.log = (name, ...args) => {\n            if (master._opt.debug) {\n                console.log(`Jessibuca: [${name}]`, ...args);\n            }\n        };\n\n        this.warn = (name, ...args) => {\n            if (master._opt.debug) {\n                console.warn(`Jessibuca: [${name}]`, ...args);\n            }\n        };\n\n        this.error = (name, ...args) => {\n            if (master._opt.debug) {\n                console.error(`Jessibuca: [${name}]`, ...args);\n            }\n        };\n    }\n}\n","export default class Events {\n    constructor(master) {\n        this.destroys = [];\n        this.proxy = this.proxy.bind(this);\n        this.master = master;\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (Array.isArray(name)) {\n            return name.map(item => this.proxy(target, item, callback, option));\n        }\n        target.addEventListener(name, callback, option);\n        const destroy = () => target.removeEventListener(name, callback, option);\n        this.destroys.push(destroy);\n        return destroy;\n    }\n\n    destroy() {\n        this.master.debug.log(`Events`, 'destroy');\n        this.destroys.forEach(event => event());\n    }\n}\n","export default (player)=>{\n    Object.defineProperty(player, 'rect', {\n        get: () => {\n            return player.$container.getBoundingClientRect();\n        },\n    });\n\n    ['bottom', 'height', 'left', 'right', 'top', 'width'].forEach(key => {\n        Object.defineProperty(player, key, {\n            get: () => {\n                return player.rect[key];\n            },\n        });\n    });\n}\n","/*!\n* screenfull\n* v5.1.0 - 2020-12-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import {EVENTS} from \"../constant\";\nimport screenfull from \"screenfull\";\n\nexport default (player) => {\n\n//\n    player.on(EVENTS.load, () => {\n        player.debug.log('player', 'has loaded');\n        player._hasLoaded = true;\n    })\n\n    //\n    player.on(EVENTS.play, () => {\n        player.loading = false;\n    })\n\n    //\n    player.on(EVENTS.fullscreen, (value) => {\n        if (value) {\n            try {\n                screenfull.request(player.$container).then(() => {\n\n                }).catch((e) => {\n                    player.webFullscreen = true;\n                });\n\n            } catch (e) {\n                player.webFullscreen = true;\n            }\n        } else {\n            try {\n                screenfull.exit().then(() => {\n                    if (player.$borderSelect) {\n                        player.$borderSelect.style.display = 'block';\n                    }\n                }).catch(() => {\n                    player.webFullscreen = false;\n\n                });\n            } catch (e) {\n                player.webFullscreen = false;\n            }\n        }\n    })\n\n    player.on(EVENTS.webFullscreen, (value) => {\n        if (value) {\n            player.$container.classList.add('webmediaplayer-fullscreen-web')\n            const {clientHeight: bodyHeight, clientWidth: bodyWidth} = document.body;\n            const {clientHeight: playerHeight, clientWidth: playerWidth} = player.video.$videoElement;\n            const bodyRatio = bodyWidth / bodyHeight;\n            const playerRatio = playerWidth / playerHeight;\n            const needSpin = bodyRatio < playerRatio;\n            if (needSpin) {\n                const scale = Math.min(bodyHeight / playerWidth, bodyWidth / playerHeight);\n                player.video.$videoElement.style.transform = `rotate(90deg) scale(${scale},${scale})`;\n            }\n\n        } else {\n            player.$container.classList.remove('webmediaplayer-fullscreen-web')\n            player.video.$videoElement.style.transform = null;\n        }\n    })\n\n    //\n    player.on(EVENTS.resize, () => {\n        player.video.resize();\n    })\n\n\n    if (player._opt.debug) {\n        Object.keys(EVENTS).forEach((key) => {\n            player.on(EVENTS[key], (value) => {\n                player.debug.log('player events', EVENTS[key], value);\n            })\n        })\n    }\n}\n","export function noop() {\n}\n\n\nexport function supportOffscreen($canvas) {\n    return typeof $canvas.transferControlToOffscreen === 'function';\n}\n\n\nexport function supportOffscreenV2() {\n    return typeof OffscreenCanvas !== \"undefined\";\n}\n\n\nexport function createContextGL($canvas) {\n    let gl = null;\n\n    const validContextNames = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"];\n    let nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n        const contextName = validContextNames[nameIndex];\n\n        try {\n            let contextOptions = {preserveDrawingBuffer: true};\n            gl = $canvas.getContext(contextName, contextOptions);\n        } catch (e) {\n            gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== \"function\") {\n            gl = null;\n        }\n\n        ++nameIndex;\n    }\n\n\n    return gl;\n}\n\n\nexport function audioContextUnlock(context) {\n    context.resume();\n    const source = context.createBufferSource();\n    source.buffer = context.createBuffer(1, 1, 22050);\n    source.connect(context.destination);\n    if (source.noteOn) {\n        source.noteOn(0);\n    } else {\n        source.start(0);\n    }\n}\n\nexport function dataURLToFile(dataURL = '') {\n    const arr = dataURL.split(\",\");\n    const bstr = atob(arr[1]);\n    const type = arr[0].replace(\"data:\", \"\").replace(\";base64\", \"\")\n    let n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], 'file', {type});\n}\n\nexport function downloadFile(file, fileName) {\n    if (file instanceof Blob || file instanceof File) {\n        file = new Blob([file]);\n    }\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = file;\n    aLink.click();\n}\n\n\nexport function downloadImg(content, fileName) {\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = URL.createObjectURL(content);\n    aLink.click();\n    URL.revokeObjectURL(content);\n}\n\nexport function checkFull() {\n    let isFull = document.fullscreenElement || window.webkitFullscreenElement || document.msFullscreenElement;\n    if (isFull === undefined) isFull = false;\n    return !!isFull;\n}\n\nexport function now() {\n    return new Date().getTime();\n}\n\nexport const supportedWasm = (() => {\n    try {\n        if (typeof WebAssembly === \"object\"\n            && typeof WebAssembly.instantiate === \"function\") {\n            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n            if (module instanceof WebAssembly.Module)\n                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n    } catch (e) {\n    }\n    return false;\n})();\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\n\nexport function getStyle(element, key, numberType = true) {\n    const value = getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function calculationRate(callback) {\n    let totalSize = 0;\n    let lastTime = getNowTime();\n    return size => {\n        totalSize += size;\n        const thisTime = getNowTime();\n        const diffTime = thisTime - lastTime;\n        if (diffTime >= 1000) {\n            callback((totalSize / diffTime) * 1000);\n            lastTime = thisTime;\n            totalSize = 0;\n        }\n    };\n}\n\nexport function downloadRecord(blob, name, suffix) {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = (name || now()) + '.' + (suffix || FILE_SUFFIX.webm);\n    a.click();\n    window.URL.revokeObjectURL(url);\n}\n\nexport const env = '__ENV__';\n\nexport function isMobile() {\n    return (/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isAndroid() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/android/i.test(UA));\n}\n\nexport function isIOS() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\n\nexport function parseTime(time, cFormat) {\n    if (arguments.length === 0) {\n        return null\n    }\n    var format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\n    var date;\n    if (typeof time === 'object') {\n        date = time\n    } else {\n        if (('' + time).length === 10) time = parseInt(time) * 1000;\n        time = +time; // 转成int 型\n        date = new Date(time)\n    }\n    var formatObj = {\n        y: date.getFullYear(),\n        m: date.getMonth() + 1,\n        d: date.getDate(),\n        h: date.getHours(),\n        i: date.getMinutes(),\n        s: date.getSeconds(),\n        a: date.getDay()\n    };\n    var time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n        var value = formatObj[key]\n        if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1]\n        if (result.length > 0 && value < 10) {\n            value = '0' + value\n        }\n        return value || 0\n    });\n    return time_str\n}\n\n// 是否支持 webcodecs\nexport function supportWCS() {\n    return \"VideoEncoder\" in window;\n}\n\nexport function toNumber(value) {\n    if (typeof value !== 'string') {\n        return value;\n    } else {\n        // 转换成 number 类型\n        var parsed = Number(value);\n        return isNaN(parsed) ? value : parsed;\n    }\n}\n\nexport function uuid16() {\n    return 'xxxxxxxxxxxx4xxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\n\nexport function isDef(v) {\n    return v !== undefined && v !== null;\n}\n\nexport function formatVideoDecoderConfigure(avcC) {\n    let codecArray = avcC.subarray(1, 4);\n    let codecString = \"avc1.\";\n    for (let j = 0; j < 3; j++) {\n        let h = codecArray[j].toString(16);\n        if (h.length < 2) {\n            h = \"0\" + h\n        }\n        codecString += h\n    }\n\n    return {\n        codec: codecString,\n        description: avcC\n    }\n}\n\nexport function isFullScreen() {\n    return document.isFullScreen || document.mozIsFullScreen || document.webkitIsFullScreen;\n}\n","export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({fn, ctx});\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n\n        if (!name) {\n            Object.keys(e).forEach((key) => {\n                delete e[key];\n            })\n            delete this.e\n            return;\n        }\n\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","export default (gl) => {\n    var vertexShaderScript = [\n        'attribute vec4 vertexPos;',\n        'attribute vec4 texturePos;',\n        'varying vec2 textureCoord;',\n\n        'void main()',\n        '{',\n        'gl_Position = vertexPos;',\n        'textureCoord = texturePos.xy;',\n        '}'\n    ].join('\\n');\n\n    var fragmentShaderScript = [\n        'precision highp float;',\n        'varying highp vec2 textureCoord;',\n        'uniform sampler2D ySampler;',\n        'uniform sampler2D uSampler;',\n        'uniform sampler2D vSampler;',\n        'const mat4 YUV2RGB = mat4',\n        '(',\n        '1.1643828125, 0, 1.59602734375, -.87078515625,',\n        '1.1643828125, -.39176171875, -.81296875, .52959375,',\n        '1.1643828125, 2.017234375, 0, -1.081390625,',\n        '0, 0, 0, 1',\n        ');',\n\n        'void main(void) {',\n        'highp float y = texture2D(ySampler,  textureCoord).r;',\n        'highp float u = texture2D(uSampler,  textureCoord).r;',\n        'highp float v = texture2D(vSampler,  textureCoord).r;',\n        'gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',\n        '}'\n    ].join('\\n');\n\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderScript);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n        console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentShaderScript);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n        console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n    }\n\n    gl.useProgram(program);\n\n    var vertexPosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n    var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n    gl.enableVertexAttribArray(vertexPosRef);\n    gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n    var texturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n    gl.enableVertexAttribArray(texturePosRef);\n    gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    function _initTexture(name, index) {\n        var textureRef = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, textureRef);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.uniform1i(gl.getUniformLocation(program, name), index);\n        return textureRef;\n    }\n\n    var yTextureRef = _initTexture('ySampler', 0);\n    var uTextureRef = _initTexture('uSampler', 1);\n    var vTextureRef = _initTexture('vSampler', 2);\n\n    return {\n        render: function (w, h, y, u, v) {\n            gl.viewport(0, 0, w, h);\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, w, h, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, y);\n            gl.activeTexture(gl.TEXTURE1);\n            gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, w / 2, h / 2, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, u);\n            gl.activeTexture(gl.TEXTURE2);\n            gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, w / 2, h / 2, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, v);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        },\n        destroy: function () {\n            try {\n                gl.deleteProgram(program);\n\n                gl.deleteBuffer(vertexPosBuffer)\n                gl.deleteBuffer(texturePosBuffer);\n\n                gl.deleteTexture(yTextureRef);\n                gl.deleteTexture(uTextureRef);\n                gl.deleteBuffer(vTextureRef);\n            } catch (e) {\n                // console.error(e);\n            }\n\n        }\n    }\n};\n","import Emitter from \"../utils/emitter\";\nimport {createContextGL, dataURLToFile, downloadImg, now, supportOffscreen} from \"../utils\";\nimport createWebGL from \"../utils/webgl\";\nimport {CONTROL_HEIGHT, EVENTS, SCREENSHOT_TYPE, VIDEO_ENC_TYPE} from \"../constant\";\n\n\nexport default class CanvasVideoLoader extends Emitter {\n\n    constructor(player) {\n        super()\n        this.player = player;\n        const $canvasElement = document.createElement(\"canvas\");\n        $canvasElement.style.position = \"absolute\";\n        $canvasElement.style.top = 0;\n        $canvasElement.style.left = 0;\n        this.$videoElement = $canvasElement;\n        player.$container.appendChild(this.$videoElement);\n\n        this.contextGl = null;\n        this.contextGlRender = null;\n        this.contextGlDestroy = null;\n        this.bitmaprenderer = null;\n        this.videoInfo = {\n            width: '',\n            height: '',\n            encType: '',\n            encTypeCode: ''\n        }\n        this.player.debug.log('CanvasVideo', 'init');\n\n    }\n\n    //\n    updateVideoInfo(data) {\n        if (data.encTypeCode) {\n            this.videoInfo.encTypeCode = data.encTypeCode;\n            this.videoInfo.encType = VIDEO_ENC_TYPE[data.encTypeCode];\n        }\n\n        if (data.width) {\n            this.videoInfo.width = data.width;\n        }\n\n        if (data.height) {\n            this.videoInfo.height = data.height;\n        }\n    }\n\n    _initContextGl() {\n        this.contextGl = createContextGL(this.$videoElement);\n        const webgl = createWebGL(this.contextGl);\n        this.contextGlRender = webgl.render;\n        this.contextGlDestroy = webgl.destroy\n    }\n\n    initCanvasViewSize() {\n        this.$videoElement.width = this.videoInfo.width;\n        this.$videoElement.height = this.videoInfo.height;\n\n        if (!this.player._opt.useWCS) {\n            this._initContextGl();\n        }\n\n        this.resize();\n    }\n\n    _supportOffscreen() {\n        return supportOffscreen(this.$videoElement) && this.player._opt.useOffscreen;\n    }\n\n    //\n    bindOffscreen() {\n        if (this._supportOffscreen()) {\n            this.bitmaprenderer = this.$videoElement.getContext('bitmaprenderer');\n        }\n    }\n\n    render(msg) {\n        if (this._supportOffscreen()) {\n            this.bitmaprenderer && this.bitmaprenderer.transferFromImageBitmap(msg.buffer);\n        } else if (this.player._opt.useWCS) {\n            this.$videoElement.drawImage(msg.videoFrame, 0, 0, this.$videoElement.width, this.$videoElement.height);\n        } else {\n            this.contextGlRender(this.$videoElement.width, this.$videoElement.height, msg.output[0], msg.output[1], msg.output[2]);\n        }\n    }\n\n    screenshot(filename, format, quality, type) {\n        filename = filename || now();\n        type = type || SCREENSHOT_TYPE.download;\n        const formatType = {\n            png: 'image/png',\n            jpeg: 'image/jpeg',\n            webp: 'image/webp'\n        };\n        let encoderOptions = 0.92;\n        if (!formatType[format] && SCREENSHOT_TYPE[format]) {\n            type = format;\n            format = 'png';\n            quality = undefined\n        }\n\n        if (typeof quality === \"string\") {\n            type = quality;\n            quality = undefined;\n        }\n\n        if (typeof quality !== 'undefined') {\n            encoderOptions = Number(quality);\n        }\n        const dataURL = this.$videoElement.toDataURL(formatType[format] || formatType.png, encoderOptions);\n\n        const file = dataURLToFile(dataURL)\n        if (type === SCREENSHOT_TYPE.base64) {\n            return dataURL;\n        } else if (type === SCREENSHOT_TYPE.blob) {\n            return file;\n        } else if (type === SCREENSHOT_TYPE.download) {\n            downloadImg(file, filename);\n        }\n    }\n\n    //\n    clearView() {\n        if (this.contextGl) {\n            this.contextGl.clear(this.contextGl.COLOR_BUFFER_BIT);\n        } else if (this.player._opt.useWCS) {\n\n        }\n    }\n\n    resize() {\n        this.player.debug.log('canvasVideo', 'resize');\n        const width = this.player.width;\n        let height = this.player.height;\n        if (this.player._opt.hasControl) {\n            height -= CONTROL_HEIGHT;\n        }\n        const resizeWidth = this.$videoElement.width;\n        const resizeHeight = this.$videoElement.height;\n        const wScale = width / resizeWidth;\n        const hScale = height / resizeHeight;\n        let scale = wScale > hScale ? hScale : wScale;\n        //\n        if (!this.player._opt.isResize) {\n            if (wScale !== hScale) {\n                scale = wScale + ',' + hScale;\n            }\n        }\n        //\n        if (this.player._opt.isFullResize) {\n            scale = wScale > hScale ? wScale : hScale;\n        }\n        let transform = \"scale(\" + scale + \")\";\n        this.$videoElement.style.transform = transform;\n        this.$videoElement.style.left = ((width - resizeWidth) / 2) + \"px\"\n        this.$videoElement.style.top = ((height - resizeHeight) / 2) + \"px\"\n    }\n\n    destroy() {\n        if (this.contextGl) {\n            this.contextGl = null;\n        }\n        if (this.contextGlRender) {\n            this.contextGlDestroy && this.contextGlDestroy();\n            this.contextGlRender = null;\n        }\n        if (this.bitmaprenderer) {\n            this.bitmaprenderer = null;\n        }\n\n        this.videoInfo = {\n            width: '',\n            height: '',\n            encType: '',\n            encTypeCode: ''\n        }\n\n        this.player.$container.removeChild(this.$videoElement);\n        this.player.debug.log(`CanvasVideoLoader`, 'destroy');\n    }\n}\n","import CanvasVideoLoader from './canvasLoader';\nimport VideoLoader from \"./videoLoader\";\n\nexport default class Video {\n    constructor(player) {\n        const Loader = Video.getLoaderFactory();\n        return new Loader(player);\n    }\n\n    static getLoaderFactory() {\n        return CanvasVideoLoader;\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {AUDIO_ENC_TYPE, EVENTS, VIDEO_ENC_TYPE} from \"../constant\";\nimport {clamp, noop} from \"../utils\";\n\nexport default class AudioContextLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.bufferList = [];\n        this.player = player;\n        this.scriptNode = null;\n        this.hasInitScriptNode = false;\n        this.audioContextChannel = null;\n\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        //\n        this.gainNode = this.audioContext.createGain();\n        // Get an AudioBufferSourceNode.\n        // This is the AudioNode to use when we want to play an AudioBuffer\n        const source = this.audioContext.createBufferSource();\n        // set the buffer in the AudioBufferSourceNode\n        source.buffer = this.audioContext.createBuffer(1, 1, 22050);\n        // connect the AudioBufferSourceNode to the\n        // destination so we can hear the sound\n        source.connect(this.audioContext.destination);\n        // noteOn as start\n        // start the source playing\n        if (source.noteOn) {\n            source.noteOn(0);\n        } else {\n            source.start(0);\n        }\n        this.audioBufferSourceNode = source;\n        //\n        this.mediaStreamAudioDestinationNode = this.audioContext.createMediaStreamDestination();\n        //\n        this.audioEnabled(true);\n        // default setting 0\n        this.gainNode.gain.value = 0;\n\n        this.playing = false;\n\n\n        this.audioInfo = {\n            encType: '',\n            encTypeCode: '',\n            channels: '',\n            sampleRate: ''\n        }\n        this.player.debug.log('AudioContext', 'init');\n    }\n\n    updateAudioInfo(data) {\n        if (data.encTypeCode) {\n            this.audioInfo.encTypeCode = data.encTypeCode;\n            this.audioInfo.encType = AUDIO_ENC_TYPE[data.encTypeCode];\n        }\n\n        if (data.channels) {\n            this.audioInfo.channels = data.channels;\n        }\n\n        if (data.sampleRate) {\n            this.audioInfo.sampleRate = data.sampleRate;\n        }\n    }\n\n    //\n    get isPlaying() {\n        return this.playing;\n    }\n\n    get isMute() {\n        return this.gainNode.gain.value === 0 && this.isStateSuspended();\n    }\n\n    get volume() {\n        return this.gainNode.gain.value;\n    }\n\n    get bufferSize() {\n        return this.bufferList.length;\n    }\n\n    initScriptNode() {\n        if (this.hasInitScriptNode) {\n            return;\n        }\n\n        const channels = this.audioInfo.channels;\n\n        const scriptNode = this.audioContext.createScriptProcessor(1024, 0, channels);\n        this.playing = true;\n        scriptNode.onaudioprocess = (audioProcessingEvent) => {\n            const outputBuffer = audioProcessingEvent.outputBuffer;\n\n            if (this.bufferList.length && this.playing) {\n                const buffer = this.bufferList.shift();\n                for (let channel = 0; channel < channels; channel++) {\n                    const b = buffer[channel]\n                    const nowBuffering = outputBuffer.getChannelData(channel);\n                    for (let i = 0; i < 1024; i++) {\n                        nowBuffering[i] = b[i] || 0\n                    }\n                }\n            }\n        }\n\n        scriptNode.connect(this.gainNode);\n        this.scriptNode = scriptNode;\n        this.gainNode.connect(this.audioContext.destination);\n        this.gainNode.connect(this.mediaStreamAudioDestinationNode);\n        this.hasInitScriptNode = true;\n    }\n\n    mute(flag) {\n        if (flag) {\n            this.setVolume(0);\n            this.audioEnabled(false);\n            this.clear();\n        } else {\n            this.audioEnabled(true);\n        }\n    }\n\n    setVolume(volume) {\n        volume = parseFloat(volume).toFixed(2);\n        if (isNaN(volume)) {\n            return;\n        }\n        this.audioEnabled(true);\n        volume = clamp(volume, 0, 1);\n        this.gainNode.gain.value = volume;\n        this.gainNode.gain.setValueAtTime(volume, this.audioContext.currentTime);\n        this.player.emit(EVENTS.volumechange, this.player.volume);\n    }\n\n    closeAudio() {\n        if (this.hasInitScriptNode) {\n            this.scriptNode && this.scriptNode.disconnect(this.gainNode);\n            this.gainNode && this.gainNode.disconnect(this.audioContext.destination);\n            this.gainNode && this.gainNode.disconnect(this.mediaStreamAudioDestinationNode);\n        }\n        this.clear();\n    }\n\n    // 是否播放。。。\n    audioEnabled(flag) {\n        if (flag) {\n            if (this.audioContext.state === 'suspended') {\n                // resume\n                this.audioContext.resume();\n            }\n        } else {\n            if (this.audioContext.state === 'running') {\n                // suspend\n                this.audioContext.suspend();\n            }\n        }\n    }\n\n    isStateRunning() {\n        return this.audioContext.state === 'running';\n    }\n\n    isStateSuspended() {\n        return this.audioContext.state === 'suspended';\n    }\n\n    clear() {\n        // 全部清空。\n        while (this.bufferList.length) {\n            this.bufferList.shift();\n        }\n    }\n\n    play(buffer, ts) {\n        this.bufferList.push(buffer);\n    }\n\n    pause() {\n        this.playing = false;\n        this.clear();\n    }\n\n    resume() {\n        this.playing = true;\n    }\n\n\n    destroy() {\n        this.closeAudio();\n        this.audioContext.close();\n        this.audioContext = null;\n        this.gainNode = null;\n        if (this.scriptNode) {\n            this.scriptNode.onaudioprocess = noop;\n            this.scriptNode = null;\n        }\n        this.audioBufferSourceNode = null;\n        this.mediaStreamAudioDestinationNode = null;\n        this.hasInitScriptNode = false;\n    }\n\n}\n","import AudioContextLoader from \"./audioContextLoader\";\nimport AudioLoader from \"./audioLoader\";\n\nexport default class Audio {\n    constructor(player) {\n        const Loader = Audio.getLoaderFactory();\n        return new Loader(player);\n    }\n\n    static getLoaderFactory() {\n        return AudioContextLoader;\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {EVENTS, EVENTS_ERROR} from \"../constant\";\nimport {calculationRate} from \"../utils\";\n\nexport default class FetchLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.playing = false;\n\n        this.abortController = new AbortController();\n\n        //\n        this.streamRate = calculationRate(rate => {\n            player.emit(EVENTS.streamRate, rate);\n        });\n        player.debug.log('FetchStream', 'init');\n    }\n\n\n    fetchStream(url) {\n        const {demux} = this.player;\n        fetch(url, {signal: this.abortController.signal}).then((res) => {\n            const reader = res.body.getReader();\n            this.emit(EVENTS.streamSuccess);\n            const fetchNext = () => {\n                reader.read().then(({done, value}) => {\n                        if (done) {\n                            demux.close();\n                        } else {\n                            this.streamRate(value.byteLength);\n                            this.playing = true;\n                            demux.dispatch(value);\n                            fetchNext();\n                        }\n                    }\n                ).catch((e) => {\n                    demux.close();\n                    this.playing = false;\n                    // 这边会报用户 aborted a request 错误。\n                    this.emit(EVENTS_ERROR.fetchError, e);\n                })\n            }\n            fetchNext();\n        }).catch((e) => {\n            this.emit(EVENTS_ERROR.fetchError, e)\n        })\n    }\n\n\n    destroy() {\n        if (this.abortController) {\n            this.abortController.abort();\n            this.abortController = null\n        }\n        this.streamRate = null;\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {EVENTS, EVENTS_ERROR, WEBSOCKET_STATUS} from \"../constant\";\nimport {calculationRate} from \"../utils\";\n\nexport default class WebsocketLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.socket = null;\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n        this.playing = false;\n        this.wsUrl = null;\n        //\n        this.streamRate = calculationRate(rate => {\n            player.emit(EVENTS.streamRate, rate);\n        });\n    }\n\n    _createWebSocket() {\n        const player = this.player;\n        const {\n            debug,\n            events: {proxy},\n            demux,\n        } = player;\n\n        this.socket = new WebSocket(this.wsUrl);\n        this.socket.binaryType = 'arraybuffer';\n        proxy(this.socket, 'open', () => {\n            this.emit(EVENTS.streamSuccess);\n            debug.log('websocketLoader', 'socket open');\n            this.socketStatus = WEBSOCKET_STATUS.open;\n        });\n\n        proxy(this.socket, 'message', event => {\n            const message = new Uint8Array(event.data);\n            this.streamRate(message.byteLength);\n            this._handleMessage(message);\n        });\n\n\n        proxy(this.socket, 'close', () => {\n            debug.log('websocketLoader', 'socket close');\n            this.emit(EVENTS.streamEnd);\n            this.socketStatus = WEBSOCKET_STATUS.close;\n        });\n\n        proxy(this.socket, 'error', error => {\n            debug.log('websocketLoader', 'socket error');\n            this.emit(EVENTS_ERROR.websocketError, error);\n            this.socketStatus = WEBSOCKET_STATUS.error;\n            demux.close();\n            debug.log('websocketLoader', `socket error:`, error);\n        });\n    }\n\n    //\n    _handleMessage(message) {\n        const {demux} = this.player;\n        demux.dispatch(message);\n    }\n\n\n    fetchStream(url) {\n        this.wsUrl = url;\n        this._createWebSocket();\n    }\n\n\n    destroy() {\n        if (this.socket) {\n            this.socket.close();\n            this.socket = null;\n        }\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n        this.playing = false;\n        this.off();\n        this.player.debug.log('websocketLoader', 'destroy');\n\n    }\n}\n","import FetchLoader from \"./fetchLoader\";\nimport WebsocketLoader from \"./websocketLoader\";\nimport {PLAYER_PLAY_PROTOCOL} from \"../constant\";\n\nexport default class Stream {\n    constructor(player) {\n        const Loader = Stream.getLoaderFactory(player._opt.protocol);\n        return new Loader(player);\n    }\n\n    static getLoaderFactory(protocol) {\n        if (protocol === PLAYER_PLAY_PROTOCOL.fetch) {\n            return FetchLoader;\n        } else if (protocol === PLAYER_PLAY_PROTOCOL.websocket) {\n            return WebsocketLoader;\n        }\n    }\n}\n","export default class RecordRTCLoader {\n    constructor(player) {\n        this.player = player;\n        this.recording = false;\n    }\n\n    setFileName() {\n\n    }\n\n    startRecord() {\n\n    }\n\n    stopRecordAndSave() {\n\n    }\n\n    destroy() {\n\n    }\n}\n","import RecordRTCLoader from \"./recordRTCLoader\";\n\nexport default class Recorder {\n    constructor(player) {\n        const Loader = Recorder.getLoaderFactory();\n        return new Loader(player);\n    }\n\n    static getLoaderFactory() {\n        return RecordRTCLoader;\n    }\n}\n","import {EVENTS, MEDIA_TYPE, WORKER_CMD_TYPE, WORKER_SEND_TYPE} from \"../constant\";\n\nexport default class DecoderWorker {\n    constructor(player) {\n        this.player = player;\n        this.decoderWorker = new Worker(player._opt.decoder)\n        const {\n            debug,\n            events: {proxy},\n        } = player;\n\n        this.decoderWorker.onmessage = (event) => {\n            const msg = event.data;\n            switch (msg.cmd) {\n                case WORKER_CMD_TYPE.init:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.init);\n                    this.player.emit(EVENTS.load);\n                    this.player.emit(EVENTS.decoderWorkerInit);\n                    this._initWork();\n                    break;\n                case WORKER_CMD_TYPE.videoCode:\n                    this.player.video.updateVideoInfo({\n                        encTypeCode: msg.code\n                    })\n                    break;\n                case WORKER_CMD_TYPE.audioCode:\n                    this.player.audio.updateAudioInfo({\n                        encTypeCode: msg.code\n                    })\n                    break;\n                case WORKER_CMD_TYPE.initVideo:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.initVideo, `width:${msg.w},height:${msg.h}`);\n                    this.player.video.updateVideoInfo({\n                        width: msg.w,\n                        height: msg.h\n                    })\n                    this.player.video.initCanvasViewSize();\n                    this.player.video.bindOffscreen();\n                    break;\n                case WORKER_CMD_TYPE.initAudio:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.initAudio, `channels:${msg.channels},sampleRate:${msg.sampleRate}`);\n                    this.player.audio.updateAudioInfo(msg);\n                    this.player.audio.initScriptNode(msg);\n                    break;\n                case WORKER_CMD_TYPE.render:\n                    // debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.render, `msg ts:${msg.ts}`);\n                    if (this.player.loading) {\n                        this.player.emit(EVENTS.frameStart);\n                        this.player.loading = false;\n                    }\n                    if (!this.player.playing) {\n                        this.player.playing = true;\n                    }\n                    this.player.video.render(msg);\n                    break;\n\n                case WORKER_CMD_TYPE.playAudio:\n                    // debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.playAudio, `msg ts:${msg.ts}`);\n                    // 只有在 playing 的时候。\n                    if (this.player.playing) {\n                        this.player.audio.play(msg.buffer, msg.ts);\n                    }\n                    break;\n                default:\n                    player[msg.cmd] && player[msg.cmd](msg);\n            }\n        }\n        player.debug.log('decoderWorker', 'init')\n    }\n\n    _initWork() {\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.init,\n            opt: JSON.stringify(this.player._opt),\n            sampleRate: this.player.audio.audioContext.sampleRate\n        })\n    }\n\n    decodeVideo(arrayBuffer, ts, isIFrame) {\n        const options = {\n            type: MEDIA_TYPE.video,\n            ts: Math.max(ts, 0),\n            isIFrame\n        }\n        // this.player.debug.log('decoderWorker', 'decodeVideo');\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.decode,\n            buffer: arrayBuffer,\n            options\n        }, [arrayBuffer.buffer])\n    }\n\n    //\n    decodeAudio(arrayBuffer, ts) {\n        const options = {\n            type: MEDIA_TYPE.audio,\n            ts: Math.max(ts, 0)\n        }\n        // this.player.debug.log('decoderWorker', 'decodeAudio');\n\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.decode,\n            buffer: arrayBuffer,\n            options\n        }, [arrayBuffer.buffer])\n    }\n\n    destroy() {\n        this.player.debug.log(`decoderWorker`, 'destroy');\n        this.decoderWorker.postMessage({cmd: WORKER_SEND_TYPE.close})\n        this.decoderWorker.terminate();\n        this.decoderWorker = null;\n        this.player = null;\n    }\n}\n","import {FLV_MEDIA_TYPE} from \"../constant\";\n\nexport default class FlvLoader {\n    constructor(player) {\n        this.player = player;\n        const input = this._inputFlv();\n        this.flvDemux = this.dispatchFlvData(input);\n        player.debug.log('FlvDemux', 'init')\n    }\n\n    dispatch(data) {\n        this.flvDemux(data);\n    }\n\n    * _inputFlv() {\n        yield 9;\n        const tmp = new ArrayBuffer(4)\n        const tmp8 = new Uint8Array(tmp)\n        const tmp32 = new Uint32Array(tmp)\n\n        const player = this.player;\n        const {decoderWorker, webcodecsDecoder} = player;\n\n        while (true) {\n            tmp8[3] = 0\n            const t = yield 15\n            const type = t[4]\n            tmp8[0] = t[7]\n            tmp8[1] = t[6]\n            tmp8[2] = t[5]\n            const length = tmp32[0]\n            tmp8[0] = t[10]\n            tmp8[1] = t[9]\n            tmp8[2] = t[8]\n            let ts = tmp32[0]\n            if (ts === 0xFFFFFF) {\n                tmp8[3] = t[11]\n                ts = tmp32[0]\n            }\n            const payload = yield length\n            switch (type) {\n                case FLV_MEDIA_TYPE.audio:\n                    if (player._opt.hasAudio) {\n                        decoderWorker.decodeAudio(payload, ts);\n                    }\n                    break\n                case FLV_MEDIA_TYPE.video:\n                    if (player._opt.hasVideo) {\n                        const isIframe = payload[0] >> 4 === 1;\n                        if (player._opt.useWCS) {\n                            webcodecsDecoder.decodeVideo(payload, ts, isIframe);\n                        } else {\n                            decoderWorker.decodeVideo(payload, ts, isIframe);\n                        }\n                    }\n                    break\n            }\n        }\n    }\n\n    dispatchFlvData(input) {\n        let need = input.next()\n        let buffer = null\n        return (value) => {\n            let data = new Uint8Array(value)\n            if (buffer) {\n                let combine = new Uint8Array(buffer.length + data.length)\n                combine.set(buffer)\n                combine.set(data, buffer.length)\n                data = combine\n                buffer = null\n            }\n            while (data.length >= need.value) {\n                let remain = data.slice(need.value)\n                need = input.next(data.slice(0, need.value))\n                data = remain\n            }\n            if (data.length > 0) {\n                buffer = data\n            }\n        }\n    }\n\n    close() {\n\n    }\n\n    destroy() {\n\n    }\n}\n","import {MEDIA_TYPE} from \"../constant\";\n\nexport default class M7sLoader {\n    constructor(player) {\n        this.player = player;\n        player.debug.log('M7sDemux', 'init')\n    }\n\n    dispatch(data) {\n        const player = this.player;\n        const {decoderWorker} = player;\n        const dv = new DataView(data)\n        const type = dv.getUint8(0);\n        const ts = dv.getUint32(1, false);\n        switch (type) {\n            case MEDIA_TYPE.audio:\n                if (player._opt.hasAudio) {\n                    const payload = new Uint8Array(data, 5)\n                    decoderWorker.decodeAudio(payload, ts)\n                }\n                break;\n            case MEDIA_TYPE.video:\n                if (player._opt.hasVideo) {\n                    if (dv.byteLength > 5) {\n                        const payload = new Uint8Array(data, 5);\n                        const isIframe = dv.getUint8(5) >> 4 === 1;\n                        decoderWorker.decodeVideo(payload, ts, isIframe)\n                    }\n                }\n                break;\n        }\n    }\n\n    close() {\n\n    }\n\n    destroy() {\n\n    }\n}\n","import FlvLoader from \"./flvLoader\";\nimport M7sLoader from \"./m7sLoader\";\nimport {DEMUX_TYPE} from \"../constant\";\n\nexport default class Demux {\n    constructor(player) {\n        const Loader = Demux.getLoaderFactory(player._opt.demuxType);\n        return new Loader(player);\n    }\n\n    static getLoaderFactory(type) {\n        if (type === DEMUX_TYPE.m7s) {\n            return M7sLoader;\n        } else if (type === DEMUX_TYPE.flv) {\n            return FlvLoader;\n        }\n    }\n}\n","import {formatVideoDecoderConfigure, noop} from \"../utils\";\nimport Emitter from \"../utils/emitter\";\nimport {EVENTS} from \"../constant\";\n\n\nexport default class WebcodecsDecoder extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.hasInit = false;\n        this.isInitInfo = false;\n        this.decoder = null;\n        this.initDecoder();\n    }\n\n    initDecoder() {\n        const _this = this;\n        this.decoder = new VideoDecoder({\n            output(videoFrame) {\n                _this.handleDecode(videoFrame)\n            },\n            error(error) {\n                _this.handleError(error)\n            }\n        })\n    }\n\n    handleDecode(videoFrame) {\n        if (!this.isInitInfo) {\n            this.player.video.updateVideoInfo({\n                width: videoFrame.codedWidth,\n                height: videoFrame.codedHeight\n            })\n            this.player.video.initCanvasViewSize();\n            this.isInitInfo = true;\n        }\n        this.player.video.render({\n            videoFrame\n        })\n        // release resource\n        setTimeout(function () {\n            if (videoFrame.close) {\n                videoFrame.close()\n            } else {\n                videoFrame.destroy()\n            }\n        }, 100)\n    }\n\n    handleError(error) {\n\n    }\n\n    decodeVideo(payload, ts, isIframe) {\n        if (!this.hasInit) {\n            if (isIframe && payload[1] === 0) {\n                const videoCodec = (payload[0] & 0x0F);\n                this.player.emit(EVENTS.videoInfo, {\n                    encTypeCode: videoCodec\n                })\n                const config = formatVideoDecoderConfigure(payload.slice(5));\n                this.decoder.configure(config);\n                this.hasInit = true;\n            }\n        } else {\n            const chunk = new EncodedVideoChunk({\n                data: payload.slice(5),\n                timestamp: ts,\n                type: isIframe ? 'key' : 'delta'\n            })\n            this.decoder.decode(chunk);\n        }\n    }\n\n\n    destroy() {\n        this.decoder.close();\n        this.decoder = null;\n\n    }\n}\n","const iconsMap = {\n    play: '播放',\n    pause: '暂停',\n    audio: '',\n    mute: '',\n    screenshot: '截图',\n    loading: '加载',\n    fullscreen: '全屏',\n    fullscreenExit: '退出全屏',\n    record: '录制',\n    recordStop: '停止录制',\n}\n\nexport default Object.keys(iconsMap).reduce((icons, key) => {\n    icons[key] = `\n    <i class=\"jessibuca-icon jessibuca-icon-${key}\"></i>\n    <span class=\"icon-title-tips\"><span class=\"icon-title\">${iconsMap[key]}</span></span>\n`;\n    return icons;\n}, {});\n","import icons from './icons';\n\nexport default (player, control) => {\n    player.$container.classList.add('jessibuca-controls-show');\n    const options = player._opt;\n\n\n    player.$container.insertAdjacentHTML(\n        'beforeend',\n        `\n            ${options.poster ? `<div class=\"jessibuca-poster\" style=\"background-image: url(${options.poster})\"></div>` : ''}\n            <div class=\"jessibuca-loading\">${icons.loading}</div>\n            <div class=\"jessibuca-controls\">\n                <div class=\"jessibuca-controls-bottom\">\n                    <div class=\"jessibuca-controls-left\">\n                        <div class=\"jessibuca-controls-item\"></div>\n                    </div>\n                    <div class=\"jessibuca-controls-right\">\n                         <div class=\"jessibuca-controls-item jessibuca-volume\">\n                         ${icons.audio}\n                         ${icons.mute}\n                         <div class=\"jessibuca-volume-panel-wrap\">\n                              <div class=\"jessibuca-volume-panel\">\n                                     <div class=\"jessibuca-volume-panel-handle\"></div>\n                              </div>\n                         </div>\n                         </div>\n                         <div class=\"jessibuca-controls-item jessibuca-screenshot\">${icons.screenshot}</div>\n                         <div class=\"jessibuca-controls-item jessibuca-record\">${icons.record}</div>\n                         <div class=\"jessibuca-controls-item jessibuca-record-stop\">${icons.recordStop}</div>\n                         <div class=\"jessibuca-controls-item jessibuca-fullscreen\">${icons.fullscreen}</div>\n                         <div class=\"jessibuca-controls-item jessibuca-fullscreen-exit\">${icons.fullscreenExit}</div>\n                    </div>\n                </div>\n            </div>\n        `\n    )\n\n    Object.defineProperty(control, '$poster', {\n        value: player.$container.querySelector('.jessibuca-poster'),\n    });\n\n    Object.defineProperty(control, '$loading', {\n        value: player.$container.querySelector('.jessibuca-loading'),\n    });\n\n    Object.defineProperty(control, '$controls', {\n        value: player.$container.querySelector('.jessibuca-controls'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: player.$container.querySelector('.jessibuca-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: player.$container.querySelector('.jessibuca-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$qualityText', {\n        value: player.$container.querySelector('.jessibuca-icon-text'),\n    });\n\n    Object.defineProperty(control, '$qualityMenu', {\n        value: player.$container.querySelector('.jessibuca-quality-menu'),\n    });\n\n    Object.defineProperty(control, '$qualityMenuList', {\n        value: player.$container.querySelector('.jessibuca-quality-menu-list'),\n    });\n\n    Object.defineProperty(control, '$qualityMenuItems', {\n        value: player.$container.querySelectorAll('.jessibuca-quality-menu-item'),\n    });\n\n\n    Object.defineProperty(control, '$volume', {\n        value: player.$container.querySelector('.jessibuca-volume'),\n    });\n\n    Object.defineProperty(control, '$volumePanelWrap', {\n        value: player.$container.querySelector('.jessibuca-volume-panel-wrap'),\n    });\n\n    Object.defineProperty(control, '$volumePanel', {\n        value: player.$container.querySelector('.jessibuca-volume-panel'),\n    });\n\n    Object.defineProperty(control, '$volumeHandle', {\n        value: player.$container.querySelector('.jessibuca-volume-panel-handle'),\n    });\n\n    Object.defineProperty(control, '$volumeOn', {\n        value: player.$container.querySelector('.jessibuca-icon-audio'),\n    });\n\n    Object.defineProperty(control, '$volumeOff', {\n        value: player.$container.querySelector('.jessibuca-icon-mute'),\n    });\n\n    Object.defineProperty(control, '$ptz', {\n        value: player.$container.querySelector('.jessibuca-ptz'),\n    });\n\n    Object.defineProperty(control, '$ptzActive', {\n        value: player.$container.querySelector('.jessibuca-ptz-active'),\n    });\n\n    Object.defineProperty(control, '$ptzControl', {\n        value: player.$container.querySelector('.jessibuca-ptz-controls'),\n    });\n\n    Object.defineProperty(control, '$ptzBgActive', {\n        value: player.$container.querySelector('.jessibuca-ptz-bg-active'),\n    });\n\n    Object.defineProperty(control, '$ptzControlCircular', {\n        value: player.$container.querySelector('.jessibuca-ptz-control'),\n    });\n\n    Object.defineProperty(control, '$ptzArrows', {\n        value: player.$container.querySelectorAll('.jessibuca-ptz-arrow'),\n    });\n\n    Object.defineProperty(control, '$microphoneOpen', {\n        value: player.$container.querySelector('.jessibuca-microphone-open'),\n    });\n\n    Object.defineProperty(control, '$microphoneClose', {\n        value: player.$container.querySelector('.jessibuca-microphone-close'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: player.$container.querySelector('.jessibuca-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$fullscreenExit', {\n        value: player.$container.querySelector('.jessibuca-fullscreen-exit'),\n    });\n\n    Object.defineProperty(control, '$record', {\n        value: player.$container.querySelector('.jessibuca-record'),\n    });\n    Object.defineProperty(control, '$recordStop', {\n        value: player.$container.querySelector('.jessibuca-record-stop'),\n    });\n\n    Object.defineProperty(control, '$screenshot', {\n        value: player.$container.querySelector('.jessibuca-screenshot'),\n    });\n\n\n\n}\n","import {EVENTS} from \"../constant\";\nimport {getStyle, setStyle} from \"../utils\";\nimport screenfull from \"screenfull\";\n\nexport default (player, control) => {\n    const {\n        events: {proxy},\n    } = player;\n\n    const object = document.createElement('object');\n    object.setAttribute('aria-hidden', 'true');\n    object.setAttribute('tabindex', -1);\n    object.type = 'text/html';\n    object.data = 'about:blank';\n\n    setStyle(object, {\n        display: 'block',\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        zIndex: '-1',\n    });\n\n    let playerWidth = player.width;\n    let playerHeight = player.height;\n\n    proxy(object, 'load', () => {\n        proxy(object.contentDocument.defaultView, 'resize', () => {\n            if (player.width !== playerWidth || player.height !== playerHeight) {\n                playerWidth = player.width;\n                playerHeight = player.height;\n                player.emit(EVENTS.resize);\n            }\n        });\n    });\n    player.$container.appendChild(object);\n\n    player.on(EVENTS.destroy, () => {\n        player.$container.removeChild(object);\n    })\n\n    function setVolumeHandle(percentage) {\n        if (percentage === 0) {\n            setStyle(control.$volumeOn, 'display', 'none');\n            setStyle(control.$volumeOff, 'display', 'flex');\n            setStyle(control.$volumeHandle, 'top', `${48}px`);\n        } else {\n            const panelHeight = getStyle(control.$volumePanel, 'height') || 60;\n            const handleHeight = getStyle(control.$volumeHandle, 'height');\n            const top = panelHeight - (panelHeight - handleHeight) * percentage - handleHeight;\n            setStyle(control.$volumeHandle, 'top', `${top}px`);\n            setStyle(control.$volumeOn, 'display', 'flex');\n            setStyle(control.$volumeOff, 'display', 'none');\n        }\n    }\n\n    player.on(EVENTS.volumechange, () => {\n        setVolumeHandle(player.volume);\n    });\n\n    player.on(EVENTS.loading, () => {\n        setStyle(control.$loading, 'display', player.loading ? 'flex' : 'none');\n    })\n\n    try {\n        const screenfullChange = () => {\n            setStyle(control.$fullscreenExit, 'display', player.fullscreen ? 'flex' : 'none');\n            setStyle(control.$fullscreen, 'display', player.fullscreen ? 'none' : 'flex');\n            // control.autoSize();\n        };\n        screenfull.on('change', screenfullChange);\n        player.events.destroys.push(() => {\n            screenfull.off('change', screenfullChange);\n        });\n    } catch (error) {\n        //\n    }\n\n    player.on(EVENTS.recording, () => {\n        setStyle(control.$record, 'display', player.recording ? 'none' : 'flex');\n        setStyle(control.$recordStop, 'display', player.recording ? 'flex' : 'none');\n    })\n\n    //\n    player.on(EVENTS.recordingTimestamp, (timestamp) => {\n        // console.log(timestamp);\n    })\n\n\n}\n","export default (player, control) => {\n\n    Object.defineProperty(control, 'controls', {\n        get: () => {\n            return player.$player.classList.contains('jessibuca-controls-show');\n        },\n        set: (type) => {\n            if (type) {\n                player.$player.classList.add('jessibuca-controls-show');\n            } else {\n                player.$player.classList.remove('jessibuca-controls-show');\n            }\n        },\n    });\n\n\n    Object.defineProperty(control, 'controlsRect', {\n        get: () => {\n            return control.$controls.getBoundingClientRect();\n        },\n    });\n\n\n}\n","export default (player, control) => {\n    const {\n        events: {proxy}\n    } = player;\n\n    function volumeChangeFromEvent(event) {\n        const {bottom: panelBottom, height: panelHeight} = control.$volumePanel.getBoundingClientRect();\n        const {height: handleHeight} = control.$volumeHandle.getBoundingClientRect();\n        const percentage =\n            clamp(panelBottom - event.y - handleHeight / 2, 0, panelHeight - handleHeight / 2) / (panelHeight - handleHeight);\n        return percentage;\n    }\n\n    //\n    proxy(window, ['click', 'contextmenu'], event => {\n        if (event.composedPath().indexOf(player.$container) > -1) {\n            control.isFocus = true;\n        } else {\n            control.isFocus = false;\n        }\n    });\n\n    //\n    proxy(window, 'orientationchange', () => {\n        setTimeout(() => {\n            player.resize();\n        }, 300);\n    });\n\n\n    proxy(control.$controls, 'click', (e) => {\n        e.stopPropagation();\n    })\n\n    control.$ptzArrows.forEach(($ptzArrow) => {\n        proxy($ptzArrow, 'click', (e) => {\n            e.stopPropagation();\n            const target = e.currentTarget;\n            const dataset = target.dataset;\n            const arrow = dataset.arrow;\n            control.$ptzBgActive.classList.add('webmediaplayer-ptz-bg-active-show');\n            control.$ptzBgActive.classList.add(`webmediaplayer-ptz-bg-active-${arrow}`);\n            control.$ptzControlCircular.classList.add(`webmediaplayer-ptz-control-${arrow}`);\n            player.ptzControl.ptzCmd(arrow);\n            setTimeout(() => {\n                control.$ptzBgActive.classList.remove('webmediaplayer-ptz-bg-active-show');\n                PTZ_ARROW.forEach((arrow) => {\n                    control.$ptzBgActive.classList.remove(`webmediaplayer-ptz-bg-active-${arrow}`);\n                    control.$ptzControlCircular.classList.remove(`webmediaplayer-ptz-control-${arrow}`);\n                })\n                // player.ptzControl.ptzCmd(PTZ_OBJ.stop);\n            }, 300);\n        })\n    })\n\n\n    proxy(control.$qualityMenu, 'mouseover', () => {\n        control.$qualityMenuList.classList.add('webmediaplayer-quality-menu-shown');\n    })\n\n    proxy(control.$qualityMenu, 'mouseout', () => {\n        control.$qualityMenuList.classList.remove('webmediaplayer-quality-menu-shown');\n    })\n\n    proxy(control.$volume, 'mouseover', () => {\n        control.$volumePanelWrap.classList.add('webmediaplayer-volume-panel-wrap-show');\n    })\n\n    proxy(control.$volume, 'mouseout', () => {\n        control.$volumePanelWrap.classList.remove('webmediaplayer-volume-panel-wrap-show');\n    })\n\n    control.$qualityMenuItems.forEach(($qualityMenuItem) => {\n        proxy($qualityMenuItem, 'click', (e) => {\n            e.stopPropagation();\n            control.$qualityMenuItems.forEach(($item) => {\n                $item.classList.remove('webmediaplayer-quality-menu-item-active');\n            })\n            const target = e.currentTarget;\n            const dataset = target.dataset;\n            player.streamId = '' + dataset.quality;\n        })\n    })\n\n    proxy(control.$volumeOn, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$volumeOn, 'display', 'none');\n        setStyle(control.$volumeOff, 'display', 'block');\n        player.lastVolume = player.volume;\n        player.volume = 0;\n    })\n\n    proxy(control.$volumeOff, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$volumeOn, 'display', 'block');\n        setStyle(control.$volumeOff, 'display', 'none');\n        player.volume = player.lastVolume || 0.5;\n    })\n\n    proxy(control.$screenshot, 'click', (e) => {\n        e.stopPropagation();\n        player.video.screenshot();\n    })\n\n    proxy(control.$volumePanel, 'click', event => {\n        event.stopPropagation();\n        player.volume = volumeChangeFromEvent(event);\n    });\n\n    proxy(control.$volumeHandle, 'mousedown', () => {\n        control.isVolumeDroging = true;\n    });\n\n    proxy(control.$volumeHandle, 'mousemove', event => {\n        if (control.isVolumeDroging) {\n            player.volume = volumeChangeFromEvent(event);\n        }\n    });\n\n    proxy(document, 'mouseup', () => {\n        if (control.isVolumeDroging) {\n            control.isVolumeDroging = false;\n        }\n    });\n\n    proxy(control.$record, 'click', (e) => {\n        e.stopPropagation();\n        player.recording = true;\n    })\n\n    proxy(control.$recordStop, 'click', (e) => {\n        e.stopPropagation();\n        player.recording = false;\n    })\n\n    proxy(control.$ptz, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$ptzActive, 'display', 'flex');\n        setStyle(control.$ptz, 'display', 'none');\n        control.$ptzControl.classList.add('webmediaplayer-ptz-controls-show');\n    })\n\n    proxy(control.$ptzActive, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$ptz, 'display', 'flex');\n        setStyle(control.$ptzActive, 'display', 'none');\n        control.$ptzControl.classList.remove('webmediaplayer-ptz-controls-show');\n    })\n\n    proxy(control.$microphoneOpen, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$microphoneClose, 'display', 'flex');\n        setStyle(control.$microphoneOpen, 'display', 'none');\n    })\n\n    proxy(control.$microphoneClose, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$microphoneOpen, 'display', 'flex');\n        setStyle(control.$microphoneClose, 'display', 'none');\n    })\n\n    proxy(control.$fullscreen, 'click', (e) => {\n        e.stopPropagation();\n        player.fullscreen = true;\n    })\n\n    proxy(control.$fullscreenExit, 'click', (e) => {\n        e.stopPropagation();\n        player.fullscreen = false;\n    })\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import template from \"./template\";\nimport observer from './observer';\nimport property from './property';\nimport events from './events';\nimport './style.scss'\n\nexport default class Control {\n    constructor(player) {\n        this.player = player;\n        template(player, this);\n        observer(player, this);\n        property(player, this);\n        events(player, this);\n        this.player.debug.log('Control', 'init');\n    }\n\n    autoSize() {\n        const player = this.player;\n        player.$container.style.padding = '0 0';\n        const playerWidth = player.width;\n        const playerHeight = player.height;\n        const playerRatio = playerWidth / playerHeight;\n        const canvasWidth = player.audio.$videoElement.width;\n        const canvasHeight = player.audio.$videoElement.height;\n        const canvasRatio = canvasWidth / canvasHeight;\n        if (playerRatio > canvasRatio) {\n            const padding = (playerWidth - playerHeight * canvasRatio) / 2;\n            player.$container.style.padding = `0 ${padding}px`;\n        } else {\n            const padding = (playerHeight - playerWidth / canvasRatio) / 2;\n            player.$container.style.padding = `${padding}px 0`;\n        }\n    }\n\n    destroy() {\n        this.player.debug.log('control', 'destroy');\n        if (this.$poster) {\n            this.player.$container.removeChild(this.$poster);\n        }\n        this.player.$container.removeChild(this.$loading);\n        this.player.$container.removeChild(this.$ptzControl);\n        this.player.$container.removeChild(this.$controls);\n        this.player = null;\n    }\n}\n","import {DEFAULT_PLAYER_OPTIONS, EVENTS, EVENTS_ERROR} from \"../constant\";\nimport Debug from \"../utils/debug\";\nimport Events from \"../utils/events\";\nimport property from './property';\nimport events from './events';\nimport {isFullScreen, supportOffscreenV2, supportWCS} from \"../utils\";\nimport Video from \"../video\";\nimport Audio from \"../audio\";\nimport Stream from \"../stream\";\nimport Recorder from \"../recorder\";\nimport DecoderWorker from \"../worker/index\";\nimport Emitter from \"../utils/emitter\";\nimport Demux from \"../demux\";\nimport WebcodecsDecoder from \"../decoder/webcodecs\";\nimport Control from \"../control\";\nimport './style.scss'\n\nexport default class Player extends Emitter {\n    constructor(container, options) {\n        super()\n        this.$container = container;\n        this._opt = Object.assign({}, DEFAULT_PLAYER_OPTIONS, options)\n\n\n        if (this._opt.useWCS) {\n            this._opt.useWCS = supportWCS();\n        }\n\n        if (!this._opt.forceNoOffscreen) {\n            if (!supportOffscreenV2()) {\n                this._opt.forceNoOffscreen = true;\n                this._opt.useOffscreen = false;\n            } else {\n                this._opt.useOffscreen = true;\n            }\n        }\n\n\n        this._opt.hasControl = this._hasControl();\n\n        property(this);\n        events(this);\n        this._loading = true;\n        this._hasLoaded = false;\n\n        this.debug = new Debug(this);\n        this.events = new Events(this);\n        this.video = new Video(this);\n        this.audio = new Audio(this);\n        this.recorder = new Recorder(this);\n        this.decoderWorker = new DecoderWorker(this);\n\n        this.stream = null;\n        this.demux = null;\n\n        if (this._opt.useWCS) {\n            this.webcodecsDecoder = new WebcodecsDecoder(this)\n        }\n\n        //\n        if (this._opt.hasControl) {\n            this.control = new Control(this);\n        }\n\n        this.debug.log('options', this._opt);\n    }\n\n\n    set fullscreen(value) {\n        this.emit(EVENTS.fullscreen, value);\n    }\n\n    get fullscreen() {\n        return isFullScreen() || this.webFullscreen;\n    }\n\n    set webFullscreen(value) {\n        this.emit(EVENTS.webFullscreen, value);\n    }\n\n    get webFullscreen() {\n        return this.$container.classList.contains('jessibuca-fullscreen-web')\n    }\n\n    get loaded() {\n        return this._hasLoaded;\n    }\n\n    //\n    set playing(value) {\n        if (this.playing !== value) {\n            this.emit(EVENTS.playing, value);\n            this.emit(EVENTS.volumechange, this.volume);\n        }\n    }\n\n    get playing() {\n        return this.stream.playing;\n    }\n\n    get volume() {\n        return this.audio.volume;\n    }\n\n    set loading(value) {\n        this._loading = value;\n        this.emit(EVENTS.loading);\n    }\n\n    get loading() {\n        return this._loading;\n    }\n\n    set recording(value) {\n        if (value) {\n            this.recorder.startRecord();\n        } else {\n            this.recorder.stopRecordAndSave();\n        }\n    }\n\n    get recording() {\n        return this.recorder.recording;\n    }\n\n    startRecord(fileName) {\n        this.recorder.setFileName(fileName);\n        //\n        this.recording = true;\n    }\n\n    stopRecordAndSave() {\n        this.recording = false;\n    }\n\n\n    /**\n     *\n     * @param options\n     */\n    updateOption(options) {\n        this._opt = Object.assign({}, this._opt, options)\n    }\n\n    //\n    init() {\n        return new Promise((resolve, reject) => {\n            if (!this.stream) {\n                this.stream = new Stream(this);\n            }\n\n            if (!this.demux) {\n                this.demux = new Demux(this);\n            }\n\n            if (!this.decoderWorker) {\n                this.decoderWorker = new DecoderWorker(this);\n\n                this.once(EVENTS.decoderWorkerInit, () => {\n                    resolve()\n                })\n            } else {\n                resolve()\n            }\n\n        })\n    }\n\n\n    play(url) {\n        return new Promise((resolve, reject) => {\n\n            this.init().then(() => {\n                this.stream.fetchStream(url);\n                //\n                this.stream.once(EVENTS_ERROR.fetchError, (error) => {\n                    reject(error)\n                })\n                //\n                this.stream.once(EVENTS.streamSuccess, () => {\n                    resolve();\n                })\n            }).catch((e) => {\n                reject(e)\n            })\n        })\n    }\n\n    //\n    close() {\n        //\n        if (this.stream) {\n            this.stream.destroy();\n            this.stream = null;\n        }\n\n        if (this.demux) {\n            this.demux.destroy();\n            this.demux = null;\n        }\n\n        //\n        if (this.decoderWorker) {\n            this.decoderWorker.destroy();\n            this.decoderWorker = null;\n        }\n\n        if (this.webcodecsDecoder) {\n            this.webcodecsDecoder.destroy();\n            this.webcodecsDecoder = null;\n        }\n    }\n\n    pause() {\n        return new Promise((resolve, reject) => {\n            this.close();\n            //\n            this.playing = false;\n            this.audio.pause();\n        })\n    }\n\n    // 恢复播放\n    resume() {\n\n    }\n\n\n    _hasControl() {\n        let result = false;\n\n        let hasBtnShow = false;\n        Object.keys(this._opt.operateBtns).forEach((key) => {\n            if (this._opt.operateBtns[key]) {\n                hasBtnShow = true;\n            }\n        });\n\n        if (this._opt.showBandwidth || this._opt.text || hasBtnShow) {\n            result = true;\n        }\n\n        return result;\n    }\n\n    destroy() {\n        if (this.events) {\n            this.events.destroy();\n            this.events = null;\n        }\n        if (this.decoderWorker) {\n            this.decoderWorker.destroy();\n            this.decoderWorker = null;\n        }\n        if (this.video) {\n            this.video.destroy();\n            this.video = null;\n        }\n        if (this.audio) {\n            this.audio.destroy();\n            this.audio = null;\n        }\n\n        if (this.stream) {\n            this.stream.destroy();\n            this.stream = null;\n        }\n\n        if (this.recorder) {\n            this.recorder.destroy();\n            this.recorder = null;\n        }\n\n        if (this.control) {\n            this.control.destroy();\n            this.control = null;\n        }\n\n        // 其他没法解耦的，通过 destroy 方式\n        this.emit('destroy');\n        // 接触所有绑定事件\n        this.off();\n\n        this.debug.log('play', 'destroy end');\n    }\n\n}\n","import Player from './player';\nimport Events from \"./utils/events\";\nimport {DEMUX_TYPE, EVENTS, JESSIBUCA_EVENTS, PLAYER_PLAY_PROTOCOL, SCALE_MODE_TYPE} from \"./constant\";\nimport {supportWCS} from \"./utils\";\nimport Emitter from \"./utils/emitter\";\n\n\nclass Jessibuca extends Emitter {\n    constructor(options) {\n        super()\n        let _opt = options;\n        let $container = options.container;\n        if (typeof options.container === 'string') {\n            $container = document.querySelector(options.container);\n        }\n        if (!$container) {\n            throw new Error('Jessibuca need container option');\n            return;\n        }\n\n        $container.classList.add('jessibuca-container');\n\n        delete _opt.container;\n\n        this._opt = _opt;\n        this.$container = $container;\n        this.href = null;\n        this.events = new Events(this);\n        this.player = new Player($container, _opt);\n        this._bindEvents();\n    }\n\n    _bindEvents() {\n        // 对外的事件\n        Object.keys(JESSIBUCA_EVENTS).forEach((key) => {\n            this.player.on(EVENTS[key], (value) => {\n                this.emit(key, value)\n            })\n        })\n    }\n\n    /**\n     * 是否开启控制台调试打印\n     * @param value {Boolean}\n     */\n    setDebug(value) {\n        this.player.updateOption({\n            isDebug: !!value\n        })\n    }\n\n    /**\n     *\n     */\n    mute() {\n        this.player.audio.mute(true);\n    }\n\n    /**\n     *\n     */\n    cancelMute() {\n        this.player.audio.mute(false);\n    }\n\n    /**\n     *\n     * @param value {number}\n     */\n    setVolume(value) {\n        this.player.audio.setValue(value);\n    }\n\n    /**\n     *\n     */\n    audioResume() {\n        this.player.audio.audioEnabled(true);\n\n    }\n\n    /**\n     * 设置超时时长, 单位秒 在连接成功之前和播放中途,如果超过设定时长无数据返回,则回调timeout事件\n     * @param value {number}\n     */\n    setTimeout(time) {\n        this.player.updateOption({\n            timeout: Number(time)\n        })\n    }\n\n    /**\n     *\n     * @param type {number}: 0,1,2\n     */\n    setScaleMode(type) {\n        type = Number(type);\n        let options = {\n            isFullResize: false,\n            isResize: false\n        }\n        switch (type) {\n            case SCALE_MODE_TYPE.full:\n                options.isFullResize = false;\n                options.isResize = false;\n                break;\n            case SCALE_MODE_TYPE.auto:\n                options.isFullResize = false;\n                options.isResize = true;\n                break;\n            case SCALE_MODE_TYPE.fullAuto:\n                options.isFullResize = true;\n                options.isResize = true;\n                break;\n        }\n\n        this.player.updateOption(options);\n        this.player.video.resize();\n    }\n\n    /**\n     *\n     */\n    pause() {\n        this.player.pause();\n    }\n\n    /**\n     *\n     */\n    close() {\n        this.player.close();\n    }\n\n\n    /**\n     *\n     */\n    clearView() {\n        this.player.video.clearView()\n    }\n\n    /**\n     *\n     * @param url {string}\n     * @returns {Promise<unknown>}\n     */\n    play(url) {\n        return new Promise((resolve, reject) => {\n            if (!url && !this._opt.url) {\n                reject();\n                return;\n            }\n\n            if (url) {\n                // url 相等的时候。\n                if (this._opt.url && (url === this._opt.url)) {\n                    resolve();\n                    return;\n                } else {\n                    this._opt.url = url;\n                    //  新的url\n                    const isHttp = url.indexOf(\"http\") === 0;\n                    //\n                    const protocol = isHttp ? PLAYER_PLAY_PROTOCOL.fetch : PLAYER_PLAY_PROTOCOL.websocket\n                    //\n                    const demuxType = (isHttp || url.indexOf(\".flv\") !== -1 || this._opt.isFlv) ? DEMUX_TYPE.flv : DEMUX_TYPE.m7s;\n\n                    this.player.updateOption({\n                        protocol,\n                        demuxType\n                    })\n\n                    if (this.hasLoaded()) {\n                        this.player.play(url).then(() => {\n                            resolve();\n                        }).catch(() => {\n                            this.player.close();\n                            reject();\n                        })\n                    } else {\n                        this.player.once(EVENTS.load, () => {\n                            this.player.play(url).then(() => {\n                                resolve();\n                            }).catch(() => {\n                                this.player.close();\n                                reject();\n                            })\n                        })\n                    }\n                }\n            } else {\n                //  url 不存在的时候\n                //  就是从 play-> pause -> play\n                this.player.resume();\n            }\n        })\n    }\n\n    resize() {\n        this.player.video.resize();\n    }\n\n    /**\n     *\n     * @param time {number}\n     */\n    setBufferTime(time) {\n        time = Number(time)\n        if (this.player) {\n\n        } else {\n            this._opt.videoBuffer = time\n        }\n    }\n\n    /**\n     *\n     * @param deg {number}\n     */\n    setRotate(deg) {\n        deg = parseInt(deg, 10)\n        const list = [0, 90, 270];\n        if (this._opt.rotate === deg || list.indexOf(deg) === -1) {\n            return;\n        }\n        this.player.updateOption({\n            rotate: deg\n        })\n        this.resize();\n    }\n\n    hasLoaded() {\n        return this.player.loaded;\n    }\n\n    setKeepScreenOn() {\n        this.player.updateOption({\n            keepScreenOn: true\n        })\n    }\n\n    useWCS() {\n        this._opt.useWCS = supportWCS();\n    }\n\n    /**\n     *\n     * @param flag {Boolean}\n     */\n    setFullscreen(flag) {\n        const fullscreen = !!flag;\n        if (this.player.fullscreen !== fullscreen) {\n            this.player.fullscreen = fullscreen;\n        }\n    }\n\n    /**\n     *\n     * @param filename {string}\n     * @param format {string}\n     * @param quality {number}\n     * @param type {string} download,base64,blob\n     */\n    screenshot(filename, format, quality, type) {\n        return this.player.video.screenshot(filename, format, quality, type)\n    }\n\n    /**\n     *\n     * @returns {Boolean}\n     */\n    isPlaying() {\n        return this.player.playing;\n    }\n\n    /**\n     * 是否静音状态\n     * @returns {Boolean}\n     */\n    isMute() {\n        return this.player.audio.isMute();\n    }\n\n    /**\n     *\n     */\n    destroy() {\n        this.player.destroy();\n        this.player = null;\n    }\n}\n\n\nwindow.Jessibuca = Jessibuca;\n\nexport default Jessibuca;\n"],"names":["PLAYER_PLAY_PROTOCOL","websocket","fetch","DEMUX_TYPE","flv","m7s","DEFAULT_PLAYER_OPTIONS","videoBuffer","vod","isResize","isFullResize","isFlv","debug","timeout","supportDblclickFullscreen","showBandwidth","keepScreenOn","isNotMute","hasAudio","hasVideo","operateBtns","fullscreen","screenshot","play","audio","recorder","hasControl","loadingText","background","decoder","url","rotate","text","forceNoOffscreen","hiddenAutoPause","protocol","demuxType","useWCS","useEMS","useOffscreen","WORKER_CMD_TYPE","init","initVideo","render","playAudio","print","printErr","initAudio","kBps","decode","audioCode","videoCode","MEDIA_TYPE","video","FLV_MEDIA_TYPE","WORKER_SEND_TYPE","audioDecode","videoDecode","close","EVENTS","webFullscreen","decoderWorkerInit","playing","pause","mute","load","loading","videoInfo","timeUpdate","audioInfo","log","error","stats","performance","record","recording","recordingTimestamp","buffer","videoFrame","start","metadata","resize","streamRate","streamEnd","streamSuccess","streamMessage","streamError","volumechange","frameStart","JESSIBUCA_EVENTS","EVENTS_ERROR","fetchError","websocketError","websocketCloseSuccess","websocketClosedByError","WEBSOCKET_STATUS","notConnect","open","SCREENSHOT_TYPE","download","base64","blob","VIDEO_ENC_TYPE","AUDIO_ENC_TYPE","CONTROL_HEIGHT","SCALE_MODE_TYPE","full","auto","fullAuto","Debug","constructor","master","name","args","_opt","console","warn","Events","destroys","proxy","bind","target","callback","option","Array","isArray","map","item","addEventListener","destroy","removeEventListener","push","forEach","event","player","Object","defineProperty","get","$container","getBoundingClientRect","key","rect","on","_hasLoaded","value","screenfull","request","then","catch","e","exit","$borderSelect","style","display","classList","add","clientHeight","bodyHeight","clientWidth","bodyWidth","document","body","playerHeight","playerWidth","$videoElement","bodyRatio","playerRatio","needSpin","scale","Math","min","transform","remove","keys","noop","supportOffscreen","$canvas","transferControlToOffscreen","supportOffscreenV2","OffscreenCanvas","createContextGL","gl","validContextNames","nameIndex","length","contextName","contextOptions","preserveDrawingBuffer","getContext","getParameter","dataURLToFile","dataURL","arr","split","bstr","atob","type","replace","n","u8arr","Uint8Array","charCodeAt","File","downloadImg","content","fileName","aLink","createElement","href","URL","createObjectURL","click","revokeObjectURL","now","Date","getTime","WebAssembly","instantiate","module","Module","of","Instance","clamp","num","a","b","max","setStyle","element","getStyle","numberType","getComputedStyle","getPropertyValue","parseFloat","getNowTime","calculationRate","totalSize","lastTime","size","thisTime","diffTime","supportWCS","window","formatVideoDecoderConfigure","avcC","codecArray","subarray","codecString","j","h","toString","codec","description","isFullScreen","mozIsFullScreen","webkitIsFullScreen","Emitter","fn","ctx","once","self","listener","off","apply","_","emit","data","evtArr","slice","i","evts","liveEvents","len","vertexShaderScript","join","fragmentShaderScript","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","_initTexture","index","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","uniform1i","getUniformLocation","yTextureRef","uTextureRef","vTextureRef","w","y","u","v","viewport","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","deleteProgram","deleteBuffer","deleteTexture","CanvasVideoLoader","$canvasElement","position","top","left","appendChild","contextGl","contextGlRender","contextGlDestroy","bitmaprenderer","width","height","encType","encTypeCode","updateVideoInfo","_initContextGl","webgl","createWebGL","initCanvasViewSize","_supportOffscreen","bindOffscreen","msg","transferFromImageBitmap","drawImage","output","filename","format","quality","formatType","png","jpeg","webp","encoderOptions","undefined","Number","toDataURL","file","clearView","clear","COLOR_BUFFER_BIT","resizeWidth","resizeHeight","wScale","hScale","removeChild","Video","Loader","getLoaderFactory","AudioContextLoader","bufferList","scriptNode","hasInitScriptNode","audioContextChannel","audioContext","AudioContext","webkitAudioContext","gainNode","createGain","source","createBufferSource","connect","destination","noteOn","audioBufferSourceNode","mediaStreamAudioDestinationNode","createMediaStreamDestination","audioEnabled","gain","channels","sampleRate","updateAudioInfo","isPlaying","isMute","isStateSuspended","volume","bufferSize","initScriptNode","createScriptProcessor","onaudioprocess","audioProcessingEvent","outputBuffer","shift","channel","nowBuffering","getChannelData","flag","setVolume","toFixed","isNaN","setValueAtTime","currentTime","closeAudio","disconnect","state","resume","suspend","isStateRunning","ts","Audio","FetchLoader","abortController","AbortController","rate","fetchStream","demux","signal","res","reader","getReader","fetchNext","read","done","byteLength","dispatch","abort","WebsocketLoader","socket","socketStatus","wsUrl","_createWebSocket","events","WebSocket","binaryType","message","_handleMessage","Stream","RecordRTCLoader","setFileName","startRecord","stopRecordAndSave","Recorder","DecoderWorker","decoderWorker","Worker","onmessage","cmd","_initWork","code","postMessage","opt","JSON","stringify","decodeVideo","arrayBuffer","isIFrame","options","decodeAudio","terminate","FlvLoader","input","_inputFlv","flvDemux","dispatchFlvData","tmp","ArrayBuffer","tmp8","tmp32","Uint32Array","webcodecsDecoder","t","payload","isIframe","need","next","combine","set","remain","M7sLoader","dv","DataView","getUint8","getUint32","Demux","WebcodecsDecoder","hasInit","isInitInfo","initDecoder","_this","VideoDecoder","handleDecode","handleError","codedWidth","codedHeight","setTimeout","videoCodec","config","configure","chunk","EncodedVideoChunk","timestamp","iconsMap","fullscreenExit","recordStop","reduce","icons","control","insertAdjacentHTML","poster","querySelector","querySelectorAll","object","setAttribute","overflow","pointerEvents","zIndex","contentDocument","defaultView","setVolumeHandle","percentage","$volumeOn","$volumeOff","$volumeHandle","panelHeight","$volumePanel","handleHeight","$loading","screenfullChange","$fullscreenExit","$fullscreen","$record","$recordStop","$player","contains","$controls","volumeChangeFromEvent","bottom","panelBottom","composedPath","indexOf","isFocus","stopPropagation","$ptzArrows","$ptzArrow","currentTarget","dataset","arrow","$ptzBgActive","$ptzControlCircular","ptzControl","ptzCmd","PTZ_ARROW","$qualityMenu","$qualityMenuList","$volume","$volumePanelWrap","$qualityMenuItems","$qualityMenuItem","$item","streamId","lastVolume","$screenshot","isVolumeDroging","$ptz","$ptzActive","$ptzControl","$microphoneOpen","$microphoneClose","Control","template","observer","property","autoSize","padding","canvasWidth","canvasHeight","canvasRatio","$poster","Player","container","assign","_hasControl","_loading","stream","loaded","updateOption","Promise","resolve","reject","result","hasBtnShow","Jessibuca","Error","_bindEvents","setDebug","isDebug","cancelMute","setValue","audioResume","time","setScaleMode","isHttp","hasLoaded","setBufferTime","setRotate","deg","parseInt","list","setKeepScreenOn","setFullscreen"],"mappings":"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"}