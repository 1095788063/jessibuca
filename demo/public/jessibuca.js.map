{"version":3,"file":"jessibuca.js","sources":["../../src/constant/index.js","../../src/utils/debug.js","../../src/utils/events.js","../../src/player/property.js","../../node_modules/screenfull/dist/screenfull.js","../../src/utils/index.js","../../src/player/events.js","../../src/utils/emitter.js","../../src/utils/webgl.js","../../src/video/commonLoader.js","../../src/video/canvasLoader.js","../../src/video/videoLoader.js","../../src/video/index.js","../../src/audio/audioContextLoader.js","../../src/audio/index.js","../../src/stream/fetchLoader.js","../../src/stream/websocketLoader.js","../../src/stream/index.js","../../src/recorder/recordRTCLoader.js","../../src/recorder/index.js","../../src/worker/index.js","../../src/demux/commonLoader.js","../../src/demux/flvLoader.js","../../src/demux/m7sLoader.js","../../src/demux/index.js","../../src/decoder/webcodecs.js","../../src/control/icons.js","../../src/control/template.js","../../src/control/observer.js","../../src/control/property.js","../../src/control/events.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/control/index.js","../../src/player/observer.js","../../src/remux/fmp4-generator.js","../../src/utils/exp-golomb.js","../../src/utils/h264-sps-parser.js","../../src/utils/h264.js","../../src/utils/h265-sps-parser.js","../../src/utils/h265.js","../../src/decoder/mediaSource.js","../../src/utils/noSleep.js","../../src/player/index.js","../../src/jessibuca.js"],"sourcesContent":["// 播放协议\nexport const PLAYER_PLAY_PROTOCOL = {\n    websocket: 0,\n    fetch: 1\n}\n\nexport const DEMUX_TYPE = {\n    flv: 'flv',\n    m7s: 'm7s'\n}\n\n\n// default player options\nexport const DEFAULT_PLAYER_OPTIONS = {\n    videoBuffer: 1000, //1000ms == 1 second\n    isResize: true,\n    isFullResize: false,\n    isFlv: false,\n    debug: false,\n    timeout: 10, // second\n    supportDblclickFullscreen: false,\n    showBandwidth: false, //\n    keepScreenOn: false,\n    isNotMute: false,\n    hasAudio: true,\n    hasVideo: true,\n    operateBtns: {\n        fullscreen: false,\n        screenshot: false,\n        play: false,\n        audio: false,\n        record: false\n    },\n    hasControl: false,\n    loadingText: '',\n    background: '',\n    decoder: 'decoder.js',\n    url: '',//\n    rotate: 0,\n    // text: '',\n    forceNoOffscreen: true, // 默认是不采用\n    hiddenAutoPause: false,\n    protocol: PLAYER_PLAY_PROTOCOL.fetch,\n    demuxType: DEMUX_TYPE.flv, //\n    useWCS: false, //\n    useMSE: false, //\n    useOffscreen: false //\n}\n\n\nexport const WORKER_CMD_TYPE = {\n    init: 'init',\n    initVideo: 'initVideo',\n    render: 'render',\n    playAudio: 'playAudio',\n    print: 'print',\n    printErr: 'printErr',\n    initAudio: 'initAudio',\n    kBps: 'kBps',\n    decode: 'decode',\n    audioCode: 'audioCode',\n    videoCode: 'videoCode'\n}\n\nexport const MEDIA_TYPE = {\n    audio: 1,\n    video: 2\n}\n\nexport const FLV_MEDIA_TYPE = {\n    audio: 8,\n    video: 9\n}\n\nexport const WORKER_SEND_TYPE = {\n    init: 'init',\n    decode: 'decode',\n    audioDecode: 'audioDecode',\n    videoDecode: 'videoDecode',\n    close: 'close'\n}\n\n\n//\nexport const EVENTS = {\n    fullscreen: 'fullscreen$2',\n    webFullscreen: 'webFullscreen',\n    decoderWorkerInit: 'decoderWorkerInit',\n    play: 'play',\n    playing: 'playing',\n    pause: 'pause',\n    mute: 'mute',\n    load: 'load',\n    loading: 'loading',\n    videoInfo: 'videoInfo',\n    timeUpdate: 'timeUpdate',\n    audioInfo: \"audioInfo\",\n    log: 'log',\n    error: \"error\",\n    kBps: 'kBps',\n    timeout: 'timeout',\n    stats: 'stats',\n    performance: \"performance\",\n    record: 'record',\n    recording: 'recording',\n    recordingTimestamp: 'recordingTimestamp',\n    recordCreateError: 'recordCreateError',\n    buffer: 'buffer',\n    videoFrame: 'videoFrame',\n    start: 'start',\n    metadata: 'metadata',\n    resize: 'resize',\n    streamEnd: 'streamEnd',\n    streamSuccess: 'streamSuccess',\n    streamMessage: 'streamMessage',\n    streamError: 'streamError',\n    volumechange: 'volumechange',\n    destroy: 'destroy',\n    mseSourceOpen: 'mseSourceOpen',\n    mseSourceClose: 'mseSourceClose',\n    mseSourceBufferError: 'mseSourceBufferError',\n    mseSourceBufferBusy: 'mseSourceBufferBusy',\n    videoWaiting: 'videoWaiting',\n    videoTimeUpdate: 'videoTimeUpdate'\n}\n\n\nexport const JESSIBUCA_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    videoInfo: EVENTS.videoInfo,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    log: EVENTS.log,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    fullscreen: 'fullscreen',\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    performance: EVENTS.performance,\n    recordingTimestamp: EVENTS.recordingTimestamp\n}\n\nexport const EVENTS_ERROR = {\n    fetchError: \"fetchError\",\n    websocketError: 'websocketError',\n    websocketCloseSuccess: 'websocketCloseSuccess',\n    websocketClosedByError: 'websocketClosedByError',\n}\n\n\nexport const WEBSOCKET_STATUS = {\n    notConnect: 'notConnect',\n    open: 'open',\n    close: 'close',\n    error: 'error'\n}\n\nexport const BUFFER_STATUS = {\n    empty: 'empty',\n    buffering: 'buffering',\n    full: 'full'\n}\n\n\nexport const SCREENSHOT_TYPE = {\n    download: 'download',\n    base64: 'base64',\n    blob: 'blob'\n}\n\n\nexport const VIDEO_ENC_TYPE = {\n    7: 'H264(AVC)', //\n    12: 'H265(HEVC)' //\n}\n\nexport const VIDEO_ENC_CODE = {\n    h264: 7,\n    h265: 12\n}\n\n\nexport const AUDIO_ENC_TYPE = {\n    10: 'AAC',\n    7: 'ALAW',\n    8: 'MULAW'\n}\n\nexport const H265_NAL_TYPE = {\n    vps: 32,\n    sps: 33,\n    pps: 34\n}\n\nexport const CONTROL_HEIGHT = 38\n\nexport const SCALE_MODE_TYPE = {\n    full: 0, //  视频画面完全填充canvas区域,画面会被拉伸\n    auto: 1, // 视频画面做等比缩放后,高或宽对齐canvas区域,画面不被拉伸,但有黑边\n    fullAuto: 2 // 视频画面做等比缩放后,完全填充canvas区域,画面不被拉伸,没有黑边,但画面显示不全\n}\n\n\nexport const FILE_SUFFIX = {\n    mp4: 'mp4',\n    webm: 'webm'\n};\n\n\nexport const CANVAS_RENDER_TYPE = {\n    webcodecs: 'webcodecs',\n    webgl: 'webgl',\n    offscreen: 'offscreen'\n}\n\nexport const ENCODED_VIDEO_TYPE = {\n    key: 'key',\n    delta: 'delta'\n}\n\n\nexport const MP4_CODECS = {\n    avc: 'video/mp4; codecs=\"avc1.64002A\"',\n    hev: 'video/mp4; codecs=\"hev1.1.6.L123.b0\"',\n}\n\n\nexport const MEDIA_SOURCE_STATE = {\n    ended: 'ended',\n    open: 'open',\n    closed: 'closed'\n}\n\n\n// frag duration\nexport const FRAG_DURATION = Math.ceil(1000 / 25)\n","export default class Debug {\n    constructor(master) {\n        this.log = (name, ...args) => {\n            if (master._opt.debug) {\n                console.log(`Jessibuca: [${name}]`, ...args);\n            }\n        };\n\n        this.warn = (name, ...args) => {\n            if (master._opt.debug) {\n                console.warn(`Jessibuca: [${name}]`, ...args);\n            }\n        };\n\n        this.error = (name, ...args) => {\n            if (master._opt.debug) {\n                console.error(`Jessibuca: [${name}]`, ...args);\n            }\n        };\n    }\n}\n","export default class Events {\n    constructor(master) {\n        this.destroys = [];\n        this.proxy = this.proxy.bind(this);\n        this.master = master;\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (!target) {\n            return;\n        }\n        if (Array.isArray(name)) {\n            return name.map(item => this.proxy(target, item, callback, option));\n        }\n        target.addEventListener(name, callback, option);\n        const destroy = () => target.removeEventListener(name, callback, option);\n        this.destroys.push(destroy);\n        return destroy;\n    }\n\n    destroy() {\n        this.master.debug.log(`Events`, 'destroy');\n        this.destroys.forEach(event => event());\n    }\n}\n","export default (player)=>{\n    Object.defineProperty(player, 'rect', {\n        get: () => {\n            return player.$container.getBoundingClientRect();\n        },\n    });\n\n    ['bottom', 'height', 'left', 'right', 'top', 'width'].forEach(key => {\n        Object.defineProperty(player, key, {\n            get: () => {\n                return player.rect[key];\n            },\n        });\n    });\n}\n","/*!\n* screenfull\n* v5.1.0 - 2020-12-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import {MP4_CODECS} from \"../constant\";\n\nexport function noop() {\n}\n\n\nexport function supportOffscreen($canvas) {\n    return typeof $canvas.transferControlToOffscreen === 'function';\n}\n\n\nexport function supportOffscreenV2() {\n    return typeof OffscreenCanvas !== \"undefined\";\n}\n\n\nexport function createContextGL($canvas) {\n    let gl = null;\n\n    const validContextNames = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"];\n    let nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n        const contextName = validContextNames[nameIndex];\n\n        try {\n            let contextOptions = {preserveDrawingBuffer: true};\n            gl = $canvas.getContext(contextName, contextOptions);\n        } catch (e) {\n            gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== \"function\") {\n            gl = null;\n        }\n\n        ++nameIndex;\n    }\n\n\n    return gl;\n}\n\n\nexport function audioContextUnlock(context) {\n    context.resume();\n    const source = context.createBufferSource();\n    source.buffer = context.createBuffer(1, 1, 22050);\n    source.connect(context.destination);\n    if (source.noteOn) {\n        source.noteOn(0);\n    } else {\n        source.start(0);\n    }\n}\n\nexport function dataURLToFile(dataURL = '') {\n    const arr = dataURL.split(\",\");\n    const bstr = atob(arr[1]);\n    const type = arr[0].replace(\"data:\", \"\").replace(\";base64\", \"\")\n    let n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], 'file', {type});\n}\n\nexport function downloadFile(file, fileName) {\n    if (file instanceof Blob || file instanceof File) {\n        file = new Blob([file]);\n    }\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = file;\n    aLink.click();\n}\n\n\nexport function downloadImg(content, fileName) {\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = URL.createObjectURL(content);\n    aLink.click();\n    URL.revokeObjectURL(content);\n}\n\nexport function checkFull() {\n    let isFull = document.fullscreenElement || window.webkitFullscreenElement || document.msFullscreenElement;\n    if (isFull === undefined) isFull = false;\n    return !!isFull;\n}\n\nexport function now() {\n    return new Date().getTime();\n}\n\nexport const supportedWasm = (() => {\n    try {\n        if (typeof WebAssembly === \"object\"\n            && typeof WebAssembly.instantiate === \"function\") {\n            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n            if (module instanceof WebAssembly.Module)\n                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n    } catch (e) {\n    }\n    return false;\n})();\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (!element) {\n        return\n    }\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\n\nexport function getStyle(element, key, numberType = true) {\n    if (!element) {\n        return 0\n    }\n\n    const value = getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function calculationRate(callback) {\n    let totalSize = 0;\n    let lastTime = getNowTime();\n    return size => {\n        totalSize += size;\n        const thisTime = getNowTime();\n        const diffTime = thisTime - lastTime;\n        if (diffTime >= 1000) {\n            callback((totalSize / diffTime) * 1000);\n            lastTime = thisTime;\n            totalSize = 0;\n        }\n    };\n}\n\nexport function downloadRecord(blob, name, suffix) {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = (name || now()) + '.' + (suffix || FILE_SUFFIX.webm);\n    a.click();\n    window.URL.revokeObjectURL(url);\n}\n\nexport const env = '__ENV__';\n\nexport function isMobile() {\n    return (/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isAndroid() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/android/i.test(UA));\n}\n\nexport function isIOS() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\n\nexport function parseTime(time, cFormat) {\n    if (arguments.length === 0) {\n        return null\n    }\n    var format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\n    var date;\n    if (typeof time === 'object') {\n        date = time\n    } else {\n        if (('' + time).length === 10) time = parseInt(time) * 1000;\n        time = +time; // 转成int 型\n        date = new Date(time)\n    }\n    var formatObj = {\n        y: date.getFullYear(),\n        m: date.getMonth() + 1,\n        d: date.getDate(),\n        h: date.getHours(),\n        i: date.getMinutes(),\n        s: date.getSeconds(),\n        a: date.getDay()\n    };\n    var time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n        var value = formatObj[key]\n        if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1]\n        if (result.length > 0 && value < 10) {\n            value = '0' + value\n        }\n        return value || 0\n    });\n    return time_str\n}\n\n// 是否支持 webcodecs\nexport function supportWCS() {\n    return \"VideoEncoder\" in window;\n}\n\nexport function toNumber(value) {\n    if (typeof value !== 'string') {\n        return value;\n    } else {\n        // 转换成 number 类型\n        var parsed = Number(value);\n        return isNaN(parsed) ? value : parsed;\n    }\n}\n\nexport function uuid16() {\n    return 'xxxxxxxxxxxx4xxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\n\nexport function isDef(v) {\n    return v !== undefined && v !== null;\n}\n\nexport function formatVideoDecoderConfigure(avcC) {\n    let codecArray = avcC.subarray(1, 4);\n    let codecString = \"avc1.\";\n    for (let j = 0; j < 3; j++) {\n        let h = codecArray[j].toString(16);\n        if (h.length < 2) {\n            h = \"0\" + h\n        }\n        codecString += h\n    }\n\n    return {\n        codec: codecString,\n        description: avcC\n    }\n}\n\nexport function isFullScreen() {\n    return document.isFullScreen || document.mozIsFullScreen || document.webkitIsFullScreen;\n}\n\nexport function bpsSize(value) {\n    if (null == value || value === '') {\n        return \"0 KB/S\";\n    }\n    let size = parseFloat(value);\n    size = size.toFixed(2);\n    return size + 'KB/S';\n}\n\n\nexport function fpsStatus(fps) {\n    let result = 0;\n    if (fps >= 24) {\n        result = 2;\n    } else if (fps >= 15) {\n        result = 1;\n    }\n\n    return result;\n}\n\nexport function createEmptyImageBitmap(width, height) {\n    const $canvasElement = document.createElement(\"canvas\");\n    $canvasElement.width = width;\n    $canvasElement.height = height;\n    return createImageBitmap($canvasElement, 0, 0, width, height);\n}\n\n\nexport function supportMSE() {\n    return window.MediaSource && window.MediaSource.isTypeSupported(MP4_CODECS.avc);\n}\n\n\nexport function formatMp4VideoCodec(codec) {\n    return `video/mp4; codecs=\"${codec}\"`\n}\n\n\nexport function saveBlobToFile(fileName, blob) {\n    let url = window.URL.createObjectURL(blob);\n    let aLink = window.document.createElement('a');\n    aLink.download = fileName;\n    aLink.href = url;\n    //创建内置事件并触发\n    let evt = window.document.createEvent('MouseEvents');\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    aLink.dispatchEvent(evt);\n}\n\nexport function isEmpty(value) {\n    return value === null || value === undefined\n}\n\nexport function isNotEmpty(value) {\n    return !isEmpty(value)\n}\n","import {EVENTS, EVENTS_ERROR, JESSIBUCA_EVENTS} from \"../constant\";\nimport screenfull from \"screenfull\";\nimport {setStyle} from \"../utils\";\n\nexport default (player) => {\n\n\n    try {\n        const screenfullChange = () => {\n            player.emit(JESSIBUCA_EVENTS.fullscreen,player.fullscreen)\n        };\n        screenfull.on('change', screenfullChange);\n        player.events.destroys.push(() => {\n            screenfull.off('change', screenfullChange);\n        });\n    } catch (error) {\n        //\n    }\n    //\n    player.on(EVENTS.load, () => {\n        player.debug.log('player', 'has loaded');\n        player._hasLoaded = true;\n    })\n\n    //\n    player.on(EVENTS.play, () => {\n        player.loading = false;\n    })\n\n    //\n    player.on(EVENTS.fullscreen, (value) => {\n        if (value) {\n            try {\n                screenfull.request(player.$container).then(() => {\n\n                }).catch((e) => {\n                    player.webFullscreen = true;\n                });\n\n            } catch (e) {\n                player.webFullscreen = true;\n            }\n        } else {\n            try {\n                screenfull.exit().then(() => {\n                }).catch(() => {\n                    player.webFullscreen = false;\n\n                });\n            } catch (e) {\n                player.webFullscreen = false;\n            }\n        }\n    })\n\n    player.on(EVENTS.webFullscreen, (value) => {\n        if (value) {\n            player.$container.classList.add('webmediaplayer-fullscreen-web')\n            const {clientHeight: bodyHeight, clientWidth: bodyWidth} = document.body;\n            const {clientHeight: playerHeight, clientWidth: playerWidth} = player.video.$videoElement;\n            const bodyRatio = bodyWidth / bodyHeight;\n            const playerRatio = playerWidth / playerHeight;\n            const needSpin = bodyRatio < playerRatio;\n            if (needSpin) {\n                const scale = Math.min(bodyHeight / playerWidth, bodyWidth / playerHeight);\n                player.video.$videoElement.style.transform = `rotate(90deg) scale(${scale},${scale})`;\n            }\n\n        } else {\n            player.$container.classList.remove('webmediaplayer-fullscreen-web')\n            player.video.$videoElement.style.transform = null;\n        }\n    })\n\n    //\n    player.on(EVENTS.resize, () => {\n        player.video.resize();\n    })\n\n\n    if (player._opt.debug) {\n        const ignoreList = [EVENTS.timeUpdate];\n        Object.keys(EVENTS).forEach((key) => {\n            player.on(EVENTS[key], (value) => {\n                if (ignoreList.includes(key)) {\n                    return;\n                }\n\n                player.debug.log('player events', EVENTS[key], value);\n            })\n        })\n\n        Object.keys(EVENTS_ERROR).forEach((key) => {\n            player.on(EVENTS_ERROR[key], (value) => {\n                player.debug.log('player event error', EVENTS_ERROR[key], value);\n            })\n        })\n    }\n}\n","export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({fn, ctx});\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n\n        if (!name) {\n            Object.keys(e).forEach((key) => {\n                delete e[key];\n            })\n            delete this.e\n            return;\n        }\n\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","export default (gl) => {\n    var vertexShaderScript = [\n        'attribute vec4 vertexPos;',\n        'attribute vec4 texturePos;',\n        'varying vec2 textureCoord;',\n\n        'void main()',\n        '{',\n        'gl_Position = vertexPos;',\n        'textureCoord = texturePos.xy;',\n        '}'\n    ].join('\\n');\n\n    var fragmentShaderScript = [\n        'precision highp float;',\n        'varying highp vec2 textureCoord;',\n        'uniform sampler2D ySampler;',\n        'uniform sampler2D uSampler;',\n        'uniform sampler2D vSampler;',\n        'const mat4 YUV2RGB = mat4',\n        '(',\n        '1.1643828125, 0, 1.59602734375, -.87078515625,',\n        '1.1643828125, -.39176171875, -.81296875, .52959375,',\n        '1.1643828125, 2.017234375, 0, -1.081390625,',\n        '0, 0, 0, 1',\n        ');',\n\n        'void main(void) {',\n        'highp float y = texture2D(ySampler,  textureCoord).r;',\n        'highp float u = texture2D(uSampler,  textureCoord).r;',\n        'highp float v = texture2D(vSampler,  textureCoord).r;',\n        'gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',\n        '}'\n    ].join('\\n');\n\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderScript);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n        console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentShaderScript);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n        console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n    }\n\n    gl.useProgram(program);\n\n    // initBuffers\n    var vertexPosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n    var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n    gl.enableVertexAttribArray(vertexPosRef);\n    gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n    var texturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n    gl.enableVertexAttribArray(texturePosRef);\n    gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    function _initTexture(name, index) {\n        var textureRef = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, textureRef);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.uniform1i(gl.getUniformLocation(program, name), index);\n        return textureRef;\n    }\n\n    var yTextureRef = _initTexture('ySampler', 0);\n    var uTextureRef = _initTexture('uSampler', 1);\n    var vTextureRef = _initTexture('vSampler', 2);\n\n    return {\n        render: function (w, h, y, u, v) {\n            gl.viewport(0, 0, w, h);\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, w, h, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, y);\n            gl.activeTexture(gl.TEXTURE1);\n            gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, w / 2, h / 2, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, u);\n            gl.activeTexture(gl.TEXTURE2);\n            gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, w / 2, h / 2, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, v);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        },\n        destroy: function () {\n            try {\n                gl.deleteProgram(program);\n\n                gl.deleteBuffer(vertexPosBuffer)\n                gl.deleteBuffer(texturePosBuffer);\n\n                gl.deleteTexture(yTextureRef);\n                gl.deleteTexture(uTextureRef);\n                gl.deleteBuffer(vTextureRef);\n            } catch (e) {\n                // console.error(e);\n            }\n\n        }\n    }\n};\n","import Emitter from \"../utils/emitter\";\nimport {CONTROL_HEIGHT, EVENTS, VIDEO_ENC_TYPE} from \"../constant\";\n\nexport default class CommonLoader extends Emitter {\n    constructor() {\n        super();\n        this.init = false;\n    }\n\n    initCanvasViewSize() {\n        this.$videoElement.width = this.videoInfo.width;\n        this.$videoElement.height = this.videoInfo.height;\n        this.resize();\n    }\n\n    //\n    updateVideoInfo(data) {\n        if (data.encTypeCode) {\n            this.videoInfo.encType = VIDEO_ENC_TYPE[data.encTypeCode];\n        }\n\n        if (data.width) {\n            this.videoInfo.width = data.width;\n        }\n\n        if (data.height) {\n            this.videoInfo.height = data.height;\n        }\n\n        // video 基本信息\n        if (this.videoInfo.encType && this.videoInfo.height && this.videoInfo.width && !this.init) {\n            this.player.emit(EVENTS.videoInfo, this.videoInfo);\n            this.init = true;\n        }\n    }\n\n    resize() {\n        this.player.debug.log('canvasVideo', 'resize');\n        const option = this.player._opt;\n        const width = this.player.width;\n        let height = this.player.height;\n        if (option.hasControl) {\n            height -= CONTROL_HEIGHT;\n        }\n        let resizeWidth = this.$videoElement.width;\n        let resizeHeight = this.$videoElement.height;\n        const rotate = option.rotate;\n        let left = ((width - resizeWidth) / 2)\n        let top = ((height - resizeHeight) / 2)\n        if (rotate === 270 || rotate === 90) {\n            resizeWidth = this.$videoElement.height;\n            resizeHeight = this.$videoElement.width;\n        }\n\n        const wScale = width / resizeWidth;\n        const hScale = height / resizeHeight;\n\n        let scale = wScale > hScale ? hScale : wScale;\n        //\n        if (!option.isResize) {\n            if (wScale !== hScale) {\n                scale = wScale + ',' + hScale;\n            }\n        }\n        //\n        if (option.isFullResize) {\n            scale = wScale > hScale ? wScale : hScale;\n        }\n        let transform = \"scale(\" + scale + \")\";\n\n        if (rotate) {\n            transform += ' rotate(' + rotate + 'deg)'\n        }\n\n        this.$videoElement.style.transform = transform;\n        this.$videoElement.style.left = left + \"px\"\n        this.$videoElement.style.top = top + \"px\"\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {createContextGL, createEmptyImageBitmap, dataURLToFile, downloadImg, now, supportOffscreen} from \"../utils\";\nimport createWebGL from \"../utils/webgl\";\nimport {CANVAS_RENDER_TYPE, CONTROL_HEIGHT, EVENTS, SCREENSHOT_TYPE, VIDEO_ENC_TYPE} from \"../constant\";\nimport CommonLoader from \"./commonLoader\";\n\nexport default class CanvasVideoLoader extends CommonLoader {\n\n    constructor(player) {\n        super()\n        this.player = player;\n        const $canvasElement = document.createElement(\"canvas\");\n        $canvasElement.style.position = \"absolute\";\n        $canvasElement.style.top = 0;\n        $canvasElement.style.left = 0;\n        this.$videoElement = $canvasElement;\n        player.$container.appendChild(this.$videoElement);\n\n        this.context2D = null;\n        this.contextGl = null;\n        this.contextGlRender = null;\n        this.contextGlDestroy = null;\n        this.bitmaprenderer = null;\n        this.renderType = null;\n        this.videoInfo = {\n            width: '',\n            height: '',\n            encType: '',\n        }\n        //\n        this._initCanvasRender();\n        this.player.debug.log('CanvasVideo', 'init');\n    }\n\n\n    _initContextGl() {\n        this.contextGl = createContextGL(this.$videoElement);\n        const webgl = createWebGL(this.contextGl);\n        this.contextGlRender = webgl.render;\n        this.contextGlDestroy = webgl.destroy\n    }\n\n    _initContext2D() {\n        this.context2D = this.$videoElement.getContext('2d');\n    }\n\n\n    // 渲染类型\n    _initCanvasRender() {\n        if (this.player._opt.useWCS && !this._supportOffscreen()) {\n            this.renderType = CANVAS_RENDER_TYPE.webcodecs;\n            this._initContext2D();\n        } else if (this._supportOffscreen()) {\n            this.renderType = CANVAS_RENDER_TYPE.offscreen;\n            this._bindOffscreen();\n        } else {\n            this.renderType = CANVAS_RENDER_TYPE.webgl;\n            this._initContextGl();\n        }\n    }\n\n    _supportOffscreen() {\n        return supportOffscreen(this.$videoElement) && this.player._opt.useOffscreen;\n    }\n\n    //\n    _bindOffscreen() {\n        this.bitmaprenderer = this.$videoElement.getContext('bitmaprenderer');\n    }\n\n    //\n    render(msg) {\n        switch (this.renderType) {\n            case CANVAS_RENDER_TYPE.offscreen:\n                this.bitmaprenderer.transferFromImageBitmap(msg.buffer);\n                break;\n            case CANVAS_RENDER_TYPE.webgl:\n                this.contextGlRender(this.$videoElement.width, this.$videoElement.height, msg.output[0], msg.output[1], msg.output[2]);\n                break;\n            case CANVAS_RENDER_TYPE.webcodecs:\n                this.context2D.drawImage(msg.videoFrame, 0, 0, this.$videoElement.width, this.$videoElement.height);\n                break;\n        }\n    }\n\n    screenshot(filename, format, quality, type) {\n        filename = filename || now();\n        type = type || SCREENSHOT_TYPE.download;\n        const formatType = {\n            png: 'image/png',\n            jpeg: 'image/jpeg',\n            webp: 'image/webp'\n        };\n        let encoderOptions = 0.92;\n        if (!formatType[format] && SCREENSHOT_TYPE[format]) {\n            type = format;\n            format = 'png';\n            quality = undefined\n        }\n\n        if (typeof quality === \"string\") {\n            type = quality;\n            quality = undefined;\n        }\n\n        if (typeof quality !== 'undefined') {\n            encoderOptions = Number(quality);\n        }\n        const dataURL = this.$videoElement.toDataURL(formatType[format] || formatType.png, encoderOptions);\n\n        const file = dataURLToFile(dataURL)\n        if (type === SCREENSHOT_TYPE.base64) {\n            return dataURL;\n        } else if (type === SCREENSHOT_TYPE.blob) {\n            return file;\n        } else if (type === SCREENSHOT_TYPE.download) {\n            downloadImg(file, filename);\n        }\n    }\n\n    //\n    clearView() {\n        switch (this.renderType) {\n            case CANVAS_RENDER_TYPE.offscreen:\n                createEmptyImageBitmap(this.$videoElement.width, this.$videoElement.height).then((imageBitMap) => {\n                    this.bitmaprenderer.transferFromImageBitmap(imageBitMap);\n                })\n                break;\n            case CANVAS_RENDER_TYPE.webgl:\n                this.contextGl.clear(this.contextGl.COLOR_BUFFER_BIT);\n                break;\n            case CANVAS_RENDER_TYPE.webcodecs:\n                this.context2D.clearRect(0, 0, this.$videoElement.width, this.$videoElement.height)\n                break;\n        }\n    }\n\n    destroy() {\n        if (this.contextGl) {\n            this.contextGl = null;\n        }\n\n        if (this.context2D) {\n            this.context2D = null;\n        }\n\n        if (this.contextGlRender) {\n            this.contextGlDestroy && this.contextGlDestroy();\n            this.contextGlDestroy = null;\n            this.contextGlRender = null;\n        }\n        if (this.bitmaprenderer) {\n            this.bitmaprenderer = null;\n        }\n\n        this.renderType = null;\n\n        this.videoInfo = {\n            width: '',\n            height: '',\n            encType: '',\n            encTypeCode: ''\n        }\n\n        this.player.$container.removeChild(this.$videoElement);\n        this.init = false;\n        this.player.debug.log(`CanvasVideoLoader`, 'destroy');\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {CONTROL_HEIGHT, EVENTS, SCREENSHOT_TYPE, VIDEO_ENC_TYPE} from \"../constant\";\nimport {dataURLToFile, downloadImg, now} from \"../utils\";\nimport CommonLoader from \"./commonLoader\";\n\nexport default class VideoLoader extends CommonLoader {\n    constructor(player) {\n        super();\n        this.player = player;\n        const $videoElement = document.createElement('video');\n        $videoElement.muted = true;\n        $videoElement.style.position = \"absolute\";\n        $videoElement.style.top = 0;\n        $videoElement.style.left = 0;\n        player.$container.appendChild($videoElement);\n        this.$videoElement = $videoElement;\n        this.videoInfo = {\n            width: '',\n            height: '',\n            encType: '',\n        }\n        this.resize();\n\n        const {proxy} = this.player.events;\n\n        proxy(this.$videoElement, 'canplay', () => {\n            this.player.debug.log('Video', 'canplay');\n        })\n\n        proxy(this.$videoElement, 'waiting', () => {\n            this.player.emit(EVENTS.videoWaiting);\n        })\n\n        proxy(this.$videoElement, 'timeupdate', (event) => {\n            this.player.emit(EVENTS.videoTimeUpdate, event.timeStamp);\n        })\n\n        this.player.debug.log('Video', 'init');\n\n    }\n\n    play() {\n        // this.$videoElement.autoplay = true;\n        this.$videoElement.play();\n    }\n\n    clearView() {\n\n    }\n\n    screenshot(filename, format, quality, type) {\n        filename = filename || now();\n        type = type || SCREENSHOT_TYPE.download;\n        const formatType = {\n            png: 'image/png',\n            jpeg: 'image/jpeg',\n            webp: 'image/webp'\n        };\n        let encoderOptions = 0.92;\n        if (!formatType[format] && SCREENSHOT_TYPE[format]) {\n            type = format;\n            format = 'png';\n            quality = undefined\n        }\n        if (typeof quality === \"string\") {\n            type = quality;\n            quality = undefined;\n        }\n\n        if (typeof quality !== 'undefined') {\n            encoderOptions = Number(quality);\n        }\n        const $video = this.$videoElement;\n        let canvas = document.createElement('canvas');\n        canvas.width = $video.videoWidth;\n        canvas.height = $video.videoHeight;\n        const context = canvas.getContext('2d');\n        context.drawImage($video, 0, 0, canvas.width, canvas.height);\n        const dataURL = canvas.toDataURL(SCREENSHOT_TYPE[format] || SCREENSHOT_TYPE.png, encoderOptions);\n        const file = dataURLToFile(dataURL)\n        if (type === SCREENSHOT_TYPE.base64) {\n            return dataURL;\n        } else if (type === SCREENSHOT_TYPE.blob) {\n            return file;\n        } else if (type === SCREENSHOT_TYPE.download) {\n            downloadImg(file, filename);\n        }\n    }\n\n\n    destroy() {\n        this.player.$container.removeChild(this.$videoElement);\n        this.init = false;\n        this.player.debug.log('Video', 'destroy');\n    }\n\n}\n","import CanvasVideoLoader from './canvasLoader';\nimport VideoLoader from \"./videoLoader\";\n\nexport default class Video {\n    constructor(player) {\n        const Loader = Video.getLoaderFactory(player._opt);\n        return new Loader(player);\n    }\n\n    static getLoaderFactory(opt) {\n        if (opt.useMSE) {\n            return VideoLoader;\n        } else {\n            return CanvasVideoLoader;\n        }\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {AUDIO_ENC_TYPE, EVENTS, VIDEO_ENC_TYPE} from \"../constant\";\nimport {clamp, noop} from \"../utils\";\n\nexport default class AudioContextLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.bufferList = [];\n        this.player = player;\n        this.scriptNode = null;\n        this.hasInitScriptNode = false;\n        this.audioContextChannel = null;\n\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        //\n        this.gainNode = this.audioContext.createGain();\n        // Get an AudioBufferSourceNode.\n        // This is the AudioNode to use when we want to play an AudioBuffer\n        const source = this.audioContext.createBufferSource();\n        // set the buffer in the AudioBufferSourceNode\n        source.buffer = this.audioContext.createBuffer(1, 1, 22050);\n        // connect the AudioBufferSourceNode to the\n        // destination so we can hear the sound\n        source.connect(this.audioContext.destination);\n        // noteOn as start\n        // start the source playing\n        if (source.noteOn) {\n            source.noteOn(0);\n        } else {\n            source.start(0);\n        }\n        this.audioBufferSourceNode = source;\n        //\n        this.mediaStreamAudioDestinationNode = this.audioContext.createMediaStreamDestination();\n        //\n        this.audioEnabled(true);\n        // default setting 0\n        this.gainNode.gain.value = 0;\n\n        this.playing = false;\n\n        this.audioInfo = {\n            encType: '',\n            channels: '',\n            sampleRate: ''\n        }\n        this.init = false;\n        this.player.debug.log('AudioContext', 'init');\n    }\n\n    updateAudioInfo(data) {\n        if (data.encTypeCode) {\n            this.audioInfo.encType = AUDIO_ENC_TYPE[data.encTypeCode];\n        }\n\n        if (data.channels) {\n            this.audioInfo.channels = data.channels;\n        }\n\n        if (data.sampleRate) {\n            this.audioInfo.sampleRate = data.sampleRate;\n        }\n\n        // audio 基本信息\n        if (this.audioInfo.sampleRate && this.audioInfo.channels && this.audioInfo.encType && !this.init) {\n            this.player.emit(EVENTS.audioInfo, this.audioInfo);\n            this.init = true;\n        }\n    }\n\n    //\n    get isPlaying() {\n        return this.playing;\n    }\n\n    get isMute() {\n        return this.gainNode.gain.value === 0 || this.isStateSuspended();\n    }\n\n    get volume() {\n        return this.gainNode.gain.value;\n    }\n\n    get bufferSize() {\n        return this.bufferList.length;\n    }\n\n\n    initScriptNode() {\n        this.playing = true;\n\n        if (this.hasInitScriptNode) {\n            return;\n        }\n        const channels = this.audioInfo.channels;\n\n        const scriptNode = this.audioContext.createScriptProcessor(1024, 0, channels);\n\n        scriptNode.onaudioprocess = (audioProcessingEvent) => {\n            const outputBuffer = audioProcessingEvent.outputBuffer;\n\n            if (this.bufferList.length && this.playing) {\n                const buffer = this.bufferList.shift();\n                for (let channel = 0; channel < channels; channel++) {\n                    const b = buffer[channel]\n                    const nowBuffering = outputBuffer.getChannelData(channel);\n                    for (let i = 0; i < 1024; i++) {\n                        nowBuffering[i] = b[i] || 0\n                    }\n                }\n            }\n        }\n\n        scriptNode.connect(this.gainNode);\n        this.scriptNode = scriptNode;\n        this.gainNode.connect(this.audioContext.destination);\n        this.gainNode.connect(this.mediaStreamAudioDestinationNode);\n        this.hasInitScriptNode = true;\n    }\n\n    mute(flag) {\n        if (flag) {\n\n            if (!this.isMute) {\n                this.player.emit(EVENTS.mute, flag);\n            }\n            this.setVolume(0);\n            this.audioEnabled(false);\n            this.clear();\n        } else {\n            if (this.isMute) {\n                this.player.emit(EVENTS.mute, flag);\n            }\n            this.setVolume(0.5);\n            this.audioEnabled(true);\n        }\n    }\n\n    setVolume(volume) {\n        volume = parseFloat(volume).toFixed(2);\n        if (isNaN(volume)) {\n            return;\n        }\n        this.audioEnabled(true);\n        volume = clamp(volume, 0, 1);\n        this.gainNode.gain.value = volume;\n        this.gainNode.gain.setValueAtTime(volume, this.audioContext.currentTime);\n        this.player.emit(EVENTS.volumechange, this.player.volume);\n    }\n\n    closeAudio() {\n        if (this.hasInitScriptNode) {\n            this.scriptNode && this.scriptNode.disconnect(this.gainNode);\n            this.gainNode && this.gainNode.disconnect(this.audioContext.destination);\n            this.gainNode && this.gainNode.disconnect(this.mediaStreamAudioDestinationNode);\n        }\n        this.clear();\n    }\n\n    // 是否播放。。。\n    audioEnabled(flag) {\n        if (flag) {\n            if (this.audioContext.state === 'suspended') {\n                // resume\n                this.audioContext.resume();\n            }\n        } else {\n            if (this.audioContext.state === 'running') {\n                // suspend\n                this.audioContext.suspend();\n            }\n        }\n    }\n\n    isStateRunning() {\n        return this.audioContext.state === 'running';\n    }\n\n    isStateSuspended() {\n        return this.audioContext.state === 'suspended';\n    }\n\n    clear() {\n        // 全部清空。\n        while (this.bufferList.length) {\n            this.bufferList.shift();\n        }\n    }\n\n    play(buffer, ts) {\n        this.bufferList.push(buffer);\n    }\n\n    pause() {\n        this.playing = false;\n        this.clear();\n    }\n\n    resume() {\n        this.playing = true;\n    }\n\n\n    destroy() {\n        this.closeAudio();\n        this.audioContext.close();\n        this.audioContext = null;\n        this.gainNode = null;\n        this.init = false;\n        if (this.scriptNode) {\n            this.scriptNode.onaudioprocess = noop;\n            this.scriptNode = null;\n        }\n        this.audioBufferSourceNode = null;\n        this.mediaStreamAudioDestinationNode = null;\n        this.hasInitScriptNode = false;\n    }\n\n}\n","import AudioContextLoader from \"./audioContextLoader\";\nimport AudioLoader from \"./audioLoader\";\n\nexport default class Audio {\n    constructor(player) {\n        const Loader = Audio.getLoaderFactory();\n        return new Loader(player);\n    }\n\n    static getLoaderFactory() {\n        return AudioContextLoader;\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {EVENTS, EVENTS_ERROR} from \"../constant\";\nimport {calculationRate} from \"../utils\";\n\nexport default class FetchLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.playing = false;\n\n        this.abortController = new AbortController();\n        //\n        this.streamRate = calculationRate(rate => {\n            player.emit(EVENTS.kBps, (rate / 1024).toFixed(2));\n        });\n        player.debug.log('FetchStream', 'init');\n    }\n\n    fetchStream(url) {\n        const {demux} = this.player;\n        fetch(url, {signal: this.abortController.signal}).then((res) => {\n            const reader = res.body.getReader();\n            this.emit(EVENTS.streamSuccess);\n            const fetchNext = () => {\n                reader.read().then(({done, value}) => {\n                        if (done) {\n                            demux.close();\n                        } else {\n                            this.streamRate(value.byteLength);\n                            demux.dispatch(value);\n                            fetchNext();\n                        }\n                    }\n                ).catch((e) => {\n                    demux.close();\n                    // 这边会报用户 aborted a request 错误。\n                    this.emit(EVENTS_ERROR.fetchError, e);\n                })\n            }\n            fetchNext();\n        }).catch((e) => {\n            this.emit(EVENTS_ERROR.fetchError, e)\n        })\n    }\n\n\n    destroy() {\n        if (this.abortController) {\n            this.abortController.abort();\n            this.abortController = null\n        }\n        this.streamRate = null;\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {EVENTS, EVENTS_ERROR, WEBSOCKET_STATUS} from \"../constant\";\nimport {calculationRate} from \"../utils\";\n\nexport default class WebsocketLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.socket = null;\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n        this.wsUrl = null;\n        //\n        this.streamRate = calculationRate(rate => {\n            player.emit(EVENTS.kBps, (rate / 1024).toFixed(2));\n        });\n    }\n\n    _createWebSocket() {\n        const player = this.player;\n        const {\n            debug,\n            events: {proxy},\n            demux,\n        } = player;\n\n        this.socket = new WebSocket(this.wsUrl);\n        this.socket.binaryType = 'arraybuffer';\n        proxy(this.socket, 'open', () => {\n            this.emit(EVENTS.streamSuccess);\n            debug.log('websocketLoader', 'socket open');\n            this.socketStatus = WEBSOCKET_STATUS.open;\n        });\n\n        proxy(this.socket, 'message', event => {\n            this.streamRate(event.data.byteLength);\n            this._handleMessage(event.data);\n        });\n\n\n        proxy(this.socket, 'close', () => {\n            debug.log('websocketLoader', 'socket close');\n            this.emit(EVENTS.streamEnd);\n            this.socketStatus = WEBSOCKET_STATUS.close;\n        });\n\n        proxy(this.socket, 'error', error => {\n            debug.log('websocketLoader', 'socket error');\n            this.emit(EVENTS_ERROR.websocketError, error);\n            this.socketStatus = WEBSOCKET_STATUS.error;\n            demux.close();\n            debug.log('websocketLoader', `socket error:`, error);\n        });\n    }\n\n    //\n    _handleMessage(message) {\n        const {demux} = this.player;\n        demux.dispatch(message);\n    }\n\n\n    fetchStream(url) {\n        this.wsUrl = url;\n        this._createWebSocket();\n    }\n\n\n    destroy() {\n        if (this.socket) {\n            this.socket.close();\n            this.socket = null;\n        }\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n        this.streamRate = null;\n        this.off();\n        this.player.debug.log('websocketLoader', 'destroy');\n    }\n}\n","import FetchLoader from \"./fetchLoader\";\nimport WebsocketLoader from \"./websocketLoader\";\nimport {PLAYER_PLAY_PROTOCOL} from \"../constant\";\n\nexport default class Stream {\n    constructor(player) {\n        const Loader = Stream.getLoaderFactory(player._opt.protocol);\n        return new Loader(player);\n    }\n\n    static getLoaderFactory(protocol) {\n        if (protocol === PLAYER_PLAY_PROTOCOL.fetch) {\n            return FetchLoader;\n        } else if (protocol === PLAYER_PLAY_PROTOCOL.websocket) {\n            return WebsocketLoader;\n        }\n    }\n}\n","import {downloadRecord} from \"../utils\";\nimport RecordRTC from 'recordrtc';\nimport {EVENTS, FILE_SUFFIX} from \"../constant\";\nimport Emitter from \"../utils/emitter\";\n\nexport default class RecordRTCLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.fileName = '';\n        this.fileType = FILE_SUFFIX.webm;\n        this.isRecording = false;\n        this.recordingTimestamp = 0;\n        this.recordingInterval = null;\n        player.debug.log('Recorder', 'init');\n    }\n\n    setFileName(fileName, fileType) {\n        this.fileName = fileName;\n\n        if (FILE_SUFFIX.mp4 === fileType || FILE_SUFFIX.webm === fileType) {\n            this.fileType = fileType;\n        }\n    }\n\n    get recording() {\n        return this.isRecording;\n    }\n\n    get recordTime() {\n        return this.recordingTimestamp;\n    }\n\n    startRecord() {\n        const debug = this.player.debug;\n        const options = {\n            type: 'video',\n            mimeType: 'video/webm;codecs=h264',\n            onTimeStamp: (timestamp) => {\n                debug.log('Recorder', 'record timestamp :' + timestamp);\n            },\n            disableLogs: !this.player._opt.debug\n        }\n\n        try {\n            const stream = this.player.video.$videoElement.captureStream(25);\n            const audioStream = this.player.audio.mediaStreamAudioDestinationNode.stream;\n            stream.addTrack(audioStream.getAudioTracks()[0]);\n            this.recorder = RecordRTC(stream, options);\n        } catch (e) {\n            debug.error('Recorder', e);\n            this.emit(EVENTS.recordCreateError);\n        }\n        if (this.recorder) {\n            this.isRecording = true;\n            this.emit(EVENTS.recording, true);\n            this.recorder.startRecording();\n            debug.log('Recorder', 'start recording');\n            this.recordingInterval = window.setInterval(() => {\n                this.recordingTimestamp += 1;\n                this.player.emit(EVENTS.recordingTimestamp, this.recordingTimestamp);\n            }, 1000);\n        }\n    }\n\n    stopRecordAndSave() {\n        if (!this.recorder || !this.isRecording) {\n            return;\n        }\n        this.recorder.stopRecording(() => {\n            this.player.debug.log('Recorder', 'stop recording');\n            downloadRecord(this.recorder.getBlob(), this.fileName, this.fileType);\n            this._reset();\n            this.emit(EVENTS.recording, false);\n        })\n    }\n\n    _reset() {\n        this.isRecording = false;\n        this.recordingTimestamp = 0;\n\n        if (this.recorder) {\n            this.recorder.destroy();\n            this.recorder = null;\n        }\n        this.fileName = null;\n        if (this.recordingInterval) {\n            clearInterval(this.recordingInterval);\n        }\n        this.recordingInterval = null;\n    }\n\n    destroy() {\n        this._reset();\n        this.player.debug.log('Recorder', 'destroy');\n        this.player = null;\n    }\n}\n","import RecordRTCLoader from \"./recordRTCLoader\";\n\nexport default class Recorder {\n    constructor(player) {\n        const Loader = Recorder.getLoaderFactory();\n        return new Loader(player);\n    }\n\n    static getLoaderFactory() {\n        return RecordRTCLoader;\n    }\n}\n","import {EVENTS, MEDIA_TYPE, WORKER_CMD_TYPE, WORKER_SEND_TYPE} from \"../constant\";\n\nexport default class DecoderWorker {\n    constructor(player) {\n        this.player = player;\n        this.decoderWorker = new Worker(player._opt.decoder)\n        this._initDecoderWorker();\n        player.debug.log('decoderWorker', 'init')\n    }\n\n    _initDecoderWorker() {\n        const {\n            debug,\n            events: {proxy},\n        } = this.player;\n\n        this.decoderWorker.onmessage = (event) => {\n            const msg = event.data;\n            switch (msg.cmd) {\n                case WORKER_CMD_TYPE.init:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.init);\n                    this.player.emit(EVENTS.load);\n                    this.player.emit(EVENTS.decoderWorkerInit);\n                    this._initWork();\n                    break;\n                case WORKER_CMD_TYPE.videoCode:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.videoCode, msg.code);\n                    this.player.video.updateVideoInfo({\n                        encTypeCode: msg.code\n                    })\n                    break;\n                case WORKER_CMD_TYPE.audioCode:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.audioCode, msg.code);\n                    this.player.audio.updateAudioInfo({\n                        encTypeCode: msg.code\n                    })\n                    break;\n                case WORKER_CMD_TYPE.initVideo:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.initVideo, `width:${msg.w},height:${msg.h}`);\n                    this.player.video.updateVideoInfo({\n                        width: msg.w,\n                        height: msg.h\n                    })\n                    this.player.video.initCanvasViewSize();\n                    break;\n                case WORKER_CMD_TYPE.initAudio:\n                    debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.initAudio, `channels:${msg.channels},sampleRate:${msg.sampleRate}`);\n                    this.player.audio.updateAudioInfo(msg);\n                    this.player.audio.initScriptNode(msg);\n                    break;\n                case WORKER_CMD_TYPE.render:\n                    // debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.render, `msg ts:${msg.ts}`);\n                    this.player.handleRender();\n                    this.player.video.render(msg);\n                    this.player.emit(EVENTS.timeUpdate, msg.ts)\n                    this.player.updateStats({fps: true, ts: msg.ts, buf: msg.delay})\n                    break;\n                case WORKER_CMD_TYPE.playAudio:\n                    // debug.log(`decoderWorker`, 'onmessage:', WORKER_CMD_TYPE.playAudio, `msg ts:${msg.ts}`);\n                    // 只有在 playing 的时候。\n                    if (this.player.playing) {\n                        this.player.audio.play(msg.buffer, msg.ts);\n                    }\n                    break;\n                default:\n                    player[msg.cmd] && player[msg.cmd](msg);\n            }\n        }\n    }\n\n    _initWork() {\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.init,\n            opt: JSON.stringify(this.player._opt),\n            sampleRate: this.player.audio.audioContext.sampleRate\n        })\n    }\n\n    decodeVideo(arrayBuffer, ts, isIFrame) {\n        const options = {\n            type: MEDIA_TYPE.video,\n            ts: Math.max(ts, 0),\n            isIFrame\n        }\n        // this.player.debug.log('decoderWorker', 'decodeVideo', options);\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.decode,\n            buffer: arrayBuffer,\n            options\n        }, [arrayBuffer.buffer])\n    }\n\n    decodeAudio(arrayBuffer, ts) {\n        if (this.player._opt.useWCS && !this.player._opt.useOffscreen) {\n            this._decodeAudioNoDelay(arrayBuffer, ts);\n        } else if (this.player._opt.useMSE) {\n            this._decodeAudioNoDelay(arrayBuffer, ts);\n        } else {\n            this._decodeAudio(arrayBuffer, ts);\n        }\n    }\n\n\n    //\n    _decodeAudio(arrayBuffer, ts) {\n        const options = {\n            type: MEDIA_TYPE.audio,\n            ts: Math.max(ts, 0)\n        }\n        // this.player.debug.log('decoderWorker', 'decodeAudio',options);\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.decode,\n            buffer: arrayBuffer,\n            options\n        }, [arrayBuffer.buffer])\n    }\n\n\n    _decodeAudioNoDelay(arrayBuffer, ts) {\n        this.decoderWorker.postMessage({\n            cmd: WORKER_SEND_TYPE.audioDecode,\n            buffer: arrayBuffer,\n            ts: Math.max(ts, 0)\n        }, [arrayBuffer.buffer])\n    }\n\n    destroy() {\n        this.player.debug.log(`decoderWorker`, 'destroy');\n        this.decoderWorker.postMessage({cmd: WORKER_SEND_TYPE.close})\n        this.decoderWorker.terminate();\n        this.decoderWorker = null;\n        this.player = null;\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {MEDIA_TYPE} from \"../constant\";\n\nexport default class CommonLoader extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n\n        this.stopId = null;\n        this.firstTimestamp = null;\n        this.startTimestamp = null;\n        this.delay = -1;\n        this.bufferList = [];\n        this.dropping = false;\n        this.initInterval();\n    }\n\n    getDelay(timestamp) {\n        if (!timestamp) {\n            return -1\n        }\n        if (!this.firstTimestamp) {\n            this.firstTimestamp = timestamp\n            this.startTimestamp = Date.now()\n            this.delay = -1;\n        } else {\n            if (timestamp) {\n                this.delay = (Date.now() - this.startTimestamp) - (timestamp - this.firstTimestamp)\n            }\n        }\n        return this.delay\n    }\n\n    //\n    initInterval() {\n        const videoBuffer = this.player._opt.videoBuffer;\n        this.player.debug.log('common dumex', `init Interval`);\n\n        let _loop = () => {\n            let data;\n            if (this.bufferList.length) {\n                if (this.dropping) {\n                    data = this.bufferList.shift();\n                    while (!data.isIFrame && this.bufferList.length) {\n                        data = this.bufferList.shift();\n                    }\n\n                    if (data.isIFrame) {\n                        this.dropping = false;\n                        this._doDecoderDecode(data);\n                    }\n                } else {\n                    data = this.bufferList[0];\n                    if (this.getDelay(data.ts) === -1) {\n                        this.bufferList.shift()\n                        this._doDecoderDecode(data);\n                    } else if (this.delay > videoBuffer + 1000) {\n                        this.dropping = true\n                    } else {\n                        while (this.bufferList.length) {\n                            data = this.bufferList[0]\n                            if (this.getDelay(data.ts) > videoBuffer) {\n                                // drop frame\n                                this.bufferList.shift()\n                                this._doDecoderDecode(data);\n                            } else {\n                                this.player.debug.log('common dumex', `delay is ${this.delay}`);\n\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        _loop();\n        this.stopId = setInterval(_loop, 10)\n    }\n\n    _doDecoderDecode(data) {\n        const player = this.player;\n        const {decoderWorker, webcodecsDecoder, mseDecoder} = player;\n\n        if (data.type === MEDIA_TYPE.audio) {\n            decoderWorker.decodeAudio(data.payload, data.ts)\n        } else if (data.type === MEDIA_TYPE.video) {\n            if (player._opt.useWCS && !player._opt.useOffscreen) {\n                // this.player.debug.log('FlvDemux', 'decodeVideo useWCS')\n                webcodecsDecoder.decodeVideo(data.payload, data.ts, data.isIframe);\n            } else if (player._opt.useMSE) {\n                // this.player.debug.log('FlvDemux', 'decodeVideo useMSE')\n                mseDecoder.decodeVideo(data.payload, data.ts, data.isIframe);\n            }\n        }\n    }\n\n    pushBuffer(payload, options) {\n        // this.player.debug.log('common Demux', 'pushBuffer', options);\n        // 音频\n        if (options.type === MEDIA_TYPE.audio) {\n            this.bufferList.push({\n                ts: options.ts,\n                payload: payload,\n                type: MEDIA_TYPE.audio,\n            })\n        } else if (options.type === MEDIA_TYPE.video) {\n            this.bufferList.push({\n                ts: options.ts,\n                payload: payload,\n                type: MEDIA_TYPE.video,\n                isIFrame: options.isIFrame\n            })\n        }\n    }\n\n    destroy() {\n        if (this.stopId) {\n            clearInterval(this.stopId);\n            this.stopId = null;\n        }\n        this.firstTimestamp = null;\n        this.startTimestamp = null;\n        this.delay = -1;\n        this.bufferList = [];\n        this.dropping = false;\n    }\n}\n","import {FLV_MEDIA_TYPE, MEDIA_TYPE} from \"../constant\";\nimport CommonLoader from \"./commonLoader\";\n\nexport default class FlvLoader extends CommonLoader {\n    constructor(player) {\n        super(player);\n        // this.player = player;\n        const input = this._inputFlv();\n        this.flvDemux = this.dispatchFlvData(input);\n        player.debug.log('FlvDemux', 'init')\n    }\n\n    dispatch(data) {\n        // this.player.debug.log('FlvDemux', 'dispatch');\n        this.flvDemux(data);\n    }\n\n    * _inputFlv() {\n        yield 9;\n        const tmp = new ArrayBuffer(4)\n        const tmp8 = new Uint8Array(tmp)\n        const tmp32 = new Uint32Array(tmp)\n\n        const player = this.player;\n        const {decoderWorker, webcodecsDecoder, mseDecoder} = player;\n\n        while (true) {\n            tmp8[3] = 0\n            const t = yield 15\n            const type = t[4]\n            tmp8[0] = t[7]\n            tmp8[1] = t[6]\n            tmp8[2] = t[5]\n            const length = tmp32[0]\n            tmp8[0] = t[10]\n            tmp8[1] = t[9]\n            tmp8[2] = t[8]\n            let ts = tmp32[0]\n            if (ts === 0xFFFFFF) {\n                tmp8[3] = t[11]\n                ts = tmp32[0]\n            }\n            const payload = yield length\n            switch (type) {\n                case FLV_MEDIA_TYPE.audio:\n                    if (player._opt.hasAudio) {\n                        player.updateStats({\n                            abps: payload.byteLength\n                        })\n                        decoderWorker.decodeAudio(payload, ts)\n                        // this._doDecode(payload, type, ts)\n                    }\n                    break\n                case FLV_MEDIA_TYPE.video:\n                    if (player._opt.hasVideo) {\n                        player.updateStats({\n                            vbps: payload.byteLength\n                        })\n                        const isIframe = payload[0] >> 4 === 1;\n                        // 没有使用离屏渲染\n                        if (player._opt.useWCS && !player._opt.useOffscreen) {\n                            // this.player.debug.log('FlvDemux', 'decodeVideo useWCS')\n                            webcodecsDecoder.decodeVideo(payload, ts, isIframe);\n                        } else if (player._opt.useMSE) {\n                            // this.player.debug.log('FlvDemux', 'decodeVideo useMSE')\n                            mseDecoder.decodeVideo(payload, ts, isIframe);\n                        } else {\n                            // this.player.debug.log('FlvDemux', 'decodeVideo')\n                            decoderWorker.decodeVideo(payload, ts, isIframe);\n                        }\n                        // this._doDecode(payload, type, ts, isIframe);\n\n                    }\n                    break\n            }\n        }\n    }\n\n    _doDecode(payload, type, ts, isIframe) {\n        const player = this.player;\n        const {decoderWorker, webcodecsDecoder, mseDecoder} = player;\n        let options = {\n            ts: ts,\n            type: null,\n        }\n        if (player._opt.useWCS && !player._opt.useOffscreen) {\n            if (type === FLV_MEDIA_TYPE.video) {\n                options.type = MEDIA_TYPE.video;\n            } else if (type === FLV_MEDIA_TYPE.audio) {\n                options.type = MEDIA_TYPE.audio;\n            }\n            // this.pushBuffer(payload, options)\n            webcodecsDecoder.decodeVideo(payload, ts, isIframe);\n        } else if (player._opt.useMSE) {\n            if (type === FLV_MEDIA_TYPE.video) {\n                options.type = MEDIA_TYPE.video;\n            } else if (type === FLV_MEDIA_TYPE.audio) {\n                options.type = MEDIA_TYPE.audio;\n            }\n\n            // this.pushBuffer(payload, options)\n            mseDecoder.decodeVideo(payload, ts, isIframe);\n        } else {\n            if (type === FLV_MEDIA_TYPE.video) {\n                decoderWorker.decodeVideo(payload, ts, isIframe);\n            } else if (type === FLV_MEDIA_TYPE.audio) {\n                decoderWorker.decodeAudio(payload, ts);\n            }\n        }\n    }\n\n    dispatchFlvData(input) {\n        let need = input.next()\n        let buffer = null\n        return (value) => {\n            let data = new Uint8Array(value)\n            if (buffer) {\n                let combine = new Uint8Array(buffer.length + data.length)\n                combine.set(buffer)\n                combine.set(data, buffer.length)\n                data = combine\n                buffer = null\n            }\n            while (data.length >= need.value) {\n                let remain = data.slice(need.value)\n                need = input.next(data.slice(0, need.value))\n                data = remain\n            }\n            if (data.length > 0) {\n                buffer = data\n            }\n        }\n    }\n\n    close() {\n\n    }\n\n    destroy() {\n        super.destroy();\n        this.player.debug.log('FlvDemux', 'destroy')\n    }\n}\n","import {MEDIA_TYPE} from \"../constant\";\nimport CommonLoader from \"./commonLoader\";\n\nexport default class M7sLoader extends CommonLoader {\n    constructor(player) {\n        super(player);\n        player.debug.log('M7sDemux', 'init')\n    }\n\n    dispatch(data) {\n        const player = this.player;\n        const {decoderWorker, webcodecsDecoder, mseDecoder} = player;\n        const dv = new DataView(data)\n        const type = dv.getUint8(0);\n        const ts = dv.getUint32(1, false);\n        switch (type) {\n            case MEDIA_TYPE.audio:\n                if (player._opt.hasAudio) {\n                    const payload = new Uint8Array(data, 5)\n                    player.updateStats({\n                        abps: payload.byteLength\n                    })\n                    decoderWorker.decodeAudio(payload, ts)\n                }\n                break;\n            case MEDIA_TYPE.video:\n                if (player._opt.hasVideo) {\n                    if (dv.byteLength > 5) {\n                        const payload = new Uint8Array(data, 5);\n                        const isIframe = dv.getUint8(5) >> 4 === 1;\n                        player.updateStats({\n                            vbps: payload.byteLength\n                        })\n                        if (player._opt.useWCS && !player._opt.useOffscreen) {\n                            // this.player.debug.log('FlvDemux', 'decodeVideo useWCS')\n                            webcodecsDecoder.decodeVideo(payload, ts, isIframe);\n                        } else if (player._opt.useMSE) {\n                            // this.player.debug.log('FlvDemux', 'decodeVideo useMSE')\n                            mseDecoder.decodeVideo(payload, ts, isIframe);\n                        } else {\n                            // this.player.debug.log('FlvDemux', 'decodeVideo')\n                            decoderWorker.decodeVideo(payload, ts, isIframe);\n                        }\n                    }\n                }\n                break;\n        }\n    }\n\n    _doDecode(payload, type, ts, isIframe){\n\n    }\n\n    close() {\n\n    }\n\n    destroy() {\n        super.destroy();\n\n        this.player.debug.log('M7sDemux', 'destroy')\n    }\n}\n","import FlvLoader from \"./flvLoader\";\nimport M7sLoader from \"./m7sLoader\";\nimport {DEMUX_TYPE} from \"../constant\";\n\nexport default class Demux {\n    constructor(player) {\n        const Loader = Demux.getLoaderFactory(player._opt.demuxType);\n        return new Loader(player);\n    }\n\n    static getLoaderFactory(type) {\n        if (type === DEMUX_TYPE.m7s) {\n            return M7sLoader;\n        } else if (type === DEMUX_TYPE.flv) {\n            return FlvLoader;\n        }\n    }\n}\n","import {formatVideoDecoderConfigure, noop} from \"../utils\";\nimport Emitter from \"../utils/emitter\";\nimport {ENCODED_VIDEO_TYPE, EVENTS} from \"../constant\";\n\n\nexport default class WebcodecsDecoder extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.hasInit = false;\n        this.isInitInfo = false;\n        this.decoder = null;\n        this.initDecoder();\n        player.debug.log('Webcodecs', 'init')\n    }\n\n    initDecoder() {\n        const _this = this;\n        this.decoder = new VideoDecoder({\n            output(videoFrame) {\n                _this.handleDecode(videoFrame)\n            },\n            error(error) {\n                _this.handleError(error)\n            }\n        })\n    }\n\n    handleDecode(videoFrame) {\n        if (!this.isInitInfo) {\n            this.player.video.updateVideoInfo({\n                width: videoFrame.codedWidth,\n                height: videoFrame.codedHeight\n            })\n            this.player.video.initCanvasViewSize();\n            this.isInitInfo = true;\n        }\n\n        this.player.handleRender();\n        this.player.video.render({\n            videoFrame\n        })\n\n        this.player.updateStats({fps: true, ts: 0, buf: this.player.demux.delay})\n\n        // release resource\n        setTimeout(function () {\n            if (videoFrame.close) {\n                videoFrame.close()\n            } else {\n                videoFrame.destroy()\n            }\n        }, 100)\n    }\n\n    handleError(error) {\n        this.player.debug.log('Webcodecs', 'VideoDecoder handleError', error)\n    }\n\n    decodeVideo(payload, ts, isIframe) {\n        this.player.debug.log('Webcodecs decoder', 'decodeVideo');\n        if (!this.hasInit) {\n            if (isIframe && payload[1] === 0) {\n                const videoCodec = (payload[0] & 0x0F);\n                this.player.video.updateVideoInfo({\n                    encTypeCode: videoCodec\n                })\n                const config = formatVideoDecoderConfigure(payload.slice(5));\n                this.decoder.configure(config);\n                this.hasInit = true;\n            }\n        } else {\n            const chunk = new EncodedVideoChunk({\n                data: payload.slice(5),\n                timestamp: ts,\n                type: isIframe ? ENCODED_VIDEO_TYPE.key : ENCODED_VIDEO_TYPE.delta\n            })\n            this.decoder.decode(chunk);\n        }\n    }\n\n    destroy() {\n        this.decoder.close();\n        this.decoder = null;\n        this.hasInit = false;\n        this.isInitInfo = false;\n        this.player.debug.log('Webcodecs', 'destroy')\n        this.player = null;\n    }\n}\n","const iconsMap = {\n    play: '播放',\n    pause: '暂停',\n    audio: '',\n    mute: '',\n    screenshot: '截图',\n    loading: '加载',\n    fullscreen: '全屏',\n    fullscreenExit: '退出全屏',\n    record: '录制',\n    recordStop: '停止录制',\n}\n\nexport default Object.keys(iconsMap).reduce((icons, key) => {\n    icons[key] = `\n    <i class=\"jessibuca-icon jessibuca-icon-${key}\"></i>\n    ${iconsMap[key] ? `<span class=\"icon-title-tips\"><span class=\"icon-title\">${iconsMap[key]}</span></span>` : ''}\n`;\n    return icons;\n}, {});\n","import icons from './icons';\n\nexport default (player, control) => {\n    player.$container.classList.add('jessibuca-controls-show');\n    const options = player._opt;\n    const operateBtns = options.operateBtns;\n\n\n    player.$container.insertAdjacentHTML(\n        'beforeend',\n        `\n            ${options.background ? `<div class=\"jessibuca-poster\" style=\"background-image: url(${options.background})\"></div>` : ''}\n            <div class=\"jessibuca-loading\">\n                ${icons.loading}\n                ${options.loadingText ? `<div class=\"jessibuca-loading-text\">${options.loadingText}</div>` : ''}\n            </div>\n            ${options.hasControl && operateBtns.play ? `<div class=\"jessibuca-play-big\"></div>` : ''}\n            ${options.hasControl ? `\n                <div class=\"jessibuca-controls\">\n                    <div class=\"jessibuca-controls-bottom\">\n                        <div class=\"jessibuca-controls-left\">\n                            ${options.showBandwidth ? `<div class=\"jessibuca-controls-item jessibuca-speed\"></div>` : ''}\n                        </div>\n                        <div class=\"jessibuca-controls-right\">\n                             ${operateBtns.audio ? `\n                                 <div class=\"jessibuca-controls-item jessibuca-volume\">\n                                     ${icons.audio}\n                                     ${icons.mute}\n                                     <div class=\"jessibuca-volume-panel-wrap\">\n                                          <div class=\"jessibuca-volume-panel\">\n                                                 <div class=\"jessibuca-volume-panel-handle\"></div>\n                                          </div>\n                                          <div class=\"jessibuca-volume-panel-text\"></div>\n                                     </div>\n                                 </div>\n                             ` : ''}\n                             ${operateBtns.play ? `<div class=\"jessibuca-controls-item jessibuca-play\">${icons.play}</div><div class=\"jessibuca-controls-item jessibuca-pause\">${icons.pause}</div>` : ''}\n                             ${operateBtns.screenshot ? `<div class=\"jessibuca-controls-item jessibuca-screenshot\">${icons.screenshot}</div>` : ''}\n                             ${operateBtns.record ? ` <div class=\"jessibuca-controls-item jessibuca-record\">${icons.record}</div><div class=\"jessibuca-controls-item jessibuca-record-stop\">${icons.recordStop}</div>` : ''}\n                             ${operateBtns.fullscreen ? `<div class=\"jessibuca-controls-item jessibuca-fullscreen\">${icons.fullscreen}</div><div class=\"jessibuca-controls-item jessibuca-fullscreen-exit\">${icons.fullscreenExit}</div>` : ''}\n                        </div>\n                    </div>\n                </div>\n            ` : ''}\n\n        `\n    )\n\n    Object.defineProperty(control, '$poster', {\n        value: player.$container.querySelector('.jessibuca-poster'),\n    });\n\n    Object.defineProperty(control, '$loading', {\n        value: player.$container.querySelector('.jessibuca-loading'),\n    });\n\n    Object.defineProperty(control, '$play', {\n        value: player.$container.querySelector('.jessibuca-play'),\n    });\n\n    Object.defineProperty(control, '$playBig', {\n        value: player.$container.querySelector('.jessibuca-play-big'),\n    });\n\n    Object.defineProperty(control, '$pause', {\n        value: player.$container.querySelector('.jessibuca-pause'),\n    });\n\n    Object.defineProperty(control, '$controls', {\n        value: player.$container.querySelector('.jessibuca-controls'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: player.$container.querySelector('.jessibuca-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: player.$container.querySelector('.jessibuca-fullscreen'),\n    });\n\n\n    Object.defineProperty(control, '$volume', {\n        value: player.$container.querySelector('.jessibuca-volume'),\n    });\n\n    Object.defineProperty(control, '$volumePanelWrap', {\n        value: player.$container.querySelector('.jessibuca-volume-panel-wrap'),\n    });\n\n    Object.defineProperty(control, '$volumePanelText', {\n        value: player.$container.querySelector('.jessibuca-volume-panel-text'),\n    });\n\n    Object.defineProperty(control, '$volumePanel', {\n        value: player.$container.querySelector('.jessibuca-volume-panel'),\n    });\n\n    Object.defineProperty(control, '$volumeHandle', {\n        value: player.$container.querySelector('.jessibuca-volume-panel-handle'),\n    });\n\n    Object.defineProperty(control, '$volumeOn', {\n        value: player.$container.querySelector('.jessibuca-icon-audio'),\n    });\n\n    Object.defineProperty(control, '$volumeOff', {\n        value: player.$container.querySelector('.jessibuca-icon-mute'),\n    });\n\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: player.$container.querySelector('.jessibuca-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$fullscreenExit', {\n        value: player.$container.querySelector('.jessibuca-fullscreen-exit'),\n    });\n\n    Object.defineProperty(control, '$record', {\n        value: player.$container.querySelector('.jessibuca-record'),\n    });\n    Object.defineProperty(control, '$recordStop', {\n        value: player.$container.querySelector('.jessibuca-record-stop'),\n    });\n\n    Object.defineProperty(control, '$screenshot', {\n        value: player.$container.querySelector('.jessibuca-screenshot'),\n    });\n\n    Object.defineProperty(control, '$speed', {\n        value: player.$container.querySelector('.jessibuca-speed'),\n    });\n}\n","import {EVENTS} from \"../constant\";\nimport {bpsSize, getStyle, setStyle} from \"../utils\";\nimport screenfull from \"screenfull\";\n\nexport default (player, control) => {\n    const {\n        events: {proxy},\n    } = player;\n\n    const object = document.createElement('object');\n    object.setAttribute('aria-hidden', 'true');\n    object.setAttribute('tabindex', -1);\n    object.type = 'text/html';\n    object.data = 'about:blank';\n\n    setStyle(object, {\n        display: 'block',\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        zIndex: '-1',\n    });\n\n    let playerWidth = player.width;\n    let playerHeight = player.height;\n\n    proxy(object, 'load', () => {\n        proxy(object.contentDocument.defaultView, 'resize', () => {\n            if (player.width !== playerWidth || player.height !== playerHeight) {\n                playerWidth = player.width;\n                playerHeight = player.height;\n                player.emit(EVENTS.resize);\n            }\n        });\n    });\n    player.$container.appendChild(object);\n\n    player.on(EVENTS.destroy, () => {\n        player.$container.removeChild(object);\n    })\n\n    function setVolumeHandle(percentage) {\n        if (percentage === 0) {\n            setStyle(control.$volumeOn, 'display', 'none');\n            setStyle(control.$volumeOff, 'display', 'flex');\n            setStyle(control.$volumeHandle, 'top', `${48}px`);\n        } else {\n            if (control.$volumeHandle && control.$volumePanel) {\n                const panelHeight = getStyle(control.$volumePanel, 'height') || 60;\n                const handleHeight = getStyle(control.$volumeHandle, 'height');\n                const top = panelHeight - (panelHeight - handleHeight) * percentage - handleHeight;\n                setStyle(control.$volumeHandle, 'top', `${top}px`);\n                setStyle(control.$volumeOn, 'display', 'flex');\n                setStyle(control.$volumeOff, 'display', 'none');\n            }\n        }\n        control.$volumePanelText && (control.$volumePanelText.innerHTML = parseInt(percentage * 100))\n    }\n\n    player.on(EVENTS.volumechange, () => {\n        setVolumeHandle(player.volume);\n    });\n\n    player.on(EVENTS.loading, (flag) => {\n        setStyle(control.$loading, 'display', flag ? 'flex' : 'none');\n        setStyle(control.$poster, 'display', 'none')\n\n        if (flag) {\n            setStyle(control.$playBig, 'display', 'none');\n        }\n    })\n\n    try {\n        const screenfullChange = () => {\n            setStyle(control.$fullscreenExit, 'display', player.fullscreen ? 'flex' : 'none');\n            setStyle(control.$fullscreen, 'display', player.fullscreen ? 'none' : 'flex');\n            // control.autoSize();\n        };\n        screenfull.on('change', screenfullChange);\n        player.events.destroys.push(() => {\n            screenfull.off('change', screenfullChange);\n        });\n    } catch (error) {\n        //\n    }\n\n    player.on(EVENTS.recording, () => {\n        setStyle(control.$record, 'display', player.recording ? 'none' : 'flex');\n        setStyle(control.$recordStop, 'display', player.recording ? 'flex' : 'none');\n    })\n\n    //\n    player.on(EVENTS.recordingTimestamp, (timestamp) => {\n        // console.log(timestamp);\n    })\n\n    player.on(EVENTS.playing, (flag) => {\n        setStyle(control.$play, 'display', flag ? 'none' : 'flex');\n        setStyle(control.$playBig, 'display', flag ? 'none' : 'block');\n        setStyle(control.$pause, 'display', flag ? 'flex' : 'none');\n        setStyle(control.$screenshot, 'display', flag ? 'flex' : 'none');\n        setStyle(control.$record, 'display', flag ? 'flex' : 'none');\n        setStyle(control.$fullscreen, 'display', flag ? 'flex' : 'none');\n\n        // 不在播放\n        if (!flag) {\n            control.$speed && (control.$speed.innerHTML = bpsSize(''));\n        }\n    })\n\n\n    player.on(EVENTS.kBps, (rate) => {\n        const bps = bpsSize(rate);\n        control.$speed && (control.$speed.innerHTML = bps);\n    })\n\n\n}\n","export default (player, control) => {\n\n    Object.defineProperty(control, 'controlsRect', {\n        get: () => {\n            return control.$controls.getBoundingClientRect();\n        },\n    });\n\n}\n","import {clamp, setStyle} from \"../utils\";\n\nexport default (player, control) => {\n    const {\n        events: {proxy}\n    } = player;\n\n    function volumeChangeFromEvent(event) {\n        const {bottom: panelBottom, height: panelHeight} = control.$volumePanel.getBoundingClientRect();\n        const {height: handleHeight} = control.$volumeHandle.getBoundingClientRect();\n        const percentage =\n            clamp(panelBottom - event.y - handleHeight / 2, 0, panelHeight - handleHeight / 2) / (panelHeight - handleHeight);\n        return percentage;\n    }\n\n    //\n    proxy(window, ['click', 'contextmenu'], event => {\n        if (event.composedPath().indexOf(player.$container) > -1) {\n            control.isFocus = true;\n        } else {\n            control.isFocus = false;\n        }\n    });\n\n    //\n    proxy(window, 'orientationchange', () => {\n        setTimeout(() => {\n            player.resize();\n        }, 300);\n    });\n\n\n    proxy(control.$controls, 'click', (e) => {\n        e.stopPropagation();\n    })\n\n    proxy(control.$pause, 'click', (e) => {\n        player.pause();\n    })\n    // 监听 play 方法\n    proxy(control.$play, 'click', (e) => {\n        player.play();\n    })\n\n    // 监听 play 方法\n    proxy(control.$playBig, 'click', (e) => {\n        player.play();\n    })\n\n    proxy(control.$volume, 'mouseover', () => {\n        control.$volumePanelWrap.classList.add('jessibuca-volume-panel-wrap-show');\n    })\n\n    proxy(control.$volume, 'mouseout', () => {\n        control.$volumePanelWrap.classList.remove('jessibuca-volume-panel-wrap-show');\n    })\n\n    proxy(control.$volumeOn, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$volumeOn, 'display', 'none');\n        setStyle(control.$volumeOff, 'display', 'block');\n        player.lastVolume = player.volume;\n        player.volume = 0;\n    })\n\n    proxy(control.$volumeOff, 'click', (e) => {\n        e.stopPropagation();\n        setStyle(control.$volumeOn, 'display', 'block');\n        setStyle(control.$volumeOff, 'display', 'none');\n        player.volume = player.lastVolume || 0.5;\n    })\n\n    proxy(control.$screenshot, 'click', (e) => {\n        e.stopPropagation();\n        player.video.screenshot();\n    })\n\n    proxy(control.$volumePanel, 'click', event => {\n        event.stopPropagation();\n        player.volume = volumeChangeFromEvent(event);\n    });\n\n    proxy(control.$volumeHandle, 'mousedown', () => {\n        control.isVolumeDroging = true;\n    });\n\n    proxy(control.$volumeHandle, 'mousemove', event => {\n        if (control.isVolumeDroging) {\n            player.volume = volumeChangeFromEvent(event);\n        }\n    });\n\n    proxy(document, 'mouseup', () => {\n        if (control.isVolumeDroging) {\n            control.isVolumeDroging = false;\n        }\n    });\n\n    proxy(control.$record, 'click', (e) => {\n        e.stopPropagation();\n        player.recording = true;\n    })\n\n    proxy(control.$recordStop, 'click', (e) => {\n        e.stopPropagation();\n        player.recording = false;\n    })\n\n    proxy(control.$fullscreen, 'click', (e) => {\n        e.stopPropagation();\n        player.fullscreen = true;\n    })\n\n    proxy(control.$fullscreenExit, 'click', (e) => {\n        e.stopPropagation();\n        player.fullscreen = false;\n    })\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import template from \"./template\";\nimport observer from './observer';\nimport property from './property';\nimport events from './events';\nimport './style.scss'\n\nexport default class Control {\n    constructor(player) {\n        this.player = player;\n        template(player, this);\n        observer(player, this);\n        property(player, this);\n        events(player, this);\n        this.player.debug.log('Control', 'init');\n    }\n\n    autoSize() {\n        const player = this.player;\n        player.$container.style.padding = '0 0';\n        const playerWidth = player.width;\n        const playerHeight = player.height;\n        const playerRatio = playerWidth / playerHeight;\n        const canvasWidth = player.audio.$videoElement.width;\n        const canvasHeight = player.audio.$videoElement.height;\n        const canvasRatio = canvasWidth / canvasHeight;\n        if (playerRatio > canvasRatio) {\n            const padding = (playerWidth - playerHeight * canvasRatio) / 2;\n            player.$container.style.padding = `0 ${padding}px`;\n        } else {\n            const padding = (playerHeight - playerWidth / canvasRatio) / 2;\n            player.$container.style.padding = `${padding}px 0`;\n        }\n    }\n\n    destroy() {\n        this.player.debug.log('control', 'destroy');\n        if (this.$poster) {\n            this.player.$container.removeChild(this.$poster);\n        }\n        this.player.$container.removeChild(this.$loading);\n        if (this.$controls) {\n            this.player.$container.removeChild(this.$controls);\n        }\n        this.player = null;\n    }\n}\n","export default (player) => {\n\n    const {\n        _opt,\n        debug,\n        events: {proxy},\n    } = player;\n\n\n    if (_opt.supportDblclickFullscreen) {\n        proxy(player.$videoElement, 'dblclick', () => {\n            player.fullscreen = !player.fullscreen;\n        })\n    }\n\n\n    //\n    proxy(document, 'visibilitychange', () => {\n        if (_opt.hiddenAutoPause) {\n            debug.log('visibilitychange', document.visibilityState, player._isPlayingBeforePageHidden)\n\n            if (\"visible\" === document.visibilityState) {\n                if (player._isPlayingBeforePageHidden) {\n                    player.play();\n                }\n            } else {\n                player._isPlayingBeforePageHidden = player.playing;\n                // hidden\n                if (player.playing) {\n                    player.pause();\n                }\n            }\n        }\n    })\n\n    proxy(window, 'fullscreenchange', () => {\n        //\n        if (player._wakeLock !== null && \"visible\" === document.visibilityState) {\n            player.enableWakeLock();\n        }\n    })\n}\n","class MP4 {\n\n    static init() {\n        MP4.types = {\n            avc1: [],\n            avcC: [],\n            hvc1: [],\n            hvcC: [],\n            btrt: [],\n            dinf: [],\n            dref: [],\n            esds: [],\n            ftyp: [],\n            hdlr: [],\n            mdat: [],\n            mdhd: [],\n            mdia: [],\n            mfhd: [],\n            minf: [],\n            moof: [],\n            moov: [],\n            mp4a: [],\n            mvex: [],\n            mvhd: [],\n            sdtp: [],\n            stbl: [],\n            stco: [],\n            stsc: [],\n            stsd: [],\n            stsz: [],\n            stts: [],\n            tfdt: [],\n            tfhd: [],\n            traf: [],\n            trak: [],\n            trun: [],\n            trex: [],\n            tkhd: [],\n            vmhd: [],\n            smhd: []\n        };\n\n        for (let name in MP4.types) {\n            if (MP4.types.hasOwnProperty(name)) {\n                MP4.types[name] = [\n                    name.charCodeAt(0),\n                    name.charCodeAt(1),\n                    name.charCodeAt(2),\n                    name.charCodeAt(3)\n                ];\n            }\n        }\n\n        let constants = MP4.constants = {};\n\n        constants.FTYP = new Uint8Array([\n            0x69, 0x73, 0x6F, 0x6D,  // major_brand: isom\n            0x0, 0x0, 0x0, 0x1,   // minor_version: 0x01\n            0x69, 0x73, 0x6F, 0x6D,  // isom\n            0x61, 0x76, 0x63, 0x31   // avc1\n        ]);\n\n        constants.STSD_PREFIX = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x01   // entry_count\n        ]);\n\n        constants.STTS = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00   // entry_count\n        ]);\n\n        constants.STSC = constants.STCO = constants.STTS;\n\n        constants.STSZ = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00,  // sample_size\n            0x00, 0x00, 0x00, 0x00   // sample_count\n        ]);\n\n        constants.HDLR_VIDEO = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00,  // pre_defined\n            0x76, 0x69, 0x64, 0x65,  // handler_type: 'vide'\n            0x00, 0x00, 0x00, 0x00,  // reserved: 3 * 4 bytes\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x56, 0x69, 0x64, 0x65,\n            0x6F, 0x48, 0x61, 0x6E,\n            0x64, 0x6C, 0x65, 0x72, 0x00  // name: VideoHandler\n        ]);\n\n        constants.HDLR_AUDIO = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00,  // pre_defined\n            0x73, 0x6F, 0x75, 0x6E,  // handler_type: 'soun'\n            0x00, 0x00, 0x00, 0x00,  // reserved: 3 * 4 bytes\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x53, 0x6F, 0x75, 0x6E,\n            0x64, 0x48, 0x61, 0x6E,\n            0x64, 0x6C, 0x65, 0x72, 0x00  // name: SoundHandler\n        ]);\n\n        constants.DREF = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x01,  // entry_count\n            0x00, 0x00, 0x00, 0x0C,  // entry_size\n            0x75, 0x72, 0x6C, 0x20,  // type 'url '\n            0x00, 0x00, 0x00, 0x01   // version(0) + flags\n        ]);\n\n        // Sound media header\n        constants.SMHD = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00   // balance(2) + reserved(2)\n        ]);\n\n        // video media header\n        constants.VMHD = new Uint8Array([\n            0x00, 0x00, 0x00, 0x01,  // version(0) + flags\n            0x00, 0x00,              // graphicsmode: 2 bytes\n            0x00, 0x00, 0x00, 0x00,  // opcolor: 3 * 2 bytes\n            0x00, 0x00\n        ]);\n    }\n\n    // Generate a box\n    static box(type) {\n        let size = 8;\n        let result = null;\n        let datas = Array.prototype.slice.call(arguments, 1);\n        let arrayCount = datas.length;\n\n        for (let i = 0; i < arrayCount; i++) {\n            size += datas[i].byteLength;\n        }\n\n        result = new Uint8Array(size);\n        result[0] = (size >>> 24) & 0xFF;  // size\n        result[1] = (size >>> 16) & 0xFF;\n        result[2] = (size >>> 8) & 0xFF;\n        result[3] = (size) & 0xFF;\n\n        result.set(type, 4);  // type\n\n        let offset = 8;\n        for (let i = 0; i < arrayCount; i++) {  // data body\n            result.set(datas[i], offset);\n            offset += datas[i].byteLength;\n        }\n\n        return result;\n    }\n\n    // emit ftyp & moov\n    static generateInitSegment(meta) {\n        let ftyp = MP4.box(MP4.types.ftyp, MP4.constants.FTYP);\n        let moov = MP4.moov(meta);\n\n        let result = new Uint8Array(ftyp.byteLength + moov.byteLength);\n        result.set(ftyp, 0);\n        result.set(moov, ftyp.byteLength);\n        return result;\n    }\n\n    // Movie metadata box\n    static moov(meta) {\n        let mvhd = MP4.mvhd(meta.timescale, meta.duration);\n        let trak = MP4.trak(meta);\n        let mvex = MP4.mvex(meta);\n        return MP4.box(MP4.types.moov, mvhd, trak, mvex);\n    }\n\n    // Movie header box\n    static mvhd(timescale, duration) {\n        return MP4.box(MP4.types.mvhd, new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00,  // creation_time\n            0x00, 0x00, 0x00, 0x00,  // modification_time\n            (timescale >>> 24) & 0xFF,  // timescale: 4 bytes\n            (timescale >>> 16) & 0xFF,\n            (timescale >>> 8) & 0xFF,\n            (timescale) & 0xFF,\n            (duration >>> 24) & 0xFF,   // duration: 4 bytes\n            (duration >>> 16) & 0xFF,\n            (duration >>> 8) & 0xFF,\n            (duration) & 0xFF,\n            0x00, 0x01, 0x00, 0x00,  // Preferred rate: 1.0\n            0x01, 0x00, 0x00, 0x00,  // PreferredVolume(1.0, 2bytes) + reserved(2bytes)\n            0x00, 0x00, 0x00, 0x00,  // reserved: 4 + 4 bytes\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x01, 0x00, 0x00,  // ----begin composition matrix----\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x01, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x40, 0x00, 0x00, 0x00,  // ----end composition matrix----\n            0x00, 0x00, 0x00, 0x00,  // ----begin pre_defined 6 * 4 bytes----\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,  // ----end pre_defined 6 * 4 bytes----\n            0xFF, 0xFF, 0xFF, 0xFF   // next_track_ID\n        ]));\n    }\n\n    // Track box\n    static trak(meta) {\n        return MP4.box(MP4.types.trak, MP4.tkhd(meta), MP4.mdia(meta));\n    }\n\n    // Track header box\n    static tkhd(meta) {\n        let trackId = meta.id, duration = meta.duration;\n        let width = meta.presentWidth, height = meta.presentHeight;\n\n        return MP4.box(MP4.types.tkhd, new Uint8Array([\n            0x00, 0x00, 0x00, 0x07,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00,  // creation_time\n            0x00, 0x00, 0x00, 0x00,  // modification_time\n            (trackId >>> 24) & 0xFF,  // track_ID: 4 bytes\n            (trackId >>> 16) & 0xFF,\n            (trackId >>> 8) & 0xFF,\n            (trackId) & 0xFF,\n            0x00, 0x00, 0x00, 0x00,  // reserved: 4 bytes\n            (duration >>> 24) & 0xFF, // duration: 4 bytes\n            (duration >>> 16) & 0xFF,\n            (duration >>> 8) & 0xFF,\n            (duration) & 0xFF,\n            0x00, 0x00, 0x00, 0x00,  // reserved: 2 * 4 bytes\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,  // layer(2bytes) + alternate_group(2bytes)\n            0x00, 0x00, 0x00, 0x00,  // volume(2bytes) + reserved(2bytes)\n            0x00, 0x01, 0x00, 0x00,  // ----begin composition matrix----\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x01, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x00, 0x00, 0x00, 0x00,\n            0x40, 0x00, 0x00, 0x00,  // ----end composition matrix----\n            (width >>> 8) & 0xFF,    // width and height\n            (width) & 0xFF,\n            0x00, 0x00,\n            (height >>> 8) & 0xFF,\n            (height) & 0xFF,\n            0x00, 0x00\n        ]));\n    }\n\n    static mdia(meta) {\n        return MP4.box(MP4.types.mdia, MP4.mdhd(meta), MP4.hdlr(meta), MP4.minf(meta))\n    }\n\n    // Media header box\n    static mdhd(meta) {\n        let timescale = meta.timescale;\n        let duration = meta.duration;\n        return MP4.box(MP4.types.mdhd, new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            0x00, 0x00, 0x00, 0x00,  // creation_time\n            0x00, 0x00, 0x00, 0x00,  // modification_time\n            (timescale >>> 24) & 0xFF,  // timescale: 4 bytes\n            (timescale >>> 16) & 0xFF,\n            (timescale >>> 8) & 0xFF,\n            (timescale) & 0xFF,\n            (duration >>> 24) & 0xFF,   // duration: 4 bytes\n            (duration >>> 16) & 0xFF,\n            (duration >>> 8) & 0xFF,\n            (duration) & 0xFF,\n            0x55, 0xC4,             // language: und (undetermined)\n            0x00, 0x00              // pre_defined = 0\n        ]));\n    }\n\n    // Media handler reference box\n    static hdlr(meta) {\n        let data = null;\n        if (meta.type === 'audio') {\n            data = MP4.constants.HDLR_AUDIO;\n        } else {\n            data = MP4.constants.HDLR_VIDEO;\n        }\n        return MP4.box(MP4.types.hdlr, data);\n    }\n\n    // Media infomation box\n    static minf(meta) {\n        let xmhd = null;\n        if (meta.type === 'audio') {\n            xmhd = MP4.box(MP4.types.smhd, MP4.constants.SMHD);\n        } else {\n            xmhd = MP4.box(MP4.types.vmhd, MP4.constants.VMHD);\n        }\n        return MP4.box(MP4.types.minf, xmhd, MP4.dinf(), MP4.stbl(meta));\n    }\n\n    // Data infomation box\n    static dinf() {\n        let result = MP4.box(MP4.types.dinf,\n            MP4.box(MP4.types.dref, MP4.constants.DREF)\n        );\n        return result;\n    }\n\n    // Sample table box\n    static stbl(meta) {\n        let result = MP4.box(MP4.types.stbl,  // type: stbl\n            MP4.stsd(meta),  // Sample Description Table\n            MP4.box(MP4.types.stts, MP4.constants.STTS),  // Time-To-Sample\n            MP4.box(MP4.types.stsc, MP4.constants.STSC),  // Sample-To-Chunk\n            MP4.box(MP4.types.stsz, MP4.constants.STSZ),  // Sample size\n            MP4.box(MP4.types.stco, MP4.constants.STCO)   // Chunk offset\n        );\n        return result;\n    }\n\n    static stsdOld(meta) {\n        return meta.type === \"audio\" ?\n            MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.mp4a(meta)) :\n            meta.videoType === 'avc' ?\n                MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.avc1(meta)) :\n                MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.hvc1(meta))\n    }\n\n    // Sample description box\n    static stsd(meta) {\n        if (meta.type === 'audio') {\n            // else: aac -> mp4a\n            return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.mp4a(meta));\n        } else {\n            if (meta.videoType === 'avc') {\n                //\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.avc1(meta));\n            } else {\n                //\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.hvc1(meta))\n            }\n        }\n    }\n\n\n    static mp4a(meta) {\n        let channelCount = meta.channelCount;\n        let sampleRate = meta.audioSampleRate;\n\n        let data = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\n            0x00, 0x00, 0x00, 0x01,  // reserved(2) + data_reference_index(2)\n            0x00, 0x00, 0x00, 0x00,  // reserved: 2 * 4 bytes\n            0x00, 0x00, 0x00, 0x00,\n            0x00, channelCount,      // channelCount(2)\n            0x00, 0x10,              // sampleSize(2)\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\n            (sampleRate >>> 8) & 0xFF,  // Audio sample rate\n            (sampleRate) & 0xFF,\n            0x00, 0x00\n        ]);\n\n        return MP4.box(MP4.types.mp4a, data, MP4.esds(meta));\n    }\n\n    static esds(meta) {\n        let config = meta.config || [];\n        let configSize = config.length;\n        let data = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version 0 + flags\n\n            0x03,                    // descriptor_type\n            0x17 + configSize,       // length3\n            0x00, 0x01,              // es_id\n            0x00,                    // stream_priority\n\n            0x04,                    // descriptor_type\n            0x0F + configSize,       // length\n            0x40,                    // codec: mpeg4_audio\n            0x15,                    // stream_type: Audio\n            0x00, 0x00, 0x00,        // buffer_size\n            0x00, 0x00, 0x00, 0x00,  // maxBitrate\n            0x00, 0x00, 0x00, 0x00,  // avgBitrate\n\n            0x05                     // descriptor_type\n        ].concat([\n            configSize\n        ]).concat(\n            config\n        ).concat([\n            0x06, 0x01, 0x02         // GASpecificConfig\n        ]));\n        return MP4.box(MP4.types.esds, data);\n    }\n\n    static avc1(meta) {\n        let avcc = meta.avcc;\n        const width = meta.codecWidth;\n        const height = meta.codecHeight;\n        let data = new Uint8Array([\n            0, 0, 0, 0,\n            0, 0, 0, 1,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            width >>> 8 & 255,\n            width & 255,\n            height >>> 8 & 255,\n            height & 255,\n            0, 72, 0, 0,\n            0, 72, 0, 0,\n            0, 0, 0, 0,\n            0, 1,\n            0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0,\n            0, 24,\n            255, 255]\n        );\n        return MP4.box(MP4.types.avc1, data, MP4.box(MP4.types.avcC, avcc))\n    }\n\n    static hvc1(meta) {\n        let avcc = meta.avcc;\n        const width = meta.codecWidth;\n        const height = meta.codecHeight;\n        let data = new Uint8Array([\n            0, 0, 0, 0,\n            0, 0, 0, 1,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            width >>> 8 & 255,\n            width & 255,\n            height >>> 8 & 255,\n            height & 255,\n            0, 72, 0, 0,\n            0, 72, 0, 0,\n            0, 0, 0, 0,\n            0, 1,\n            0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0,\n            0, 24,\n            255, 255\n        ]);\n        return MP4.box(MP4.types.hvc1, data, MP4.box(MP4.types.hvcC, avcc))\n    }\n\n    // Movie Extends box\n\n    static mvex(meta) {\n        return MP4.box(MP4.types.mvex, MP4.trex(meta))\n    }\n\n    // Track Extends box\n    static trex(meta) {\n        let trackId = meta.id;\n        let data = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\n            (trackId >>> 24) & 0xFF, // track_ID\n            (trackId >>> 16) & 0xFF,\n            (trackId >>> 8) & 0xFF,\n            (trackId) & 0xFF,\n            0x00, 0x00, 0x00, 0x01,  // default_sample_description_index\n            0x00, 0x00, 0x00, 0x00,  // default_sample_duration\n            0x00, 0x00, 0x00, 0x00,  // default_sample_size\n            0x00, 0x01, 0x00, 0x01   // default_sample_flags\n        ]);\n        return MP4.box(MP4.types.trex, data);\n    }\n\n    // Movie fragment box\n    static moof(track, baseMediaDecodeTime) {\n        return MP4.box(MP4.types.moof, MP4.mfhd(track.sequenceNumber), MP4.traf(track, baseMediaDecodeTime))\n    }\n\n    static mfhd(sequenceNumber) {\n        let data = new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,\n            (sequenceNumber >>> 24) & 0xFF,  // sequence_number: int32\n            (sequenceNumber >>> 16) & 0xFF,\n            (sequenceNumber >>> 8) & 0xFF,\n            (sequenceNumber) & 0xFF\n        ]);\n        return MP4.box(MP4.types.mfhd, data);\n    }\n\n    // Track fragment box\n    static traf(track, baseMediaDecodeTime) {\n        let trackId = track.id;\n\n        // Track fragment header box\n        let tfhd = MP4.box(MP4.types.tfhd, new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) & flags\n            (trackId >>> 24) & 0xFF, // track_ID\n            (trackId >>> 16) & 0xFF,\n            (trackId >>> 8) & 0xFF,\n            (trackId) & 0xFF\n        ]));\n        // Track Fragment Decode Time\n        let tfdt = MP4.box(MP4.types.tfdt, new Uint8Array([\n            0x00, 0x00, 0x00, 0x00,  // version(0) & flags\n            (baseMediaDecodeTime >>> 24) & 0xFF,  // baseMediaDecodeTime: int32\n            (baseMediaDecodeTime >>> 16) & 0xFF,\n            (baseMediaDecodeTime >>> 8) & 0xFF,\n            (baseMediaDecodeTime) & 0xFF\n        ]));\n        let sdtp = MP4.sdtp(track);\n        let trun = MP4.trun(track, sdtp.byteLength + 16 + 16 + 8 + 16 + 8 + 8);\n\n        return MP4.box(MP4.types.traf, tfhd, tfdt, trun, sdtp);\n    }\n\n    // Sample Dependency Type box\n    static sdtpOld(A) {\n        let e = new Uint8Array(4 + 1),\n            t = A.flags;\n        return e[4] = t.isLeading << 6 | t.dependsOn << 4 | t.isDependedOn << 2 | t.hasRedundancy, MP4.box(MP4.types.sdtp, e)\n    }\n\n    static sdtp(track) {\n        let data = new Uint8Array(4 + 1);\n        let flags = track.flags;\n        data[4] = flags.isLeading << 6\n            | flags.dependsOn << 4\n            | flags.isDependedOn << 2\n            | flags.hasRedundancy;\n        return MP4.box(MP4.types.sdtp, data);\n    }\n\n    static trun(track, offset) {\n        let dataSize = 12 + 16;\n        let data = new Uint8Array(dataSize);\n        offset += 8 + dataSize;\n\n        data.set([\n            0x00, 0x00, 0x0F, 0x01,      // version(0) & flags\n            0x00, 0x00, 0x00, 0x01, // sample_count\n            (offset >>> 24) & 0xFF,      // data_offset\n            (offset >>> 16) & 0xFF,\n            (offset >>> 8) & 0xFF,\n            (offset) & 0xFF\n        ], 0);\n\n        let duration = track.duration;\n        let size = track.size;\n        let flags = track.flags;\n        let cts = track.cts;\n\n        data.set([\n            (duration >>> 24) & 0xFF,  // sample_duration\n            (duration >>> 16) & 0xFF,\n            (duration >>> 8) & 0xFF,\n            (duration) & 0xFF,\n            (size >>> 24) & 0xFF,      // sample_size\n            (size >>> 16) & 0xFF,\n            (size >>> 8) & 0xFF,\n            (size) & 0xFF,\n            (flags.isLeading << 2) | flags.dependsOn,  // sample_flags\n            (flags.isDependedOn << 6) | (flags.hasRedundancy << 4) | flags.isNonSync,\n            0x00, 0x00,                // sample_degradation_priority\n            (cts >>> 24) & 0xFF,       // sample_composition_time_offset\n            (cts >>> 16) & 0xFF,\n            (cts >>> 8) & 0xFF,\n            (cts) & 0xFF\n        ], 12);\n\n        return MP4.box(MP4.types.trun, data);\n    }\n\n\n    static mdat(data) {\n        return MP4.box(MP4.types.mdat, data)\n    }\n}\n\nMP4.init();\n\nexport default MP4;\n","/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n// Exponential-Golomb buffer decoder\nclass ExpGolomb {\n\n    constructor(uint8array) {\n        this.TAG = 'ExpGolomb';\n\n        this._buffer = uint8array;\n        this._buffer_index = 0;\n        this._total_bytes = uint8array.byteLength;\n        this._total_bits = uint8array.byteLength * 8;\n        this._current_word = 0;\n        this._current_word_bits_left = 0;\n    }\n\n    destroy() {\n        this._buffer = null;\n    }\n\n    _fillCurrentWord() {\n        let buffer_bytes_left = this._total_bytes - this._buffer_index;\n        if (buffer_bytes_left <= 0) {\n            // throw new IllegalStateException('ExpGolomb: _fillCurrentWord() but no bytes available');\n        }\n\n        let bytes_read = Math.min(4, buffer_bytes_left);\n        let word = new Uint8Array(4);\n        word.set(this._buffer.subarray(this._buffer_index, this._buffer_index + bytes_read));\n        this._current_word = new DataView(word.buffer).getUint32(0, false);\n\n        this._buffer_index += bytes_read;\n        this._current_word_bits_left = bytes_read * 8;\n    }\n\n    readBits(bits) {\n        if (bits > 32) {\n            // throw new InvalidArgumentException('ExpGolomb: readBits() bits exceeded max 32bits!');\n        }\n\n        if (bits <= this._current_word_bits_left) {\n            let result = this._current_word >>> (32 - bits);\n            this._current_word <<= bits;\n            this._current_word_bits_left -= bits;\n            return result;\n        }\n\n        let result = this._current_word_bits_left ? this._current_word : 0;\n        result = result >>> (32 - this._current_word_bits_left);\n        let bits_need_left = bits - this._current_word_bits_left;\n\n        this._fillCurrentWord();\n        let bits_read_next = Math.min(bits_need_left, this._current_word_bits_left);\n\n        let result2 = this._current_word >>> (32 - bits_read_next);\n        this._current_word <<= bits_read_next;\n        this._current_word_bits_left -= bits_read_next;\n\n        result = (result << bits_read_next) | result2;\n        return result;\n    }\n\n    readBool() {\n        return this.readBits(1) === 1;\n    }\n\n    readByte() {\n        return this.readBits(8);\n    }\n\n    _skipLeadingZero() {\n        let zero_count;\n        for (zero_count = 0; zero_count < this._current_word_bits_left; zero_count++) {\n            if (0 !== (this._current_word & (0x80000000 >>> zero_count))) {\n                this._current_word <<= zero_count;\n                this._current_word_bits_left -= zero_count;\n                return zero_count;\n            }\n        }\n        this._fillCurrentWord();\n        return zero_count + this._skipLeadingZero();\n    }\n\n    readUEG() {  // unsigned exponential golomb\n        let leading_zeros = this._skipLeadingZero();\n        return this.readBits(leading_zeros + 1) - 1;\n    }\n\n    readSEG() {  // signed exponential golomb\n        let value = this.readUEG();\n        if (value & 0x01) {\n            return (value + 1) >>> 1;\n        } else {\n            return -1 * (value >>> 1);\n        }\n    }\n\n}\n\nexport default ExpGolomb;\n","/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ExpGolomb from './exp-golomb.js';\n\nclass SPSParser {\n\n    static _ebsp2rbsp(uint8array) {\n        let src = uint8array;\n        let src_length = src.byteLength;\n        let dst = new Uint8Array(src_length);\n        let dst_idx = 0;\n\n        for (let i = 0; i < src_length; i++) {\n            if (i >= 2) {\n                // Unescape: Skip 0x03 after 00 00\n                if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n                    continue;\n                }\n            }\n            dst[dst_idx] = src[i];\n            dst_idx++;\n        }\n\n        return new Uint8Array(dst.buffer, 0, dst_idx);\n    }\n\n    // 解析 SPS\n    // https://zhuanlan.zhihu.com/p/27896239\n    static parseSPS(uint8array) {\n        let rbsp = SPSParser._ebsp2rbsp(uint8array);\n        let gb = new ExpGolomb(rbsp);\n\n        gb.readByte();\n        // 标识当前H.264码流的profile。\n        // 我们知道，H.264中定义了三种常用的档次profile： 基准档次：baseline profile;主要档次：main profile; 扩展档次：extended profile;\n\n        let profile_idc = gb.readByte();  // profile_idc\n        gb.readByte();  // constraint_set_flags[5] + reserved_zero[3]\n        // 标识当前码流的Level。编码的Level定义了某种条件下的最大视频分辨率、最大视频帧率等参数，码流所遵从的level由level_idc指定。\n        let level_idc = gb.readByte();  // level_idc\n        // 表示当前的序列参数集的id。通过该id值，图像参数集pps可以引用其代表的sps中的参数。\n        gb.readUEG();  // seq_parameter_set_id\n\n        let profile_string = SPSParser.getProfileString(profile_idc);\n\n        let level_string = SPSParser.getLevelString(level_idc);\n\n        let chroma_format_idc = 1;\n        let chroma_format = 420;\n        let chroma_format_table = [0, 420, 422, 444];\n        let bit_depth = 8;\n\n        //\n        if (profile_idc === 100 || profile_idc === 110 || profile_idc === 122 ||\n            profile_idc === 244 || profile_idc === 44 || profile_idc === 83 ||\n            profile_idc === 86 || profile_idc === 118 || profile_idc === 128 ||\n            profile_idc === 138 || profile_idc === 144) {\n            //\n            chroma_format_idc = gb.readUEG();\n\n            if (chroma_format_idc === 3) {\n                gb.readBits(1);  // separate_colour_plane_flag\n            }\n            if (chroma_format_idc <= 3) {\n                chroma_format = chroma_format_table[chroma_format_idc];\n            }\n\n            bit_depth = gb.readUEG() + 8;  // bit_depth_luma_minus8\n            gb.readUEG();  // bit_depth_chroma_minus8\n            gb.readBits(1);  // qpprime_y_zero_transform_bypass_flag\n            if (gb.readBool()) {  // seq_scaling_matrix_present_flag\n                let scaling_list_count = (chroma_format_idc !== 3) ? 8 : 12;\n                for (let i = 0; i < scaling_list_count; i++) {\n                    if (gb.readBool()) {  // seq_scaling_list_present_flag\n                        if (i < 6) {\n                            SPSParser._skipScalingList(gb, 16);\n                        } else {\n                            SPSParser._skipScalingList(gb, 64);\n                        }\n                    }\n                }\n            }\n        }\n        // 用于计算MaxFrameNum的值。计算公式为MaxFrameNum = 2^(log2_max_frame_num_minus4 +\n        gb.readUEG();  // log2_max_frame_num_minus4\n        // 表示解码picture order count(POC)的方法。POC是另一种计量图像序号的方式，与frame_num有着不同的计算方法。该语法元素的取值为0、1或2。\n        let pic_order_cnt_type = gb.readUEG();\n        if (pic_order_cnt_type === 0) {\n            gb.readUEG();  // log2_max_pic_order_cnt_lsb_minus_4\n        } else if (pic_order_cnt_type === 1) {\n            gb.readBits(1);  // delta_pic_order_always_zero_flag\n            gb.readSEG();  // offset_for_non_ref_pic\n            gb.readSEG();  // offset_for_top_to_bottom_field\n            let num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n            for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\n                gb.readSEG();  // offset_for_ref_frame\n            }\n        }\n        // 用于表示参考帧的最大数目。\n        let ref_frames = gb.readUEG();  // max_num_ref_frames\n        // 标识位，说明frame_num中是否允许不连续的值。\n        gb.readBits(1);  // gaps_in_frame_num_value_allowed_flag\n        // 用于计算图像的宽度。单位为宏块个数，因此图像的实际宽度为:\n        let pic_width_in_mbs_minus1 = gb.readUEG();\n        // 使用PicHeightInMapUnits来度量视频中一帧图像的高度。\n        // PicHeightInMapUnits并非图像明确的以像素或宏块为单位的高度，而需要考虑该宏块是帧编码或场编码。PicHeightInMapUnits的计算方式为：\n        let pic_height_in_map_units_minus1 = gb.readUEG();\n        // 标识位，说明宏块的编码方式。当该标识位为0时，宏块可能为帧编码或场编码；\n        // 该标识位为1时，所有宏块都采用帧编码。根据该标识位取值不同，PicHeightInMapUnits的含义也不同，\n        // 为0时表示一场数据按宏块计算的高度，为1时表示一帧数据按宏块计算的高度。\n        let frame_mbs_only_flag = gb.readBits(1);\n        if (frame_mbs_only_flag === 0) {\n            // 标识位，说明是否采用了宏块级的帧场自适应编码。当该标识位为0时，不存在帧编码和场编码之间的切换；当标识位为1时，宏块可能在帧编码和场编码模式之间进行选择。\n            gb.readBits(1);  // mb_adaptive_frame_field_flag\n        }\n        // 标识位，用于B_Skip、B_Direct模式运动矢量的推导计算。\n        gb.readBits(1);  // direct_8x8_inference_flag\n\n        let frame_crop_left_offset = 0;\n        let frame_crop_right_offset = 0;\n        let frame_crop_top_offset = 0;\n        let frame_crop_bottom_offset = 0;\n\n        let frame_cropping_flag = gb.readBool();\n        if (frame_cropping_flag) {\n            frame_crop_left_offset = gb.readUEG();\n            frame_crop_right_offset = gb.readUEG();\n            frame_crop_top_offset = gb.readUEG();\n            frame_crop_bottom_offset = gb.readUEG();\n        }\n\n        let sar_width = 1, sar_height = 1;\n        let fps = 0, fps_fixed = true, fps_num = 0, fps_den = 0;\n        // 标识位，说明SPS中是否存在VUI信息。\n        let vui_parameters_present_flag = gb.readBool();\n        if (vui_parameters_present_flag) {\n            if (gb.readBool()) {  // aspect_ratio_info_present_flag\n                let aspect_ratio_idc = gb.readByte();\n                let sar_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n                let sar_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33,  99, 3, 2, 1];\n\n                if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n                    sar_width = sar_w_table[aspect_ratio_idc - 1];\n                    sar_height = sar_h_table[aspect_ratio_idc - 1];\n                } else if (aspect_ratio_idc === 255) {\n                    sar_width = gb.readByte() << 8 | gb.readByte();\n                    sar_height = gb.readByte() << 8 | gb.readByte();\n                }\n            }\n\n            if (gb.readBool()) {  // overscan_info_present_flag\n                gb.readBool();  // overscan_appropriate_flag\n            }\n            if (gb.readBool()) {  // video_signal_type_present_flag\n                gb.readBits(4);  // video_format & video_full_range_flag\n                if (gb.readBool()) {  // colour_description_present_flag\n                    gb.readBits(24);  // colour_primaries & transfer_characteristics & matrix_coefficients\n                }\n            }\n            if (gb.readBool()) {  // chroma_loc_info_present_flag\n                gb.readUEG();  // chroma_sample_loc_type_top_field\n                gb.readUEG();  // chroma_sample_loc_type_bottom_field\n            }\n            if (gb.readBool()) {  // timing_info_present_flag\n                let num_units_in_tick = gb.readBits(32);\n                let time_scale = gb.readBits(32);\n                fps_fixed = gb.readBool();  // fixed_frame_rate_flag\n\n                fps_num = time_scale;\n                fps_den = num_units_in_tick * 2;\n                fps = fps_num / fps_den;\n            }\n        }\n\n        let sarScale = 1;\n        if (sar_width !== 1 || sar_height !== 1) {\n            sarScale = sar_width / sar_height;\n        }\n\n        let crop_unit_x = 0, crop_unit_y = 0;\n        if (chroma_format_idc === 0) {\n            crop_unit_x = 1;\n            crop_unit_y = 2 - frame_mbs_only_flag;\n        } else {\n            let sub_wc = (chroma_format_idc === 3) ? 1 : 2;\n            let sub_hc = (chroma_format_idc === 1) ? 2 : 1;\n            crop_unit_x = sub_wc;\n            crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n        }\n\n        let codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n        let codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n        codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n        codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n        let present_width = Math.ceil(codec_width * sarScale);\n\n        gb.destroy();\n        gb = null;\n\n\n        // 解析出来的SPS 内容。\n        return {\n            profile_string: profile_string,  // baseline, high, high10, ...\n            level_string: level_string,  // 3, 3.1, 4, 4.1, 5, 5.1, ...\n            bit_depth: bit_depth,  // 8bit, 10bit, ...\n            ref_frames: ref_frames,\n            chroma_format: chroma_format,  // 4:2:0, 4:2:2, ...\n            chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n            frame_rate: {\n                fixed: fps_fixed,\n                fps: fps,\n                fps_den: fps_den,\n                fps_num: fps_num\n            },\n\n            sar_ratio: {\n                width: sar_width,\n                height: sar_height\n            },\n\n            codec_size: {\n                width: codec_width,\n                height: codec_height\n            },\n\n            present_size: {\n                width: present_width,\n                height: codec_height\n            }\n        };\n    }\n\n    static _skipScalingList(gb, count) {\n        let last_scale = 8, next_scale = 8;\n        let delta_scale = 0;\n        for (let i = 0; i < count; i++) {\n            if (next_scale !== 0) {\n                delta_scale = gb.readSEG();\n                next_scale = (last_scale + delta_scale + 256) % 256;\n            }\n            last_scale = (next_scale === 0) ? last_scale : next_scale;\n        }\n    }\n\n    // profile_idc = 66 → baseline profile;\n    // profile_idc = 77 → main profile;\n    // profile_idc = 88 → extended profile;\n    // 在新版的标准中，还包括了High、High 10、High 4:2:2、High 4:4:4、High 10 Intra、High\n    // 4:2:2 Intra、High 4:4:4 Intra、CAVLC 4:4:4 Intra\n    static getProfileString(profile_idc) {\n        switch (profile_idc) {\n            case 66:\n                return 'Baseline';\n            case 77:\n                return 'Main';\n            case 88:\n                return 'Extended';\n            case 100:\n                return 'High';\n            case 110:\n                return 'High10';\n            case 122:\n                return 'High422';\n            case 244:\n                return 'High444';\n            default:\n                return 'Unknown';\n        }\n    }\n\n    static getLevelString(level_idc) {\n        return (level_idc / 10).toFixed(1);\n    }\n\n    static getChromaFormatString(chroma) {\n        switch (chroma) {\n            case 420:\n                return '4:2:0';\n            case 422:\n                return '4:2:2';\n            case 444:\n                return '4:4:4';\n            default:\n                return 'Unknown';\n        }\n    }\n\n}\n\nexport default SPSParser;","import SPSParser from './h264-sps-parser.js';\n\n//\nexport function parseAVCDecoderConfigurationRecord(arrayBuffer) {\n    const meta = {}\n    const v = new DataView(arrayBuffer.buffer);\n    let version = v.getUint8(0);  // configurationVersion\n    let avcProfile = v.getUint8(1);  // avcProfileIndication\n    let profileCompatibility = v.getUint8(2);  // profile_compatibil\n    let avcLevel = v.getUint8(3);  // AVCLevelIndication\n\n    if (version !== 1 || avcProfile === 0) {\n        // this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord');\n\n        return;\n    }\n\n    const _naluLengthSize = (v.getUint8(4) & 3) + 1;  // lengthSizeMinusOne\n\n    if (_naluLengthSize !== 3 && _naluLengthSize !== 4) {  // holy shit!!!\n        // this._onError(DemuxErrors.FORMAT_ERROR, `Flv: Strange NaluLengthSizeMinusOne: ${_naluLengthSize - 1}`);\n        return;\n    }\n    let spsCount = v.getUint8(5) & 31;  // numOfSequenceParameterSets\n\n    if (spsCount === 0) {\n        // this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord: No SPS');\n        return;\n    } else if (spsCount > 1) {\n        // Log.w(this.TAG, `Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ${spsCount}`);\n    }\n\n    let offset = 6;\n    for (let i = 0; i < spsCount; i++) {\n        let len = v.getUint16(offset, false);  // sequenceParameterSetLength\n        offset += 2;\n\n        if (len === 0) {\n            continue;\n        }\n\n        // Notice: Nalu without startcode header (00 00 00 01)\n        let sps = new Uint8Array(arrayBuffer.buffer, offset, len);\n        offset += len;\n        // flv.js作者选择了自己来解析这个数据结构，也是迫不得已，因为JS环境下没有ffmpeg，解析这个结构主要是为了提取 sps和pps。虽然理论上sps允许有多个，但其实一般就一个。\n        // packetTtype 为 1 表示 NALU，NALU= network abstract layer unit，这是H.264的概念，网络抽象层数据单元，其实简单理解就是一帧视频数据。\n        // pps的信息没什么用，所以作者只实现了sps的分析器，说明作者下了很大功夫去学习264的标准，其中的Golomb解码还是挺复杂的，能解对不容易，我在PC和手机平台都是用ffmpeg去解析的。\n        // SPS里面包括了视频分辨率，帧率，profile level等视频重要信息。\n        let config = SPSParser.parseSPS(sps);\n        if (i !== 0) {\n            // ignore other sps's config\n            continue;\n        }\n\n        meta.codecWidth = config.codec_size.width;\n        meta.codecHeight = config.codec_size.height;\n        meta.presentWidth = config.present_size.width;\n        meta.presentHeight = config.present_size.height;\n\n        meta.profile = config.profile_string;\n        meta.level = config.level_string;\n        meta.bitDepth = config.bit_depth;\n        meta.chromaFormat = config.chroma_format;\n        meta.sarRatio = config.sar_ratio;\n        meta.frameRate = config.frame_rate;\n\n        if (config.frame_rate.fixed === false ||\n            config.frame_rate.fps_num === 0 ||\n            config.frame_rate.fps_den === 0) {\n            meta.frameRate = {};\n        }\n\n        let fps_den = meta.frameRate.fps_den;\n        let fps_num = meta.frameRate.fps_num;\n\n        meta.refSampleDuration = meta.timescale * (fps_den / fps_num);\n\n        let codecArray = sps.subarray(1, 4);\n\n        let codecString = 'avc1.';\n        for (let j = 0; j < 3; j++) {\n            let h = codecArray[j].toString(16);\n            if (h.length < 2) {\n                h = '0' + h;\n            }\n            codecString += h;\n        }\n        // codec\n        meta.codec = codecString;\n    }\n\n    let ppsCount = v.getUint8(offset);  // numOfPictureParameterSets\n    if (ppsCount === 0) {\n        // this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord: No PPS');\n        return;\n    } else if (ppsCount > 1) {\n        // Log.w(this.TAG, `Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ${ppsCount}`);\n    }\n\n    offset++;\n    for (let i = 0; i < ppsCount; i++) {\n        let len = v.getUint16(offset, false);  // pictureParameterSetLength\n        offset += 2;\n\n        if (len === 0) {\n            continue;\n        }\n        let pps = new Uint8Array(arrayBuffer.buffer, offset, len);\n\n        // pps is useless for extracting video information\n        offset += len;\n    }\n\n    meta.videoType = 'avc';\n\n    // meta.avcc = arrayBuffer;\n    return meta;\n}\n","class SPSParser {\n    static parseSPS(uint8array) {\n\n    }\n}\n\nexport default SPSParser\n","import {H265_NAL_TYPE} from \"../constant\";\nimport SPSParser from \"./h265-sps-parser\";\n\nexport function parseHEVCDecoderConfigurationRecord(arrayBuffer) {\n    const meta = {}\n    meta.videoType = 'hevc'\n    let offset = 28 - 5;\n    //\n    const vpsTag = arrayBuffer[offset];\n\n    if (vpsTag !== H265_NAL_TYPE.vps) {\n        return meta;\n    }\n\n    offset += 2;\n    offset += 1;\n    const vpsLength = arrayBuffer[offset + 1] | (arrayBuffer[offset] << 8);\n    offset += 2;\n    const vpsData = arrayBuffer.slice(offset, (offset + vpsLength));\n    console.log(Uint8Array.from(vpsData));\n    offset += vpsLength;\n\n    const spsTag = arrayBuffer[offset]\n    if (spsTag !== H265_NAL_TYPE.sps) {\n        return meta;\n    }\n    offset += 2;\n    offset += 1;\n    const spsLength = arrayBuffer[offset + 1] | (arrayBuffer[offset] << 8);\n\n    offset += 2;\n    const spsData = arrayBuffer.slice(offset, (offset + spsLength))\n    console.log(Uint8Array.from(spsData));\n\n    offset += spsLength;\n\n    const ppsTag = arrayBuffer[offset];\n\n    if (ppsTag !== H265_NAL_TYPE.pps) {\n        return meta;\n    }\n    offset += 2;\n    offset += 1;\n    const ppsLength = arrayBuffer[offset + 1] | (arrayBuffer[offset] << 8);\n    offset += 2;\n    const ppsData = arrayBuffer.slice(offset, (offset + ppsLength))\n    console.log(Uint8Array.from(ppsData));\n\n    let sps = Uint8Array.from(spsData);\n    let config = SPSParser.parseSPS(sps);\n\n    meta.codecWidth = config.codec_size.width;\n    meta.codecHeight = config.codec_size.height;\n    meta.presentWidth = config.present_size.width;\n    meta.presentHeight = config.present_size.height;\n\n    meta.profile = config.profile_string;\n    meta.level = config.level_string;\n    meta.bitDepth = config.bit_depth;\n    meta.chromaFormat = config.chroma_format;\n    meta.sarRatio = config.sar_ratio;\n\n    return meta;\n}\n","import Emitter from \"../utils/emitter\";\nimport {EVENTS, FRAG_DURATION, MEDIA_SOURCE_STATE, MP4_CODECS, VIDEO_ENC_CODE} from \"../constant\";\nimport MP4 from \"../remux/fmp4-generator\";\nimport {parseAVCDecoderConfigurationRecord} from \"../utils/h264\";\nimport {parseHEVCDecoderConfigurationRecord} from \"../utils/h265\";\n\nexport default class MseDecoder extends Emitter {\n    constructor(player) {\n        super();\n        this.player = player;\n        this.isAvc = true;\n        this.mediaSource = new window.MediaSource();\n        this.sourceBuffer = null;\n        this.hasInit = false;\n        this.isInitInfo = false;\n        this.cacheTrack = {};\n        this.timeInit = false;\n        this.sequenceNumber = 0;\n        this.mediaSourceOpen = false;\n        this.bufferList = [];\n        this.decodeInterval = null;\n        this.dropping = false;\n        this.player.video.$videoElement.src = window.URL.createObjectURL(this.mediaSource);\n        const {\n            debug,\n            events: {proxy},\n        } = player;\n\n\n        proxy(this.mediaSource, 'sourceopen', () => {\n            this.mediaSourceOpen = true;\n            this.player.emit(EVENTS.mseSourceOpen)\n        })\n\n        proxy(this.mediaSource, 'sourceclose', () => {\n            this.player.emit(EVENTS.mseSourceClose);\n        })\n\n        player.debug.log('MediaSource', 'init')\n    }\n\n    get state() {\n        return this.mediaSource.readyState\n    }\n\n    get isStateOpen() {\n        return this.state === MEDIA_SOURCE_STATE.open;\n    }\n\n    get isStateClosed() {\n        return this.state === MEDIA_SOURCE_STATE.closed;\n    }\n\n    get isStateEnded() {\n        return this.state === MEDIA_SOURCE_STATE.ended;\n    }\n\n    get duration() {\n        return this.mediaSource.duration\n    }\n\n    set duration(duration) {\n        this.mediaSource.duration = duration\n    }\n\n    decodeVideo(payload, ts, isIframe) {\n        this.player.debug.log('MediaSource decoder', 'decodeVideo');\n        if (!this.hasInit) {\n            if (isIframe && payload[1] === 0) {\n                this._decodeConfigurationRecord(payload, ts, isIframe)\n                this.hasInit = true;\n            }\n        } else {\n            this.bufferList.push({\n                payload,\n                ts,\n                isIframe\n            })\n            if (!this.decodeInterval) {\n                this._doDecode();\n                this.decodeInterval = setInterval(() => {\n                    this._doDecode();\n                }, FRAG_DURATION)\n            }\n        }\n    }\n\n    _doDecode() {\n        const bufferItem = this.bufferList.shift();\n        if (bufferItem) {\n            this._decodeVideo(bufferItem.payload, bufferItem.ts, bufferItem.isIframe);\n        }\n    }\n\n\n    _decodeConfigurationRecord(payload, ts, isIframe) {\n        const player = this.player;\n\n        const videoCodec = (payload[0] & 0x0F);\n        player.video.updateVideoInfo({\n            encTypeCode: videoCodec\n        })\n        let data = payload.slice(5);\n        let config = {};\n\n        if (videoCodec === VIDEO_ENC_CODE.h264) {\n            config = parseAVCDecoderConfigurationRecord(data)\n        } else if (videoCodec === VIDEO_ENC_CODE.h265) {\n            config = parseHEVCDecoderConfigurationRecord(data);\n        }\n        const metaData = {\n            id: 1, // video tag data\n            type: 'video',\n            timescale: 1000,\n            duration: 0,\n            avcc: data,\n            codecWidth: config.codecWidth,\n            codecHeight: config.codecHeight,\n            videoType: config.videoType\n        }\n        // ftyp\n        const metaBox = MP4.generateInitSegment(metaData);\n        this.isAvc = true;\n        this.appendBuffer(metaBox.buffer);\n        this.sequenceNumber = 0;\n        this.cacheTrack = null;\n        this.timeInit = false;\n    }\n\n    //\n    _decodeVideo(payload, ts, isIframe) {\n        const player = this.player;\n        let arrayBuffer = payload.slice(5);\n        let bytes = arrayBuffer.byteLength;\n        let cts = 0;\n        let dts = ts;\n\n        const $video = player.video.$videoElement;\n\n        if ($video.buffered.length > 1) {\n            this.removeBuffer($video.buffered.start(0), $video.buffered.end(0));\n            this.timeInit = false;\n        }\n        if ($video.drop && dts - this.cacheTrack.dts > 1000) {\n            $video.drop = false;\n            this.cacheTrack = {};\n        } else if (this.cacheTrack && dts > this.cacheTrack.dts) {\n            // 需要额外加8个size\n            let mdatBytes = 8 + this.cacheTrack.size;\n            let mdatbox = new Uint8Array(mdatBytes);\n            mdatbox[0] = mdatBytes >>> 24 & 255;\n            mdatbox[1] = mdatBytes >>> 16 & 255;\n            mdatbox[2] = mdatBytes >>> 8 & 255;\n            mdatbox[3] = mdatBytes & 255;\n            mdatbox.set(MP4.types.mdat, 4);\n            mdatbox.set(this.cacheTrack.data, 8);\n\n            this.cacheTrack.duration = dts - this.cacheTrack.dts;\n            // moof\n            let moofbox = MP4.moof(this.cacheTrack, this.cacheTrack.dts);\n            let result = new Uint8Array(moofbox.byteLength + mdatbox.byteLength);\n            result.set(moofbox, 0);\n            result.set(mdatbox, moofbox.byteLength);\n            // appendBuffer\n            this.appendBuffer(result.buffer)\n            player.handleRender();\n            player.updateStats({fps: true, ts: 0, buf: player.demux.delay})\n        } else {\n            player.debug.log('MediaSource', 'timeInit set false , cacheTrack = {}');\n            this.timeInit = false;\n            this.cacheTrack = {};\n        }\n\n        this.cacheTrack.id = 1;\n        this.cacheTrack.sequenceNumber = ++this.sequenceNumber;\n        this.cacheTrack.size = bytes;\n        this.cacheTrack.dts = dts;\n        this.cacheTrack.cts = cts;\n        this.cacheTrack.isKeyframe = isIframe;\n        this.cacheTrack.data = arrayBuffer;\n        //\n        this.cacheTrack.flags = {\n            isLeading: 0,\n            dependsOn: isIframe ? 2 : 1,\n            isDependedOn: isIframe ? 1 : 0,\n            hasRedundancy: 0,\n            isNonSync: isIframe ? 0 : 1\n        }\n\n        //\n        if (!this.timeInit && $video.buffered.length === 1) {\n            player.debug.log('MediaSource', 'timeInit set true');\n            this.timeInit = true;\n            $video.currentTime = $video.buffered.end(0);\n        }\n\n        if (!this.isInitInfo && $video.videoWidth > 0 && $video.videoHeight > 0) {\n            player.debug.log('MediaSource', `updateVideoInfo: ${$video.videoWidth},${$video.videoHeight}`);\n            player.video.updateVideoInfo({\n                width: $video.videoWidth,\n                height: $video.videoHeight\n            })\n            player.video.initCanvasViewSize();\n            this.isInitInfo = true;\n        }\n    }\n\n    appendBuffer(buffer) {\n        const {\n            debug,\n            events: {proxy},\n        } = this.player;\n\n        if (this.sourceBuffer === null) {\n            this.sourceBuffer = this.mediaSource.addSourceBuffer(MP4_CODECS.avc);\n            proxy(this.sourceBuffer, 'error', (error) => {\n                this.player.emit(EVENTS.mseSourceBufferError, error);\n            })\n        }\n\n        if (this.sourceBuffer.updating === false && this.isStateOpen) {\n            this.sourceBuffer.appendBuffer(buffer);\n            return;\n        }\n\n        if (this.isStateClosed) {\n            this.player.emit(EVENTS.mseSourceBufferError, 'mediaSource is not attached to video or mediaSource is closed')\n        } else if (this.isStateEnded) {\n            this.player.emit(EVENTS.mseSourceBufferError, 'mediaSource is closed')\n        } else {\n            if (this.sourceBuffer.updating === true) {\n                this.player.emit(EVENTS.mseSourceBufferBusy);\n                this.dropSourceBuffer(true);\n            }\n        }\n    }\n\n    stop() {\n        if (this.isStateOpen) {\n            if (this.sourceBuffer) {\n                this.sourceBuffer.abort();\n            }\n        }\n        this.endOfStream();\n    }\n\n    dropSourceBuffer(flag) {\n        const video = this.player.video;\n        const $video = video.$videoElement;\n        this.dropping = flag;\n        if ($video.buffered.length > 0) {\n            if ($video.buffered.end(0) - $video.currentTime > 1) {\n                $video.currentTime = $video.buffered.end(0);\n            }\n        }\n    }\n\n\n    removeBuffer(start, end) {\n        if (this.isStateOpen) {\n            try {\n                this.sourceBuffer.remove(start, end)\n            } catch (e) {\n                console.error(e)\n            }\n        }\n    }\n\n    endOfStream() {\n        if (this.isStateOpen) {\n            this.mediaSource.endOfStream();\n        }\n    }\n\n    stopDecodeInterval() {\n        if (this.decodeInterval) {\n            clearInterval(this.decodeInterval);\n            this.decodeInterval = null;\n        }\n    }\n\n\n    destroy() {\n        this.stopDecodeInterval();\n        this.stop();\n        this.bufferList = [];\n        this.mediaSource = null;\n        this.mediaSourceOpen = false;\n        this.sourceBuffer = null;\n        this.hasInit = false;\n        this.isInitInfo = false;\n        this.sequenceNumber = 0;\n        this.cacheTrack = null;\n        this.timeInit = false;\n\n        this.player.debug.log('MediaSource', 'destroy')\n    }\n}\n","// tks: https://github.com/richtr/NoSleep.js\n\nconst WEBM = \"data:video/webm;base64,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\";\nconst MP4 = \"data:video/mp4;base64,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\";\n\n\n// Detect iOS browsers < version 10\nconst\n    oldIOS = () =>\n        typeof navigator !== \"undefined\" &&\n        parseFloat(\n            (\n                \"\" +\n                (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(\n                    navigator.userAgent\n                ) || [0, \"\"])[1]\n            )\n                .replace(\"undefined\", \"3_2\")\n                .replace(\"_\", \".\")\n                .replace(\"_\", \"\")\n        ) < 10 &&\n        !window.MSStream;\n\n// Detect native Wake Lock API support\nconst nativeWakeLock = () => \"wakeLock\" in navigator;\n\nexport default class NoSleep {\n    constructor(player) {\n        this.player = player;\n        this.enabled = false;\n        if (nativeWakeLock()) {\n            this._wakeLock = null;\n            const handleVisibilityChange = () => {\n                if (this._wakeLock !== null && document.visibilityState === \"visible\") {\n                    this.enable();\n                }\n            };\n            document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n            document.addEventListener(\"fullscreenchange\", handleVisibilityChange);\n        } else if (oldIOS()) {\n            this.noSleepTimer = null;\n        } else {\n            // Set up no sleep video element\n            this.noSleepVideo = document.createElement(\"video\");\n\n            this.noSleepVideo.setAttribute(\"title\", \"No Sleep\");\n            this.noSleepVideo.setAttribute(\"playsinline\", \"\");\n\n            this._addSourceToVideo(this.noSleepVideo, \"webm\", WEBM);\n            this._addSourceToVideo(this.noSleepVideo, \"mp4\", MP4);\n\n            this.noSleepVideo.addEventListener(\"loadedmetadata\", () => {\n                if (this.noSleepVideo.duration <= 1) {\n                    // webm source\n                    this.noSleepVideo.setAttribute(\"loop\", \"\");\n                } else {\n                    // mp4 source\n                    this.noSleepVideo.addEventListener(\"timeupdate\", () => {\n                        if (this.noSleepVideo.currentTime > 0.5) {\n                            this.noSleepVideo.currentTime = Math.random();\n                        }\n                    });\n                }\n            });\n        }\n    }\n\n    _addSourceToVideo(element, type, dataURI) {\n        var source = document.createElement(\"source\");\n        source.src = dataURI;\n        source.type = `video/${type}`;\n        element.appendChild(source);\n    }\n\n    get isEnabled() {\n        return this.enabled;\n    }\n\n    enable() {\n        const debug = this.player.debug;\n        if (nativeWakeLock()) {\n            return navigator.wakeLock\n                .request(\"screen\")\n                .then((wakeLock) => {\n                    this._wakeLock = wakeLock;\n                    this.enabled = true;\n                    debug.log('wakeLock', 'Wake Lock active.')\n                    this._wakeLock.addEventListener(\"release\", () => {\n                        // ToDo: Potentially emit an event for the page to observe since\n                        // Wake Lock releases happen when page visibility changes.\n                        // (https://web.dev/wakelock/#wake-lock-lifecycle)\n                        debug.log('wakeLock', 'Wake Lock released.')\n                    });\n                })\n                .catch((err) => {\n                    this.enabled = false;\n                    debug.error('wakeLock', `${err.name}, ${err.message}`)\n                    throw err;\n                });\n        } else if (oldIOS()) {\n            this.disable();\n            this.noSleepTimer = window.setInterval(() => {\n                if (!document.hidden) {\n                    window.location.href = window.location.href.split(\"#\")[0];\n                    window.setTimeout(window.stop, 0);\n                }\n            }, 15000);\n            this.enabled = true;\n            return Promise.resolve();\n        } else {\n            let playPromise = this.noSleepVideo.play();\n            return playPromise\n                .then((res) => {\n                    this.enabled = true;\n                    return res;\n                })\n                .catch((err) => {\n                    this.enabled = false;\n                    throw err;\n                });\n        }\n    }\n\n    disable() {\n        const debug = this.player.debug;\n        if (nativeWakeLock()) {\n            if (this._wakeLock) {\n                this._wakeLock.release();\n            }\n            this._wakeLock = null;\n        } else if (oldIOS()) {\n            if (this.noSleepTimer) {\n                debug.warn('wakeLock', 'NoSleep now disabled for older iOS devices.')\n\n                window.clearInterval(this.noSleepTimer);\n                this.noSleepTimer = null;\n            }\n        } else {\n            this.noSleepVideo.pause();\n        }\n        this.enabled = false;\n    }\n}\n","import {DEFAULT_PLAYER_OPTIONS, EVENTS, EVENTS_ERROR} from \"../constant\";\nimport Debug from \"../utils/debug\";\nimport Events from \"../utils/events\";\nimport property from './property';\nimport events from './events';\nimport {fpsStatus, isEmpty, isFullScreen, isNotEmpty, now, supportMSE, supportOffscreenV2, supportWCS} from \"../utils\";\nimport Video from \"../video\";\nimport Audio from \"../audio\";\nimport Stream from \"../stream\";\nimport Recorder from \"../recorder\";\nimport DecoderWorker from \"../worker/index\";\nimport Emitter from \"../utils/emitter\";\nimport Demux from \"../demux\";\nimport WebcodecsDecoder from \"../decoder/webcodecs\";\nimport Control from \"../control\";\nimport './style.scss'\nimport observer from \"./observer\";\nimport MseDecoder from \"../decoder/mediaSource\";\nimport NoSleep from \"../utils/noSleep\";\n\nexport default class Player extends Emitter {\n    constructor(container, options) {\n        super()\n        this.$container = container;\n        this._opt = Object.assign({}, DEFAULT_PLAYER_OPTIONS, options)\n        this.debug = new Debug(this);\n\n\n        if (this._opt.useWCS) {\n            this._opt.useWCS = supportWCS();\n        }\n\n        if (this._opt.useMSE) {\n            this._opt.useMSE = supportMSE();\n        }\n\n        // 如果使用mse则强制不允许 webcodecs\n        if (this._opt.useMSE) {\n            if (this._opt.useWCS) {\n                this.debug.log('Player', 'useWCS set true->false')\n            }\n\n            if (!this._opt.forceNoOffscreen) {\n                this.debug.log('Player', 'forceNoOffscreen set false->true')\n            }\n\n            this._opt.useWCS = false;\n            this._opt.forceNoOffscreen = true;\n        } else if (this._opt.useWCS) {\n\n        }\n\n\n        if (!this._opt.forceNoOffscreen) {\n            if (!supportOffscreenV2()) {\n                this._opt.forceNoOffscreen = true;\n                this._opt.useOffscreen = false;\n            } else {\n                this._opt.useOffscreen = true;\n            }\n        }\n\n\n        this._opt.hasControl = this._hasControl();\n        //\n        this._loading = false;\n        this._playing = false;\n        this._hasLoaded = false;\n\n        //\n        this._checkHeartTimeout = null;\n        this._checkLoadingTimeout = null;\n\n        //\n        this._startBpsTime = null;\n        this._isPlayingBeforePageHidden = false;\n        this._stats = {\n            buf: 0, // 当前缓冲区时长，单位毫秒,\n            fps: 0, // 当前视频帧率\n            abps: 0, // 当前音频码率，单位bit\n            vbps: 0, // 当前视频码率，单位bit\n            ts: 0 // 当前视频帧pts，单位毫秒\n        }\n\n        this._wakeLock = null;\n\n        property(this);\n\n        this.events = new Events(this);\n        this.video = new Video(this);\n        this.audio = new Audio(this);\n        this.recorder = new Recorder(this);\n        this.decoderWorker = new DecoderWorker(this);\n\n\n        this.stream = null;\n        this.demux = null;\n\n\n        if (this._opt.useWCS) {\n            this.webcodecsDecoder = new WebcodecsDecoder(this)\n        }\n\n        if (this._opt.useMSE) {\n            this.mseDecoder = new MseDecoder(this);\n        }\n\n        //\n        this.control = new Control(this);\n\n        this.keepScreenOn = new NoSleep(this);\n\n\n        events(this);\n        observer(this);\n\n\n        if (this._opt.useWCS) {\n            this.debug.log('Player', 'use WCS')\n        }\n\n        if (this._opt.useMSE) {\n            this.debug.log('Player', 'use MSE')\n        }\n\n        if (this._opt.useOffscreen) {\n            this.debug.log('Player', 'use offscreen')\n        }\n\n        this.debug.log('Player options', this._opt);\n    }\n\n\n    set fullscreen(value) {\n        this.emit(EVENTS.fullscreen, value);\n    }\n\n    get fullscreen() {\n        return isFullScreen() || this.webFullscreen;\n    }\n\n    set webFullscreen(value) {\n        this.emit(EVENTS.webFullscreen, value);\n    }\n\n    get webFullscreen() {\n        return this.$container.classList.contains('jessibuca-fullscreen-web')\n    }\n\n    get loaded() {\n        return this._hasLoaded;\n    }\n\n    //\n    set playing(value) {\n\n        if (value) {\n            // 将loading 设置为 false\n            this.loading = false;\n        }\n\n        if (this.playing !== value) {\n            this._playing = value;\n            this.emit(EVENTS.playing, value);\n            this.emit(EVENTS.volumechange, this.volume);\n\n            if (value) {\n                this.emit(EVENTS.play);\n            } else {\n                this.emit(EVENTS.pause);\n            }\n        }\n\n    }\n\n    get playing() {\n        return this._playing;\n    }\n\n    get volume() {\n        return this.audio.volume;\n    }\n\n    set volume(value) {\n        this.audio.setVolume(value);\n    }\n\n    set loading(value) {\n        if (this.loading !== value) {\n            this._loading = value;\n            this.emit(EVENTS.loading, this._loading);\n        }\n    }\n\n    get loading() {\n        return this._loading;\n    }\n\n    set recording(value) {\n        if (this.playing) {\n            if (value) {\n                this.recorder.startRecord();\n            } else {\n                this.recorder.stopRecordAndSave();\n            }\n        }\n    }\n\n    get recording() {\n        return this.recorder.recording;\n    }\n\n\n    /**\n     *\n     * @param options\n     */\n    updateOption(options) {\n        this._opt = Object.assign({}, this._opt, options)\n    }\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    init() {\n        return new Promise((resolve, reject) => {\n            if (!this.stream) {\n                this.stream = new Stream(this);\n            }\n\n            if (!this.demux) {\n                this.demux = new Demux(this);\n            }\n\n            if (this._opt.useWCS) {\n                if (!this.webcodecsDecoder) {\n                    this.webcodecsDecoder = new WebcodecsDecoder(this)\n                }\n            }\n\n            if (this._opt.useMSE) {\n                if (!this.mseDecoder) {\n                    this.mseDecoder = new MseDecoder(this);\n                }\n            }\n\n            if (!this.decoderWorker) {\n                this.decoderWorker = new DecoderWorker(this);\n\n                this.once(EVENTS.decoderWorkerInit, () => {\n                    resolve()\n                })\n            } else {\n                resolve()\n            }\n\n        })\n    }\n\n\n    /**\n     *\n     * @param url\n     * @returns {Promise<unknown>}\n     */\n    play(url) {\n        return new Promise((resolve, reject) => {\n            if (!url && !this._opt.url) {\n                return reject();\n            }\n\n            this.loading = true;\n            this.playing = false;\n            if (!url) {\n                url = this._opt.url;\n            }\n            this._opt.url = url;\n\n            this.clearCheckHeartTimeout();\n            this.init().then(() => {\n                //\n                if (this._opt.isNotMute) {\n                    this.mute(false);\n                }\n\n                this.enableWakeLock();\n\n                this.stream.fetchStream(url);\n\n                //\n                this.checkLoadingTimeout();\n                // fetch error\n                this.stream.once(EVENTS_ERROR.fetchError, (error) => {\n                    reject(error)\n                })\n\n                // ws\n                this.stream.once(EVENTS_ERROR.websocketError, (error) => {\n                    reject(error)\n                })\n\n                // success\n                this.stream.once(EVENTS.streamSuccess, () => {\n                    resolve();\n                    //\n                    if (this._opt.useMSE) {\n                        this.video.play();\n                    }\n                })\n            }).catch((e) => {\n                reject(e)\n            })\n        })\n    }\n\n    /**\n     *\n     */\n    close() {\n        return new Promise((resolve, reject) => {\n            this._close().then(() => {\n                this.video.clearView();\n                resolve()\n            })\n        })\n    }\n\n    _close() {\n        return new Promise((resolve, reject) => {\n            //\n            if (this.stream) {\n                this.stream.destroy();\n                this.stream = null;\n            }\n\n            if (this.demux) {\n                this.demux.destroy();\n                this.demux = null;\n            }\n\n            //\n            if (this.decoderWorker) {\n                this.decoderWorker.destroy();\n                this.decoderWorker = null;\n            }\n\n            if (this.webcodecsDecoder) {\n                this.webcodecsDecoder.destroy();\n                this.webcodecsDecoder = null;\n            }\n\n            if (this.mseDecoder) {\n                this.mseDecoder.destroy();\n                this.mseDecoder = null;\n            }\n\n\n            this.clearCheckHeartTimeout();\n            this.clearCheckLoadingTimeout();\n            this.playing = false;\n            this.loading = false;\n            this.recording = false;\n            // 声音要清除掉。。。。\n            this.audio.pause();\n            // 释放lock\n            this.releaseWakeLock();\n            // 重置 stats\n            this.resetStats();\n            //\n            setTimeout(() => {\n                resolve()\n            }, 0)\n        })\n    }\n\n    /**\n     *\n     * @param flag {boolean} 是否清除画面\n     * @returns {Promise<unknown>}\n     */\n    pause(flag) {\n        if (flag) {\n            return this.close();\n        } else {\n            return this._close();\n        }\n    }\n\n    /**\n     *\n     * @param flag\n     */\n    mute(flag) {\n        this.audio.mute(flag)\n    }\n\n    /**\n     *\n     */\n    resize() {\n        this.video.resize();\n    }\n\n    /**\n     *\n     * @param fileName\n     * @param fileType\n     */\n    startRecord(fileName, fileType) {\n        if (this.recording) {\n            return;\n        }\n\n        this.recorder.setFileName(fileName, fileType);\n        this.recording = true;\n    }\n\n    /**\n     *\n     */\n    stopRecordAndSave() {\n        if (this.recording) {\n            this.recording = false;\n        }\n    }\n\n    _hasControl() {\n        let result = false;\n\n        let hasBtnShow = false;\n        Object.keys(this._opt.operateBtns).forEach((key) => {\n            if (this._opt.operateBtns[key]) {\n                hasBtnShow = true;\n            }\n        });\n\n        if (this._opt.showBandwidth || this._opt.text || hasBtnShow) {\n            result = true;\n        }\n\n        return result;\n    }\n\n    checkHeart() {\n        this.clearCheckHeartTimeout();\n        this.checkHeartTimeout();\n    }\n\n    // 心跳检查，如果渲染间隔暂停了多少时间之后，就会抛出异常\n    checkHeartTimeout() {\n        this._checkHeartTimeout = setTimeout(() => {\n            this.pause(false).then(() => {\n                this.emit(EVENTS.timeout, 'heart timeout');\n            });\n        }, this._opt.timeout * 1000)\n    }\n\n    //\n    clearCheckHeartTimeout() {\n        if (this._checkHeartTimeout) {\n            clearTimeout(this._checkHeartTimeout);\n            this._checkHeartTimeout = null;\n        }\n    }\n\n    // loading 等待时间\n    checkLoadingTimeout() {\n        this._checkLoadingTimeout = setTimeout(() => {\n            this.pause(false).then(() => {\n                this.emit(EVENTS.timeout, 'loading timeout');\n            });\n        }, this._opt.timeout * 1000)\n    }\n\n    clearCheckLoadingTimeout() {\n        if (this._checkLoadingTimeout) {\n            clearTimeout(this._checkLoadingTimeout);\n            this._checkLoadingTimeout = null;\n        }\n    }\n\n    handleRender() {\n        if (this.loading) {\n            this.emit(EVENTS.start);\n            this.loading = false;\n            this.clearCheckLoadingTimeout();\n        }\n        if (!this.playing) {\n            this.playing = true;\n        }\n        this.checkHeart();\n    }\n\n\n    //\n    updateStats(options) {\n        options = options || {};\n\n        if (!this._startBpsTime) {\n            this._startBpsTime = now();\n        }\n\n        const _nowTime = now();\n        const timestamp = _nowTime - this._startBpsTime;\n\n        if (timestamp < 1 * 1000) {\n            if (options.fps) {\n                this._stats.fps += 1;\n            }\n            if (options.abps) {\n                this._stats.abps += options.abps;\n            }\n            if (options.vbps) {\n                this._stats.vbps += options.vbps;\n            }\n            return;\n        }\n        if (isNotEmpty(options.ts)) {\n            this._stats.ts = options.ts;\n        }\n        if (isNotEmpty(options.buf)) {\n            this._stats.buf = options.buf;\n        }\n        this.emit(EVENTS.stats, this._stats);\n        this.emit(EVENTS.performance, fpsStatus(this._stats.fps));\n        this._stats.fps = 0;\n        this._stats.abps = 0;\n        this._stats.vbps = 0;\n        this._startBpsTime = _nowTime;\n    }\n\n    resetStats() {\n        this._startBpsTime = null;\n        this._stats = {\n            buf: 0, //ms\n            fps: 0,\n            abps: 0,\n            vbps: 0,\n            ts: 0\n        }\n    }\n\n    enableWakeLock() {\n        if (this._opt.keepScreenOn) {\n            this.keepScreenOn.enable();\n        }\n    }\n\n    releaseWakeLock() {\n        if (this._opt.keepScreenOn) {\n            this.keepScreenOn.disable();\n        }\n    }\n\n    destroy() {\n        this._loading = false;\n        this._playing = false;\n        this._hasLoaded = false;\n\n\n        if (this.decoderWorker) {\n            this.decoderWorker.destroy();\n            this.decoderWorker = null;\n        }\n        if (this.video) {\n            this.video.destroy();\n            this.video = null;\n        }\n        if (this.audio) {\n            this.audio.destroy();\n            this.audio = null;\n        }\n\n        if (this.stream) {\n            this.stream.destroy();\n            this.stream = null;\n        }\n\n        if (this.recorder) {\n            this.recorder.destroy();\n            this.recorder = null;\n        }\n\n        if (this.control) {\n            this.control.destroy();\n            this.control = null;\n        }\n\n        if (this.webcodecsDecoder) {\n            this.webcodecsDecoder.destroy();\n            this.webcodecsDecoder = null;\n        }\n\n        if (this.mseDecoder) {\n            this.mseDecoder.destroy();\n            this.mseDecoder = null;\n        }\n\n        if (this.events) {\n            this.events.destroy();\n            this.events = null;\n        }\n\n        this.clearCheckHeartTimeout();\n        this.clearCheckLoadingTimeout();\n        //\n        this.releaseWakeLock();\n        this.keepScreenOn = null;\n\n        // 其他没法解耦的，通过 destroy 方式\n        this.emit('destroy');\n        // 接触所有绑定事件\n        this.off();\n\n        this.debug.log('play', 'destroy end');\n    }\n\n}\n","import Player from './player';\nimport Events from \"./utils/events\";\nimport {DEMUX_TYPE, EVENTS, JESSIBUCA_EVENTS, PLAYER_PLAY_PROTOCOL, SCALE_MODE_TYPE} from \"./constant\";\nimport {isNotEmpty, supportWCS} from \"./utils\";\nimport Emitter from \"./utils/emitter\";\n\n\nclass Jessibuca extends Emitter {\n    constructor(options) {\n        super()\n        let _opt = options;\n        let $container = options.container;\n        if (typeof options.container === 'string') {\n            $container = document.querySelector(options.container);\n        }\n        if (!$container) {\n            throw new Error('Jessibuca need container option');\n            return;\n        }\n\n        $container.classList.add('jessibuca-container');\n\n        delete _opt.container;\n\n        // s -> ms\n        if (isNotEmpty(_opt.videoBuffer)) {\n            _opt.videoBuffer = Number(_opt.videoBuffer) * 1000\n        }\n\n        this._opt = _opt;\n        this.$container = $container;\n        this.href = null;\n        this.events = new Events(this);\n        this.player = new Player($container, _opt);\n        this._bindEvents();\n    }\n\n    _bindEvents() {\n        // 对外的事件\n        Object.keys(JESSIBUCA_EVENTS).forEach((key) => {\n            this.player.on(JESSIBUCA_EVENTS[key], (value) => {\n                this.emit(key, value)\n            })\n        })\n    }\n\n    /**\n     * 是否开启控制台调试打印\n     * @param value {Boolean}\n     */\n    setDebug(value) {\n        this.player.updateOption({\n            isDebug: !!value\n        })\n    }\n\n    /**\n     *\n     */\n    mute() {\n        this.player.mute(true);\n    }\n\n    /**\n     *\n     */\n    cancelMute() {\n        this.player.mute(false);\n    }\n\n    /**\n     *\n     * @param value {number}\n     */\n    setVolume(value) {\n        this.player.volume = value;\n    }\n\n    /**\n     *\n     */\n    audioResume() {\n        this.player.audio.audioEnabled(true);\n    }\n\n    /**\n     * 设置超时时长, 单位秒 在连接成功之前和播放中途,如果超过设定时长无数据返回,则回调timeout事件\n     * @param value {number}\n     */\n    setTimeout(time) {\n        this.player.updateOption({\n            timeout: Number(time)\n        })\n    }\n\n    /**\n     *\n     * @param type {number}: 0,1,2\n     */\n    setScaleMode(type) {\n        type = Number(type);\n        let options = {\n            isFullResize: false,\n            isResize: false\n        }\n        switch (type) {\n            case SCALE_MODE_TYPE.full:\n                options.isFullResize = false;\n                options.isResize = false;\n                break;\n            case SCALE_MODE_TYPE.auto:\n                options.isFullResize = false;\n                options.isResize = true;\n                break;\n            case SCALE_MODE_TYPE.fullAuto:\n                options.isFullResize = true;\n                options.isResize = true;\n                break;\n        }\n\n        this.player.updateOption(options);\n        this.resize();\n    }\n\n    /**\n     *\n     * @returns {Promise<commander.ParseOptionsResult.unknown>}\n     */\n    pause() {\n        return this.player.pause();\n    }\n\n    /**\n     *\n     */\n    close() {\n        return this.player.close();\n    }\n\n\n    /**\n     *\n     */\n    clearView() {\n        this.player.video.clearView()\n    }\n\n    /**\n     *\n     * @param url {string}\n     * @returns {Promise<unknown>}\n     */\n    play(url) {\n        return new Promise((resolve, reject) => {\n            if (!url && !this._opt.url) {\n                reject();\n                return;\n            }\n\n            if (url) {\n                // url 相等的时候。\n                if (this._opt.url) {\n                    // 存在相同的 url\n                    if (url === this._opt.url) {\n                        // 正在播放\n                        if (this.player.playing) {\n                            resolve();\n                        } else {\n                            // pause ->  play\n                            this.clearView();\n                            this.player.play(this._opt.url).then(() => {\n                                resolve();\n                            }).catch(() => {\n                                this.player.pause().then(() => {\n                                    reject();\n                                })\n                            })\n                        }\n                    } else {\n                        // url 发生改变了\n                        this.player.pause().then(() => {\n                            // 清除 画面\n                            this.clearView();\n                            return this._play(url);\n                        }).catch(() => {\n                            reject();\n                        })\n                    }\n                } else {\n                    return this._play(url);\n                }\n            } else {\n                //  url 不存在的时候\n                //  就是从 play -> pause -> play\n                this.player.play(this._opt.url).then(() => {\n                    resolve();\n                }).catch(() => {\n                    this.player.pause().then(() => {\n                        reject();\n                    })\n                })\n            }\n        })\n    }\n\n    /**\n     *\n     * @param url {string}\n     * @returns {Promise<unknown>}\n     * @private\n     */\n    _play(url) {\n        return new Promise((resolve, reject) => {\n            this._opt.url = url;\n            //  新的url\n            const isHttp = url.indexOf(\"http\") === 0;\n            //\n            const protocol = isHttp ? PLAYER_PLAY_PROTOCOL.fetch : PLAYER_PLAY_PROTOCOL.websocket\n            //\n            const demuxType = (isHttp || url.indexOf(\".flv\") !== -1 || this._opt.isFlv) ? DEMUX_TYPE.flv : DEMUX_TYPE.m7s;\n\n            this.player.updateOption({\n                protocol,\n                demuxType\n            })\n\n            if (this.hasLoaded()) {\n                this.player.play(url).then(() => {\n                    resolve();\n                }).catch(() => {\n                    this.player.pause().then(() => {\n                        reject();\n                    })\n                })\n            } else {\n                this.player.once(EVENTS.load, () => {\n                    this.player.play(url).then(() => {\n                        resolve();\n                    }).catch(() => {\n                        this.player.pause().then(() => {\n                            reject();\n                        })\n                    })\n                })\n            }\n        })\n    }\n\n    /**\n     *\n     */\n    resize() {\n        this.player.resize();\n    }\n\n    /**\n     *\n     * @param time {number} s\n     */\n    setBufferTime(time) {\n        time = Number(time)\n        // s -> ms\n        this.player.updateOption({\n            videoBuffer: time * 1000\n        })\n    }\n\n    /**\n     *\n     * @param deg {number}\n     */\n    setRotate(deg) {\n        deg = parseInt(deg, 10)\n        const list = [0, 90, 270];\n        if (this._opt.rotate === deg || list.indexOf(deg) === -1) {\n            return;\n        }\n        this.player.updateOption({\n            rotate: deg\n        })\n        this.resize();\n    }\n\n    /**\n     *\n     * @returns {boolean}\n     */\n    hasLoaded() {\n        return this.player.loaded;\n    }\n\n    /**\n     *\n     */\n    setKeepScreenOn() {\n        this.player.updateOption({\n            keepScreenOn: true\n        })\n    }\n\n    /**\n     *\n     * @param flag {Boolean}\n     */\n    setFullscreen(flag) {\n        const fullscreen = !!flag;\n        if (this.player.fullscreen !== fullscreen) {\n            this.player.fullscreen = fullscreen;\n        }\n    }\n\n    /**\n     *\n     * @param filename {string}\n     * @param format {string}\n     * @param quality {number}\n     * @param type {string} download,base64,blob\n     */\n    screenshot(filename, format, quality, type) {\n        return this.player.video.screenshot(filename, format, quality, type)\n    }\n\n    /**\n     *\n     * @param fileName {string}\n     * @param fileType {string}\n     * @returns {Promise<unknown>}\n     */\n    startRecord(fileName, fileType) {\n        return new Promise((resolve, reject) => {\n            if (this.player.playing) {\n                this.player.startRecord(fileName, fileType)\n                resolve();\n            } else {\n                reject();\n            }\n        })\n    }\n\n    stopRecordAndSave() {\n        if (this.player.recording) {\n            this.player.stopRecordAndSave();\n        }\n    }\n\n    /**\n     *\n     * @returns {Boolean}\n     */\n    isPlaying() {\n        return this.player.playing;\n    }\n\n    /**\n     * 是否静音状态\n     * @returns {Boolean}\n     */\n    isMute() {\n        return this.player.audio.isMute;\n    }\n\n    /**\n     * 是否在录制视频\n     * @returns {*}\n     */\n    isRecording() {\n        return this.player.recorder.recording;\n    }\n\n    /**\n     *\n     */\n    destroy() {\n        this.player.destroy();\n        this.player = null;\n    }\n}\n\n\nwindow.Jessibuca = Jessibuca;\n\nexport default Jessibuca;\n"],"names":["PLAYER_PLAY_PROTOCOL","websocket","fetch","DEMUX_TYPE","flv","m7s","DEFAULT_PLAYER_OPTIONS","videoBuffer","isResize","isFullResize","isFlv","debug","timeout","supportDblclickFullscreen","showBandwidth","keepScreenOn","isNotMute","hasAudio","hasVideo","operateBtns","fullscreen","screenshot","play","audio","record","hasControl","loadingText","background","decoder","url","rotate","forceNoOffscreen","hiddenAutoPause","protocol","demuxType","useWCS","useMSE","useOffscreen","WORKER_CMD_TYPE","init","initVideo","render","playAudio","print","printErr","initAudio","kBps","decode","audioCode","videoCode","MEDIA_TYPE","video","FLV_MEDIA_TYPE","WORKER_SEND_TYPE","audioDecode","videoDecode","close","EVENTS","webFullscreen","decoderWorkerInit","playing","pause","mute","load","loading","videoInfo","timeUpdate","audioInfo","log","error","stats","performance","recording","recordingTimestamp","recordCreateError","buffer","videoFrame","start","metadata","resize","streamEnd","streamSuccess","streamMessage","streamError","volumechange","destroy","mseSourceOpen","mseSourceClose","mseSourceBufferError","mseSourceBufferBusy","videoWaiting","videoTimeUpdate","JESSIBUCA_EVENTS","EVENTS_ERROR","fetchError","websocketError","websocketCloseSuccess","websocketClosedByError","WEBSOCKET_STATUS","notConnect","open","SCREENSHOT_TYPE","download","base64","blob","VIDEO_ENC_TYPE","VIDEO_ENC_CODE","h264","h265","AUDIO_ENC_TYPE","H265_NAL_TYPE","vps","sps","pps","CONTROL_HEIGHT","SCALE_MODE_TYPE","full","auto","fullAuto","FILE_SUFFIX","mp4","webm","CANVAS_RENDER_TYPE","webcodecs","webgl","offscreen","ENCODED_VIDEO_TYPE","key","delta","MP4_CODECS","avc","hev","MEDIA_SOURCE_STATE","ended","closed","FRAG_DURATION","Math","ceil","Debug","constructor","master","name","args","_opt","console","warn","Events","destroys","proxy","bind","target","callback","option","Array","isArray","map","item","addEventListener","removeEventListener","push","forEach","event","player","Object","defineProperty","get","$container","getBoundingClientRect","rect","noop","supportOffscreen","$canvas","transferControlToOffscreen","supportOffscreenV2","OffscreenCanvas","createContextGL","gl","validContextNames","nameIndex","length","contextName","contextOptions","preserveDrawingBuffer","getContext","e","getParameter","dataURLToFile","dataURL","arr","split","bstr","atob","type","replace","n","u8arr","Uint8Array","charCodeAt","File","downloadImg","content","fileName","aLink","document","createElement","href","URL","createObjectURL","click","revokeObjectURL","now","Date","getTime","WebAssembly","instantiate","module","Module","of","Instance","clamp","num","a","b","max","min","setStyle","element","value","keys","style","getStyle","numberType","getComputedStyle","getPropertyValue","parseFloat","getNowTime","calculationRate","totalSize","lastTime","size","thisTime","diffTime","downloadRecord","suffix","window","supportWCS","formatVideoDecoderConfigure","avcC","codecArray","subarray","codecString","j","h","toString","codec","description","isFullScreen","mozIsFullScreen","webkitIsFullScreen","bpsSize","toFixed","fpsStatus","fps","result","createEmptyImageBitmap","width","height","$canvasElement","createImageBitmap","supportMSE","MediaSource","isTypeSupported","isEmpty","undefined","isNotEmpty","screenfullChange","emit","screenfull","on","events","off","_hasLoaded","request","then","catch","exit","classList","add","clientHeight","bodyHeight","clientWidth","bodyWidth","body","playerHeight","playerWidth","$videoElement","bodyRatio","playerRatio","needSpin","scale","transform","remove","ignoreList","includes","Emitter","fn","ctx","once","self","listener","apply","_","data","evtArr","slice","i","evts","liveEvents","len","vertexShaderScript","join","fragmentShaderScript","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","_initTexture","index","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","uniform1i","getUniformLocation","yTextureRef","uTextureRef","vTextureRef","w","y","u","v","viewport","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","deleteProgram","deleteBuffer","deleteTexture","CommonLoader","initCanvasViewSize","updateVideoInfo","encTypeCode","encType","resizeWidth","resizeHeight","left","top","wScale","hScale","CanvasVideoLoader","position","appendChild","context2D","contextGl","contextGlRender","contextGlDestroy","bitmaprenderer","renderType","_initCanvasRender","_initContextGl","createWebGL","_initContext2D","_supportOffscreen","_bindOffscreen","msg","transferFromImageBitmap","output","drawImage","filename","format","quality","formatType","png","jpeg","webp","encoderOptions","Number","toDataURL","file","clearView","imageBitMap","clear","COLOR_BUFFER_BIT","clearRect","removeChild","VideoLoader","muted","timeStamp","$video","canvas","videoWidth","videoHeight","context","Video","Loader","getLoaderFactory","opt","AudioContextLoader","bufferList","scriptNode","hasInitScriptNode","audioContextChannel","audioContext","AudioContext","webkitAudioContext","gainNode","createGain","source","createBufferSource","connect","destination","noteOn","audioBufferSourceNode","mediaStreamAudioDestinationNode","createMediaStreamDestination","audioEnabled","gain","channels","sampleRate","updateAudioInfo","isPlaying","isMute","isStateSuspended","volume","bufferSize","initScriptNode","createScriptProcessor","onaudioprocess","audioProcessingEvent","outputBuffer","shift","channel","nowBuffering","getChannelData","flag","setVolume","isNaN","setValueAtTime","currentTime","closeAudio","disconnect","state","resume","suspend","isStateRunning","ts","Audio","FetchLoader","abortController","AbortController","streamRate","rate","fetchStream","demux","signal","res","reader","getReader","fetchNext","read","done","byteLength","dispatch","abort","WebsocketLoader","socket","socketStatus","wsUrl","_createWebSocket","WebSocket","binaryType","_handleMessage","message","Stream","RecordRTCLoader","fileType","isRecording","recordingInterval","setFileName","recordTime","startRecord","options","mimeType","onTimeStamp","timestamp","disableLogs","stream","captureStream","audioStream","addTrack","getAudioTracks","recorder","RecordRTC","startRecording","setInterval","stopRecordAndSave","stopRecording","getBlob","_reset","clearInterval","Recorder","DecoderWorker","decoderWorker","Worker","_initDecoderWorker","onmessage","cmd","_initWork","code","handleRender","updateStats","buf","delay","postMessage","JSON","stringify","decodeVideo","arrayBuffer","isIFrame","decodeAudio","_decodeAudioNoDelay","_decodeAudio","terminate","stopId","firstTimestamp","startTimestamp","dropping","initInterval","getDelay","_loop","_doDecoderDecode","webcodecsDecoder","mseDecoder","payload","isIframe","pushBuffer","FlvLoader","input","_inputFlv","flvDemux","dispatchFlvData","tmp","ArrayBuffer","tmp8","tmp32","Uint32Array","t","abps","vbps","_doDecode","need","next","combine","set","remain","M7sLoader","dv","DataView","getUint8","getUint32","Demux","WebcodecsDecoder","hasInit","isInitInfo","initDecoder","_this","VideoDecoder","handleDecode","handleError","codedWidth","codedHeight","setTimeout","videoCodec","config","configure","chunk","EncodedVideoChunk","iconsMap","fullscreenExit","recordStop","reduce","icons","control","insertAdjacentHTML","querySelector","object","setAttribute","display","overflow","pointerEvents","zIndex","contentDocument","defaultView","setVolumeHandle","percentage","$volumeOn","$volumeOff","$volumeHandle","$volumePanel","panelHeight","handleHeight","$volumePanelText","innerHTML","parseInt","$loading","$poster","$playBig","$fullscreenExit","$fullscreen","$record","$recordStop","$play","$pause","$screenshot","$speed","bps","$controls","volumeChangeFromEvent","bottom","panelBottom","composedPath","indexOf","isFocus","stopPropagation","$volume","$volumePanelWrap","lastVolume","isVolumeDroging","Control","template","observer","property","autoSize","padding","canvasWidth","canvasHeight","canvasRatio","visibilityState","_isPlayingBeforePageHidden","_wakeLock","enableWakeLock","MP4","types","avc1","hvc1","hvcC","btrt","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","sdtp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trun","trex","tkhd","vmhd","smhd","hasOwnProperty","constants","FTYP","STSD_PREFIX","STTS","STSC","STCO","STSZ","HDLR_VIDEO","HDLR_AUDIO","DREF","SMHD","VMHD","box","datas","prototype","call","arguments","arrayCount","offset","generateInitSegment","meta","timescale","duration","trackId","id","presentWidth","presentHeight","xmhd","stsdOld","videoType","channelCount","audioSampleRate","configSize","concat","avcc","codecWidth","codecHeight","track","baseMediaDecodeTime","sequenceNumber","sdtpOld","A","flags","isLeading","dependsOn","isDependedOn","hasRedundancy","dataSize","cts","isNonSync","ExpGolomb","uint8array","TAG","_buffer","_buffer_index","_total_bytes","_total_bits","_current_word","_current_word_bits_left","_fillCurrentWord","buffer_bytes_left","bytes_read","word","readBits","bits","bits_need_left","bits_read_next","result2","readBool","readByte","_skipLeadingZero","zero_count","readUEG","leading_zeros","readSEG","SPSParser","_ebsp2rbsp","src","src_length","dst","dst_idx","parseSPS","rbsp","gb","profile_idc","level_idc","profile_string","getProfileString","level_string","getLevelString","chroma_format_idc","chroma_format","chroma_format_table","bit_depth","scaling_list_count","_skipScalingList","pic_order_cnt_type","num_ref_frames_in_pic_order_cnt_cycle","ref_frames","pic_width_in_mbs_minus1","pic_height_in_map_units_minus1","frame_mbs_only_flag","frame_crop_left_offset","frame_crop_right_offset","frame_crop_top_offset","frame_crop_bottom_offset","frame_cropping_flag","sar_width","sar_height","fps_fixed","fps_num","fps_den","vui_parameters_present_flag","aspect_ratio_idc","sar_w_table","sar_h_table","num_units_in_tick","time_scale","sarScale","crop_unit_x","crop_unit_y","sub_wc","sub_hc","codec_width","codec_height","present_width","chroma_format_string","getChromaFormatString","frame_rate","fixed","sar_ratio","codec_size","present_size","count","last_scale","next_scale","delta_scale","chroma","parseAVCDecoderConfigurationRecord","version","avcProfile","_naluLengthSize","spsCount","getUint16","profile","level","bitDepth","chromaFormat","sarRatio","frameRate","refSampleDuration","ppsCount","parseHEVCDecoderConfigurationRecord","vpsTag","vpsLength","vpsData","from","spsTag","spsLength","spsData","ppsTag","ppsLength","ppsData","MseDecoder","isAvc","mediaSource","sourceBuffer","cacheTrack","timeInit","mediaSourceOpen","decodeInterval","readyState","isStateOpen","isStateClosed","isStateEnded","_decodeConfigurationRecord","bufferItem","_decodeVideo","metaData","metaBox","appendBuffer","bytes","dts","buffered","removeBuffer","end","drop","mdatBytes","mdatbox","moofbox","isKeyframe","addSourceBuffer","updating","dropSourceBuffer","stop","endOfStream","stopDecodeInterval","WEBM","oldIOS","navigator","exec","userAgent","MSStream","nativeWakeLock","NoSleep","enabled","handleVisibilityChange","enable","noSleepTimer","noSleepVideo","_addSourceToVideo","random","dataURI","isEnabled","wakeLock","err","disable","hidden","location","Promise","resolve","playPromise","release","Player","container","assign","_hasControl","_loading","_playing","_checkHeartTimeout","_checkLoadingTimeout","_startBpsTime","_stats","contains","loaded","updateOption","reject","clearCheckHeartTimeout","checkLoadingTimeout","_close","clearCheckLoadingTimeout","releaseWakeLock","resetStats","hasBtnShow","text","checkHeart","checkHeartTimeout","clearTimeout","_nowTime","Jessibuca","Error","_bindEvents","setDebug","isDebug","cancelMute","audioResume","time","setScaleMode","_play","isHttp","hasLoaded","setBufferTime","setRotate","deg","list","setKeepScreenOn","setFullscreen"],"mappings":"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"}